"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){var t=this,e=this,i=e?e.document:null,n=(e?e.document.documentElement:null,/^(["'](\\.|[^"\\\n\r])*?["']|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/),a=/^-ms-/,o=/[\-_]([\da-z])/gi,l=/([A-Z])/g,s=/\./,r=/[-|+]?[\D]/gi,d=/\D/gi,c=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),u=/&/g,h=/=/,p=/[ ]+/g,f={},g=void 0,m=void 0;f.guid=1,f.getGuid=function(){return f.guid++},f.info=g=function(){function t(t,n){return t={href:e.location.href,param:e.location.search,referrer:i.referrer,pathname:e.location.pathname,hostname:e.location.hostname,port:e.location.port},n=t.href.split(/[\?#]/),t.param=t.param.replace("?",""),t.url=n[0],t.href.search("#")>-1&&(t.hashdata=m.last(n)),n=null,t.baseUrl=m.left(t.href,"?").replace(t.pathname,""),t}function n(t,e,i){return g.errorMsg&&g.errorMsg[t]?{className:t,errorCode:e,methodName:i,msg:g.errorMsg[t][e]}:{className:t,errorCode:e,methodName:i}}var a=arguments,o="1.4.129",l="",s=function(){console.error(m.toArray(a).join(":"))},r={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34,INSERT:45,SPACE:32},d=[{label:"SUN"},{label:"MON"},{label:"TUE"},{label:"WED"},{label:"THU"},{label:"FRI"},{label:"SAT"}],c=function(t,i,n,a,o,l){return e&&e.navigator?(t=navigator.userAgent.toLowerCase(),i=t.search(/mobile/g)!=-1,l,t.search(/iphone/g)!=-1?{name:"iphone",version:0,mobile:!0}:t.search(/ipad/g)!=-1?{name:"ipad",version:0,mobile:!0}:t.search(/android/g)!=-1?(a=/(android)[ \/]([\w.]+)/.exec(t)||[],l=a[2]||"0",{name:"android",version:l,mobile:i}):(n="",a=/(opr)[ \/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],o=a[1]||"",l=a[2]||"0","msie"==o&&(o="ie"),{name:o,version:l,mobile:i})):{}}(),u=!("undefined"==typeof window||"undefined"==typeof navigator||!e.document),h=e&&/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",p={},f=!!e&&("ontouchstart"in e||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),x=!!e&&(e.FileReader&&e.File&&e.FileList&&e.Blob);return{errorMsg:p,version:o,baseUrl:l,onerror:s,eventKeys:r,weekNames:d,browser:c,isBrowser:u,supportTouch:f,supportFileApi:x,wheelEnm:h,urlUtil:t,getError:n}}(),f.util=m=function(){function x(t,e){if(Q(t))return[];var i=void 0,n=0,a=t.length,o=void 0===a||"function"==typeof t;if(o){for(i in t)if("undefined"!=typeof t[i]&&e.call(t[i],i,t[i])===!1)break}else for(;n<a&&("undefined"==typeof t[n]||e.call(t[n],n,t[n++])!==!1););return t}function v(t,e){if(Q(t))return[];var i=void 0,n=0,a=t.length,o=[],l=void 0;if(z(t)){for(i in t)if("undefined"!=typeof t[i]){if(l=void 0,(l=e.call(t[i],i,t[i]))===!1)break;o.push(l)}}else for(;n<a;)if("undefined"!=typeof t[n]){if(l=void 0,(l=e.call(t[n],n,t[n++]))===!1)break;o.push(l)}return o}function b(t,e){if(Q(t))return-1;if(z(t))for(var i in t){if("undefined"!=typeof t[i]&&P(e)&&e.call(t[i],i,t[i]))return i;if(t[i]==e)return i}else for(var n=0,a=t.length;n<a;n++){if("undefined"!=typeof t[n]&&P(e)&&e.call(t[n],n,t[n]))return n;if(t[n]==e)return n}return-1}function y(t,e,i){var n=void 0,a=void 0,o=void 0;if(P(e)&&"undefined"==typeof i&&(i=e,e=0),"undefined"==typeof e&&(e=0),j(t)){for(n=0,a=t.length;n<a;n++)if("undefined"!=typeof t[n]){if((o=i.call(t[n],t[n]))===!1)break;"undefined"!=typeof o&&(e+=o)}return e}if(z(t)){for(n in t)if("undefined"!=typeof t[n]){if((o=i.call(t[n],t[n]))===!1)break;"undefined"!=typeof o&&(e+=o)}return e}return console.error("argument error : ax5.util.sum - use Array or Object"),e}function w(t,e,i){var n=void 0,a=void 0,o=void 0;if(P(e)&&"undefined"==typeof i&&(i=e,e=0),"undefined"==typeof e&&(e=0),j(t)){for(n=0,a=t.length;n<a;n++)if("undefined"!=typeof t[n]){if((o=i.call(t[n],t[n]))===!1)break;"undefined"!=typeof o&&(e+=o)}return e/a}if(z(t)){a=0;for(n in t)if("undefined"!=typeof t[n]){if((o=i.call(t[n],t[n]))===!1)break;"undefined"!=typeof o&&(e+=o),++a}return e/a}return console.error("argument error : ax5.util.sum - use Array or Object"),e}function _(e,i){var n,a,o;if(j(e)){for(n=0,a=e.length,o=e[n];n<a-1&&("undefined"==typeof e[n]||(o=i.call(t,o,e[++n]))!==!1););return o}if(z(e)){for(n in e)if("undefined"!=typeof e[n]&&(o=i.call(t,o,e[n]))===!1)break;return o}return console.error("argument error : ax5.util.reduce - use Array or Object"),null}function I(e,i){for(var n=e.length-1,a=e[n];n>0&&("undefined"==typeof e[n]||(a=i.call(t,a,e[--n]))!==!1););return a}function k(t,e){if(Q(t))return[];var i,n,a=0,o=t.length,l=[];if(z(t))for(i in t)"undefined"!=typeof t[i]&&(n=e.call(t[i],i,t[i]))&&l.push(t[i]);else for(;a<o;)"undefined"!=typeof t[a]&&((n=e.call(t[a],a,t[a]))&&l.push(t[a]),a++);return l}function C(t){var e="";if(f.util.isArray(t)){var i=0,n=t.length;for(e+="[";i<n;i++)i>0&&(e+=","),e+=C(t[i]);e+="]"}else if(f.util.isObject(t)){e+="{";var a=[];x(t,function(t,e){a.push('"'+t+'": '+C(e))}),e+=a.join(", "),e+="}"}else e=f.util.isString(t)?'"'+t+'"':f.util.isNumber(t)?t:f.util.isUndefined(t)?"undefined":f.util.isFunction(t)?'"{Function}"':t;return e}function $(t,e){if(!e&&!n.test(t))return{error:500,msg:"syntax error"};try{return new Function("","return "+t)()}catch(i){return{error:500,msg:"syntax error"}}}function S(t){var e;return null!=t&&t==t.window?e="window":t&&1==t.nodeType?e="element":t&&11==t.nodeType?e="fragment":null===t?e="null":"undefined"==typeof t?e="undefined":"[object Object]"==yt.call(t)?e="object":"[object Array]"==yt.call(t)?e="array":"[object String]"==yt.call(t)?e="string":"[object Number]"==yt.call(t)?e="number":"[object NodeList]"==yt.call(t)?e="nodelist":"function"==typeof t&&(e="function"),e}function T(t){return null!=t&&t==t.window}function E(t){return!(!t||1!=t.nodeType&&11!=t.nodeType)}function z(t){return"[object Object]"==yt.call(t)}function j(t){return"[object Array]"==yt.call(t)}function P(t){return"function"==typeof t}function N(t){return"[object String]"==yt.call(t)}function D(t){return"[object Number]"==yt.call(t)}function R(t){return!!("[object NodeList]"==yt.call(t)||"undefined"!=typeof t&&t&&t[0]&&1==t[0].nodeType)}function K(t){return"undefined"==typeof t}function Q(t){return"undefined"==typeof t||null===t||""===t}function A(t){return t instanceof Date&&!isNaN(t.valueOf())}function M(t){var e=!1;if(t)if(t instanceof Date&&!isNaN(t.valueOf()))e=!0;else{if(t.length>7&&nt(t)instanceof Date)return!0;if(t=t.replace(/\D/g,""),t.length>7){var i=t.substr(4,2),n=t.substr(6,2);t=nt(t),t.getMonth()==i-1&&t.getDate()==n&&(e=!0)}}else;return e}function q(t){if(z(t)){var e=Object.keys(t),i={};return i[e[0]]=t[e[0]],i}return j(t)?t[0]:void console.error("ax5.util.object.first","argument type error")}function O(t){if(z(t)){var e=Object.keys(t),i={};return i[e[e.length-1]]=t[e[e.length-1]],i}return j(t)?t[t.length-1]:void console.error("ax5.util.object.last","argument type error")}function H(t,e,n,a){var o;return"number"==typeof n&&(o=new Date,o.setDate(o.getDate()+n)),a=a||{},i.cookie=[escape(t),"=",escape(e),o?"; expires="+o.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}function F(t){for(var e=t+"=",n=i.cookie.split(";"),a=0,o=n.length;a<o;a++){for(var l=n[a];" "==l.charAt(0);)l=l.substring(1);if(l.indexOf(e)!=-1)return unescape(l.substring(e.length,l.length))}return""}function G(t){return e.alert(C(t)),t}function L(t,e){return"undefined"==typeof t||"undefined"==typeof e?"":N(e)?t.indexOf(e)>-1?t.substr(0,t.indexOf(e)):"":D(e)?t.substr(0,e):""}function B(t,e){return"undefined"==typeof t||"undefined"==typeof e?"":(t=""+t,N(e)?t.lastIndexOf(e)>-1?t.substr(t.lastIndexOf(e)+1):"":D(e)?t.substr(t.length-e):"")}function W(t){return t.replace(a,"ms-").replace(o,function(t,e){return e.toUpperCase()})}function V(t){return W(t).replace(l,function(t,e){return"-"+e.toLowerCase()})}function U(t,e){var i,n,a,o=(""+t).split(s);return n=Number(o[0].replace(/,/g,""))<0||"-0"==o[0],a=0,o[0]=o[0].replace(r,""),o[1]?(o[1]=o[1].replace(d,""),a=Number(o[0]+"."+o[1])||0):a=Number(o[0])||0,i=n?-a:a,x(e,function(t,e){"round"==t&&(i=D(e)?e<0?+(Math.round(i+"e-"+Math.abs(e))+"e+"+Math.abs(e)):+(Math.round(i+"e+"+e)+"e-"+e):Math.round(i)),"floor"==t&&(i=Math.floor(i)),"ceil"==t?i=Math.ceil(i):"money"==t?i=function(t){var e=""+t;if(isNaN(e)||""==e)return"";var i=e.split(".");i[0]+=".";do i[0]=i[0].replace(c,"$1,$2");while(c.test(i[0]));return i.length>1?i.join(""):i[0].split(".")[0]}(i):"abs"==t?i=Math.abs(Number(i)):"byte"==t&&(i=function(t){t=Number(i);var e="KB",n=t/1024;return n/1024>1&&(e="MB",n/=1024),n/1024>1&&(e="GB",n/=1024),U(n,{round:1})+e}(i))}),i}function Y(t){return"undefined"!=typeof t.length?Array.prototype.slice.call(t):[]}function X(t,e){var i=e.length,n=t.length,a=0;if("number"==typeof i)for(;a<i;a++)t[n++]=e[a];else for(;void 0!==e[a];)t[n++]=e[a++];return t.length=n,t}function Z(t,e){var i;return N(t)&&"undefined"!=typeof e&&"param"==e?t:N(t)&&"undefined"!=typeof e&&"object"==e||N(t)&&"undefined"==typeof e?(i={},x(t.split(u),function(){var t=this.split(h);i[t[0]]?(N(i[t[0]])&&(i[t[0]]=[i[t[0]]]),i[t[0]].push(t[1])):i[t[0]]=t[1]}),i):(i=[],x(t,function(t,e){i.push(t+"="+escape(e))}),i.join("&"))}function J(t){return encodeURIComponent(t)}function tt(t){return decodeURIComponent(t)}function et(){f.info.onerror.apply(this,arguments)}function it(t,e,i,n,a,o){var l,s;return s=new Date,e<0&&(e=0),"undefined"==typeof n&&(n=12),"undefined"==typeof a&&(a=0),l=new Date(Date.UTC(t,e,i||1,n,a,o||0)),0==e&&1==i&&l.getUTCHours()+l.getTimezoneOffset()/60<0?l.setUTCHours(0):l.setUTCHours(l.getUTCHours()+l.getTimezoneOffset()/60),l}function nt(t,e){var i=void 0,n=void 0,a=void 0,o=void 0,l=void 0,s=void 0,r=void 0,d=void 0,c=void 0,u=void 0,h=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,p=/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i;if(N(t))if(0==t.length)t=new Date;else if(t.length>15)p.test(t)||h.test(t)?t=new Date(t):(s=t.split(/ /g),c=s[0].split(/\D/g),i=c[0],n=parseFloat(c[1]),a=parseFloat(c[2]),d=s[1]||"09:00",r=d.substring(0,5).split(":"),o=parseFloat(r[0]),l=parseFloat(r[1]),"AM"!==B(d,2)&&"PM"!==B(d,2)||(o+=12),t=it(i,n-1,a,o,l));else if(14==t.length)u=t.replace(/\D/g,""),t=it(u.substr(0,4),u.substr(4,2)-1,U(u.substr(6,2)),U(u.substr(8,2)),U(u.substr(10,2)),U(u.substr(12,2)));else if(t.length>7)u=t.replace(/\D/g,""),t=it(u.substr(0,4),u.substr(4,2)-1,U(u.substr(6,2)));else if(t.length>4)u=t.replace(/\D/g,""),t=it(u.substr(0,4),u.substr(4,2)-1,1);else{if(t.length>2)return u=t.replace(/\D/g,""),it(u.substr(0,4),u.substr(4,2)-1,1);t=new Date}return"undefined"==typeof e||"undefined"==typeof t?t:("add"in e&&(t=function(t,e){var i=void 0,n=void 0,a=void 0,o=void 0,l=864e5;return"undefined"!=typeof e.d?t.setTime(t.getTime()+e.d*l):"undefined"!=typeof e.m?(i=t.getFullYear(),n=t.getMonth(),a=t.getDate(),i+=parseInt(e.m/12),n+=e.m%12,o=lt(i,n),o<a&&(a=o),t=new Date(i,n,a,12)):"undefined"!=typeof e.y?t.setTime(t.getTime()+365*e.y*l):"undefined"!=typeof e.h&&t.setTime(t.getTime()+1e3*e.h*60*60),t}(new Date(t),e.add)),"set"in e&&(t=function(t,e){var i=void 0,n=void 0,a=void 0,o={firstDayOfMonth:function(t){return i=t.getFullYear(),n=t.getMonth(),a=1,new Date(i,n,a,12)},lastDayOfMonth:function(t){return i=t.getFullYear(),n=t.getMonth(),a=lt(i,n),new Date(i,n,a,12)}};return e in o?o[e](t):t}(new Date(t),e.set)),"return"in e?function(){var i=e["return"],n=void 0,a=void 0,o=void 0,l=void 0,s=void 0,r=void 0,d=void 0,c=void 0,u=void 0,h=void 0,p=void 0,f=void 0,m=void 0,x=void 0,v=void 0,b=void 0,y=void 0,w=void 0,_=void 0,I=void 0,k=void 0;return n=t.getUTCFullYear(),a=st(t.getMonth()+1,2),o=st(t.getDate(),2),l=st(t.getHours(),2),s=st(t.getMinutes(),2),r=st(t.getSeconds(),2),d=t.getDay(),c=/[^y]*(yyyy)[^y]*/gi,c.exec(i),u=RegExp.$1,h=/[^m]*(MM)[^m]*/g,h.exec(i),p=RegExp.$1,f=/[^d]*(dd)[^d]*/gi,f.exec(i),m=RegExp.$1,x=/[^h]*(hh)[^h]*/gi,x.exec(i),v=RegExp.$1,b=/[^m]*(mm)[^i]*/g,b.exec(i),y=RegExp.$1,w=/[^s]*(ss)[^s]*/gi,w.exec(i),_=RegExp.$1,I=/[^d]*(dw)[^w]*/gi,I.exec(i),k=RegExp.$1,"yyyy"===u&&(i=i.replace(u,B(n,u.length))),"MM"===p&&(1==p.length&&(a=t.getMonth()+1),i=i.replace(p,a)),"dd"===m&&(1==m.length&&(o=t.getDate()),i=i.replace(m,o)),"hh"===v&&(i=i.replace(v,l)),"mm"===y&&(i=i.replace(y,s)),"ss"===_&&(i=i.replace(_,r)),"dw"==k&&(i=i.replace(k,g.weekNames[d].label)),i}():t)}function at(t,e){function i(t){return Math.floor(t.getTime()/l)*l}var n,a,o=nt(t),l=864e5,s=new Date;return"undefined"==typeof e?n=U((i(o)-i(s))/l,{floor:!0}):(n=U((i(o)-i(s))/l,{floor:!0}),e.today&&(s=nt(e.today),n=U((i(o)-i(s))/l,{floor:!0})),e.thisYear&&(a=new Date(s.getFullYear(),o.getMonth(),o.getDate()),n=U((i(a)-i(s))/l,{floor:!0}),n<0&&(a=new Date(s.getFullYear()+1,o.getMonth(),o.getDate()),n=U((i(a)-i(s))/l,{floor:!0}))),e.age&&(a=new Date(s.getFullYear(),o.getMonth(),o.getDate()),n=a.getFullYear()-o.getFullYear()),n)}function ot(t){var e=nt(t);return{year:e.getFullYear(),month:e.getMonth()+1,count:parseInt(e.getDate()/7+1)}}function lt(t,e){return 3==e||5==e||8==e||10==e?30:1==e?t%4==0&&t%100!=0||t%400==0?29:28:31}function st(t,e,i,n){var a=t.toString(n||10);return rt(i||"0",e-a.length)+a}function rt(t,e){return e<1?"":new Array(e+1).join(t)}function dt(t,e){if(t)for(;function(){var i=!0;if("undefined"==typeof e)t=!!t.parentNode&&t.parentNode;else if(P(e))i=e(t);else if(z(e))for(var n in e)if("tagname"===n){if(t.tagName.toLocaleLowerCase()!=e[n]){i=!1;break}}else if("clazz"===n||"class_name"===n){if(!("className"in t)){i=!1;break}for(var a=t.className.split(p),o=!1,l=0;l<a.length;l++)if(a[l]==e[n]){o=!0;break}i=o}else{if(!t.getAttribute){i=!1;break}if(t.getAttribute(n)!=e[n]){i=!1;break}}return!i}();){if(!t.parentNode||!t.parentNode.parentNode){t=!1;break}t=t.parentNode}return t}function ct(t){var e=/\D?(\d+)([a-zA-Z%]*)/i,i=(""+t).match(e),n=i[2]||"px";return i[1]+n}function ut(t){var e;if(z(t)){e="";for(var i in t)e+=i+":"+t[i]+";";return e}if(N(t)){e={};var n=t.split(/[ ]*;[ ]*/g);return n.forEach(function(t){if(""!==(t=t.trim())){var i=t.split(/[ ]*:[ ]*/g);e[i[0]]=i[1]}}),e}}function ht(t){if(!t)var t=window.event;return t.cancelBubble=!0,t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}function pt(t,e,i){function n(e){var i=h,n=p;return h=p=void 0,v=e,g=t.apply(n,i)}function a(t){return v=t,m=setTimeout(s,e),b?n(t):g}function o(t){var i=t-x,n=t-v,a=e-i;return y?Math.min(a,f-n):a}function l(t){var i=t-x,n=t-v;return void 0===x||i>=e||i<0||y&&n>=f}function s(){var t=Date.now();return l(t)?r(t):void(m=setTimeout(s,o(t)))}function r(t){return m=void 0,w&&h?n(t):(h=p=void 0,g)}function d(){void 0!==m&&clearTimeout(m),v=0,h=x=p=m=void 0}function c(){return void 0===m?g:r(Date.now())}function u(){for(var t=Date.now(),i=l(t),o=arguments.length,r=Array(o),d=0;d<o;d++)r[d]=arguments[d];if(h=r,p=this,x=t,i){if(void 0===m)return a(x);if(y)return m=setTimeout(s,e),n(x)}return void 0===m&&(m=setTimeout(s,e)),g}var h=void 0,p=void 0,f=void 0,g=void 0,m=void 0,x=void 0,v=0,b=!1,y=!1,w=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return e=+e||0,z(i)&&(b=!!i.leading,y="maxWait"in i,f=y?Math.max(+i.maxWait||0,e):f,w="trailing"in i?!!i.trailing:w),u.cancel=d,u.flush=c,u}function ft(t,e,i){var n=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return z(i)&&(n="leading"in i?!!i.leading:n,a="trailing"in i?!!i.trailing:a),pt(t,e,{leading:n,maxWait:e,trailing:a})}function gt(t){var e,i;if("object"==("undefined"==typeof t?"undefined":_typeof(t))){if(m.isArray(t)){i=t.length,e=new Array(i);for(var n=0;n<i;n++)e[n]=gt(t[n]);return e}return jQuery.extend({},t)}return t}function mt(t){return"[object String]"!=yt.call(t)?t:t?t.replace(/[\<\>\&\"]/gm,function(t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;";default:return t}}):""}function xt(t){return"[object String]"!=yt.call(t)?t:t?t.replace(/(&lt;)|(&gt;)|(&amp;)|(&quot;)/gm,function(t){switch(t){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&quot;":return'"';default:return t}}):""}function vt(t){return new function(t){this.value=t,this.toString=function(){return this.value},this.format=function(){for(var t=[],e=0,i=arguments.length;e<i;e++)t=t.concat(arguments[e]);return this.value.replace(/{(\d+)}/g,function(e,i){return"undefined"!=typeof t[i]?t[i]:e})},this.escape=function(){return mt(this.value)},this.unescape=function(){return xt(this.value)},this.encode=function(){return J(this.value)},this.decode=function(){return tt(this.value)},this.left=function(t){return L(this.value,t)},this.right=function(t){return B(this.value,t)},this.camelCase=function(){return W(this.value)},this.snakeCase=function(){return V(this.value)}}(t)}function bt(t){function e(t){return"string"==typeof t&&t.indexOf(".")!=-1&&1===parseFloat(t)}function i(t){return"string"==typeof t&&t.indexOf("%")!=-1}function n(t){return t<=1&&(t=100*t+"%"),t}function a(t){return f.util.number(Math.min(255,Math.max(t,0)),{round:2})}function o(t){return st(Math.round(t).toString(16),2)}function l(t,n){e(t)&&(t="100%");var a=i(t);return t=Math.min(n,Math.max(0,parseFloat(t))),a&&(t=parseInt(t*n,10)/100),Math.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function s(t,e,i){t=l(t,255),e=l(e,255),i=l(i,255);var n,a,o=Math.max(t,e,i),s=Math.min(t,e,i),r=(o+s)/2;if(o==s)n=a=0;else{var d=o-s;switch(a=r>.5?d/(2-o-s):d/(o+s),o){case t:n=(e-i)/d+(e<i?6:0);break;case e:n=(i-t)/d+2;break;case i:n=(t-e)/d+4}n/=6}return{h:n,s:a,l:r}}function r(t,e,i){function n(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var a=void 0,o=void 0,s=void 0;if(t=l(t,360),e=l(e,100),i=l(i,100),0===e)a=o=s=i;else{var r=i<.5?i*(1+e):i+e-i*e,d=2*i-r;a=n(d,r,t+1/3),o=n(d,r,t),s=n(d,r,t-1/3)}return{r:255*a,g:255*o,b:255*s}}var d=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",i="(?:"+e+")|(?:"+t+")",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",a="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{CSS_UNIT:new RegExp(i),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}(),c=function(t){var e=void 0;return(e=d.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=d.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=d.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=d.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=d.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=d.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=d.hex8.exec(t))?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:parseInt(e[4]/255,16),format:"hex8"}:(e=d.hex6.exec(t))?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),format:"hex"}:(e=d.hex4.exec(t))?{r:parseInt(e[1]+""+e[1],16),g:parseInt(e[2]+""+e[2],16),b:parseInt(e[3]+""+e[3],16),a:parseInt(e[4]+""+e[4],16),format:"hex8"}:!!(e=d.hex3.exec(t))&&{r:parseInt(e[1]+""+e[1],16),g:parseInt(e[2]+""+e[2],16),b:parseInt(e[3]+""+e[3],16),format:"hex"}};return new function(t){this._originalValue=t,t=c(t),this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a||1,this._format=t.format,this._hex=o(this.r)+o(this.g)+o(this.b),this.getHexValue=function(){return this._hex},this.lighten=function(t){t=0===t?0:t||10;var e=s(this.r,this.g,this.b),i={};return e.l+=t/100,e.l=Math.min(1,Math.max(0,e.l)),e.h=360*e.h,i=r(e.h,n(e.s),n(e.l)),bt("rgba("+a(i.r)+", "+a(i.g)+", "+a(i.b)+", "+this.a+")")},this.darken=function(t){t=0===t?0:t||10;var e=s(this.r,this.g,this.b),i={};return e.l-=t/100,e.l=Math.min(1,Math.max(0,e.l)),e.h=360*e.h,i=r(e.h,n(e.s),n(e.l)),bt("rgba("+a(i.r)+", "+a(i.g)+", "+a(i.b)+", "+this.a+")")},this.getBrightness=function(){return(299*this.r+587*this.g+114*this.b)/1e3},this.isDark=function(){return this.getBrightness()<128},this.isLight=function(){return!this.isDark()},this.getHsl=function(){var t=s(this.r,this.g,this.b);return t.l=Math.min(1,Math.max(0,t.l)),t.h=360*t.h,{h:t.h,s:t.s,l:t.l}}}(t)}var yt=Object.prototype.toString,wt=function(){var t={textRange:{selectAll:function(t,e,i){},arr:function(t,e,i){e.moveStart("character",i[0]),e.collapse(),e.moveEnd("character",i[1])},start:function(t,e,i){e.moveStart("character",0),e.collapse()},end:function(t,e,i){e.moveStart("character",e.text.length),e.collapse()}},range:{selectAll:function(t,e,i){e.selectNodeContents(t)},arr:function(t,e,i){z(i[0])?(e.setStart(i[0].node,i[0].offset),e.setEnd(i[1].node,i[1].offset)):(e.setStart(t.firstChild,i[0]),e.setEnd(t.firstChild,i[1]))},start:function(t,e,i){e.selectNodeContents(t),e.collapse(!0)},end:function(t,e,i){e.selectNodeContents(t),e.collapse(!1)}}};return function(e,n){var a,o,l;if(e instanceof jQuery&&(e=e.get(0)),e){if(i.body.createTextRange?(a=document.body.createTextRange(),a.moveToElementText(e),o="textRange"):window.getSelection&&(l=window.getSelection(),a=document.createRange(),o="range"),"undefined"==typeof n)t[o].selectAll.call(this,e,a,n);else if(j(n))t[o].arr.call(this,e,a,n);else for(var s in t[o])if(n==s){t[o][s].call(this,e,a,n);break}i.body.createTextRange?(a.select(),e.focus()):window.getSelection&&(e.focus(),l.removeAllRanges(),l.addRange(a))}}}();return{alert:G,each:x,map:v,search:b,reduce:_,reduceRight:I,filter:k,sum:y,avg:w,toJson:C,parseJson:$,first:q,last:O,deepCopy:gt,left:L,right:B,getType:S,isWindow:T,isElement:E,isObject:z,isArray:j,isFunction:P,isString:N,isNumber:D,isNodelist:R,isUndefined:K,isNothing:Q,setCookie:H,getCookie:F,camelCase:W,snakeCase:V,number:U,toArray:Y,merge:X,param:Z,error:et,date:nt,dday:at,daysOfMonth:lt,weeksOfMonth:ot,setDigit:st,times:rt,findParentNode:dt,cssNumber:ct,css:ut,isDate:A,isDateFormat:M,stopEvent:ht,selectRange:wt,debounce:pt,throttle:ft,escapeHtml:mt,unescapeHtml:xt,string:vt,color:bt}}(),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=f:t.ax5=function(){return f}()}).call("undefined"!=typeof window?window:void 0),ax5.def={},ax5.info.errorMsg.ax5dialog={501:"Duplicate call error"},ax5.info.errorMsg.ax5picker={401:"Can not find target element",402:"Can not find boundID",501:"Can not find content key"},ax5.info.errorMsg["single-uploader"]={460:"There are no files to be uploaded.",461:"There is no uploaded files."},ax5.info.errorMsg.ax5calendar={401:"Can not find target element"},ax5.info.errorMsg.ax5formatter={401:"Can not find target element",402:"Can not find boundID",501:"Can not find pattern"},ax5.info.errorMsg.ax5menu={501:"Can not find menu item"},ax5.info.errorMsg.ax5select={401:"Can not find target element",402:"Can not find boundID",501:"Can not find option"},ax5.info.errorMsg.ax5combobox={401:"Can not find target element",402:"Can not find boundID",501:"Can not find option"},function(){var t=this,e=/^\s*|\s*$/g;if(Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(a){if("object"!==("undefined"==typeof a?"undefined":_typeof(a))&&("function"!=typeof a||null===a))throw new TypeError("type err");var o,l,s=[];for(o in a)t.call(a,o)&&s.push(o);if(e)for(l=0;l<n;l++)t.call(a,i[l])&&s.push(i[l]);return s}}()),Array.prototype.forEach||(Array.prototype.forEach=function(t){if(void 0===this||null===this)throw TypeError();var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw TypeError();var n,a=arguments[1];for(n=0;n<i;n++)n in e&&t.call(a,e[n],n,e)}),Function.prototype.bind||(Function.prototype.bind=function(t){function e(){}if("function"!=typeof this)throw TypeError("function");var i=[].slice,n=i.call(arguments,1),a=this,o=function(){return a.apply(this instanceof e?this:t,n.concat(i.call(arguments)))};return e.prototype=a.prototype,o.prototype=new e,o}),function(){if(!document.querySelectorAll&&!document.querySelector&&document.createStyleSheet){var t=document.createStyleSheet(),e=function(e,i){var n,a=document.all,o=a.length,l=[];for(t.addRule(e,"foo:bar"),n=0;n<o&&!("bar"===a[n].currentStyle.foo&&(l.push(a[n]),l.length>i));n+=1);return t.removeRule(0),l};document.querySelectorAll=function(t){return e(t,1/0)},document.querySelector=function(t){return e(t,1)[0]||null}}}(),String.prototype.trim||!function(){String.prototype.trim=function(){return this.replace(e,"")}}(),window.JSON||(window.JSON={parse:function(t){return new Function("","return "+t)()},stringify:function(){var t,e=/["]/g;return t=function(i){var n,a,o;switch(n="undefined"==typeof i?"undefined":_typeof(i)){case"string":return'"'+i.replace(e,'\\"')+'"';case"number":case"boolean":return i.toString();case"undefined":return"undefined";case"function":return'""';case"object":if(!i)return"null";if(n="",i.splice){for(a=0,o=i.length;a<o;a++)n+=","+t(i[a]);return"["+n.substr(1)+"]"}for(a in i)i.hasOwnProperty(a)&&void 0!==i[a]&&"function"!=typeof i[a]&&(n+=',"'+a+'":'+t(i[a]));return"{"+n.substr(1)+"}"}}}()}),function(){if(!document.documentMode||document.documentMode>=9)return!1;var t=Array.prototype.splice;Array.prototype.splice=function(){var e=Array.prototype.slice.call(arguments);return"undefined"==typeof e[1]&&(e[1]=this.length-e[0]),t.apply(this,e)}}(),function(){var t=Array.prototype.slice;try{t.call(document.documentElement)}catch(e){Array.prototype.slice=function(e,i){if(i="undefined"!=typeof i?i:this.length,"[object Array]"===Object.prototype.toString.call(this))return t.call(this,e,i);var n,a,o=[],l=this.length,s=e||0;s=s>=0?s:Math.max(0,l+s);var r="number"==typeof i?Math.min(i,l):l;if(i<0&&(r=l+i),a=r-s,a>0)if(o=new Array(a),this.charAt)for(n=0;n<a;n++)o[n]=this.charAt(s+n);else for(n=0;n<a;n++)o[n]=this[s+n];return o}}}(),function(t){for(var e,i,n={},a=function(){},o="memory".split(","),l="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=o.pop();)t[e]=t[e]||n;for(;i=l.pop();)t[i]=t[i]||a}(window.console||{}),!(window.webkitMatchMedia||window.mozMatchMedia||window.oMatchMedia||window.msMatchMedia||window.matchMedia)){var t=document.getElementsByTagName("html")[0];t.className+=" no-matchmedia"}window.matchMedia||(window.matchMedia=function(){var t=window.styleMedia||window.media;if(!t){var e=document.createElement("style"),i=document.getElementsByTagName("script")[0],n=null;e.type="text/css",e.id="matchmediajs-test",i.parentNode.insertBefore(e,i),n="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,t={matchMedium:function(t){var i="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=i:e.textContent=i,"1px"===n.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(){if(window.matchMedia&&window.matchMedia("all").addListener)return!1;var t=window.matchMedia,e=t("only all").matches,i=!1,n=0,a=[],o=function(e){clearTimeout(n),n=setTimeout(function(){for(var e=0,i=a.length;e<i;e++){var n=a[e].mql,o=a[e].listeners||[],l=t(n.media).matches;if(l!==n.matches){n.matches=l;for(var s=0,r=o.length;s<r;s++)o[s].call(window,n)}}},30)};window.matchMedia=function(n){var l=t(n),s=[],r=0;return l.addListener=function(t){e&&(i||(i=!0,window.addEventListener("resize",o,!0)),0===r&&(r=a.push({mql:l,listeners:s})),s.push(t))},l.removeListener=function(t){for(var e=0,i=s.length;e<i;e++)s[e]===t&&s.splice(e,1)},l}}();document.getElementsByTagName("html")[0],document.getElementsByTagName("body")[0]}.call(window),ax5.ui=function(){function t(){this.config={},this.name="root",this.setConfig=function(t,e){return jQuery.extend(!0,this.config,t),"undefined"!=typeof e&&e!==!0||this.init(),this},this.init=function(){console.log(this.config)},this.bindWindowResize=function(t){setTimeout(function(){jQuery(window).resize(function(){this.bindWindowResize__&&clearTimeout(this.bindWindowResize__),this.bindWindowResize__=setTimeout(function(){t.call(this)}.bind(this),10)}.bind(this))}.bind(this),100)},this.stopEvent=function(t){return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,!1},this.toString=function(){return this.name+"@"+this.version},this.main=function(){}.apply(this,arguments)}function e(t,e){if(!t||!t.className)throw"invalid call";var i=t.classStore?t.classStore:ax5.ui;if(!i)throw"invalid classStore";ax5.def[t.className]={version:ax5.info.version};var n=function(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2])}},a=function(t,e,i){return i.name=t,i.version=e,i.instanceId=ax5.getGuid(),i},o=function(e){var i=t.superClass?t.superClass:ax5.ui.root;if(!ax5.util.isFunction(i))throw"invalid superClass";i.call(this),e.prototype=new i},l=function s(){if(!(this&&this instanceof s))throw"invalid call";var i=n(e,arguments);return a(t.className,t.version||"",i)};o.call(this,e),i[t.className]=l}return{root:t,addClass:e}}(),function(t,e){e(t.mustache={})}(window.ax5,function(t){function e(t){return"function"==typeof t}function i(t){return g(t)?"array":"undefined"==typeof t?"undefined":_typeof(t)}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(t,e){return null!=t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&e in t}function o(t,e){return m.call(t,e)}function l(t){return!o(x,t)}function s(t){return String(t).replace(/[&<>"'\/]/g,function(t){return v[t]})}function r(e,i){function a(){if(x&&!v)for(;m.length;)delete f[m.pop()];else m=[];x=!1,v=!1}function o(t){if("string"==typeof t&&(t=t.split(y,2)),!g(t)||2!==t.length)throw new Error("Invalid tags: "+t);s=new RegExp(n(t[0])+"\\s*"),r=new RegExp("\\s*"+n(t[1])),h=new RegExp("\\s*"+n("}"+t[1]))}if(!e)return[];var s,r,h,p=[],f=[],m=[],x=!1,v=!1;o(i||t.tags);for(var k,C,$,S,T,E,z=new u(e);!z.eos();){if(k=z.pos,$=z.scanUntil(s))for(var j=0,P=$.length;j<P;++j)S=$.charAt(j),l(S)?m.push(f.length):v=!0,f.push(["text",S,k,k+1]),k+=1,"\n"===S&&a();if(!z.scan(s))break;if(x=!0,C=z.scan(I)||"name",z.scan(b),"="===C?($=z.scanUntil(w),z.scan(w),z.scanUntil(r)):"{"===C?($=z.scanUntil(h),z.scan(_),z.scanUntil(r),C="&"):$=z.scanUntil(r),!z.scan(r))throw new Error("Unclosed tag at "+z.pos);if(T=[C,$,k,z.pos],f.push(T),"#"===C||"^"===C)p.push(T);else if("/"===C){if(E=p.pop(),!E)throw new Error('Unopened section "'+$+'" at '+k);if(E[1]!==$)throw new Error('Unclosed section "'+E[1]+'" at '+k)}else"name"===C||"{"===C||"&"===C?v=!0:"="===C&&o($)}if(E=p.pop())throw new Error('Unclosed section "'+E[1]+'" at '+z.pos);return c(d(f))}function d(t){for(var e,i,n=[],a=0,o=t.length;a<o;++a)e=t[a],e&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(n.push(e),i=e));return n}function c(t){for(var e,i,n=[],a=n,o=[],l=0,s=t.length;l<s;++l)switch(e=t[l],e[0]){case"#":case"^":a.push(e),o.push(e),a=e[4]=[];break;case"/":i=o.pop(),i[5]=e[2],a=o.length>0?o[o.length-1][4]:n;break;default:a.push(e)}return n}function u(t){this.string=t,this.tail=t,this.pos=0}function h(t,e){this.view=t,this.cache={".":this.view,"@each":function(){var t=[];for(var e in this)t.push({"@key":e,"@value":this[e]});return t}},this.parent=e}function p(){this.cache={}}var f=Object.prototype.toString,g=Array.isArray||function(t){return"[object Array]"===f.call(t)},m=RegExp.prototype.test,x=/\S/,v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},b=/\s*/,y=/\s+/,w=/\s*=/,_=/\s*\}/,I=/#|\^|\/|>|\{|&|=|!/;
u.prototype.eos=function(){return""===this.tail},u.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},u.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},h.prototype.push=function(t){return new h(t,this)},h.prototype.lookup=function(t){var i,n=this.cache;if(n.hasOwnProperty(t))i=n[t];else{for(var o,l,s=this,r=!1;s;){if(t.indexOf(".")>0)for(i=s.view,o=t.split("."),l=0;null!=i&&l<o.length;)l===o.length-1&&(r=a(i,o[l])),i=i[o[l++]];else i=s.view[t],r=a(s.view,t);if(r)break;s=s.parent}n[t]=i}return e(i)&&(i=i.call(this.view)),i},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(t,e){var i=this.cache,n=i[t];return null==n&&(n=i[t]=r(t,e)),n},p.prototype.render=function(t,e,i){var n=this.parse(t),a=e instanceof h?e:new h(e);return this.renderTokens(n,a,i,t)},p.prototype.renderTokens=function(t,e,i,n){for(var a,o,l,s="",r=0,d=t.length;r<d;++r)l=void 0,a=t[r],o=a[0],"#"===o?l=this.renderSection(a,e,i,n):"^"===o?l=this.renderInverted(a,e,i,n):">"===o?l=this.renderPartial(a,e,i,n):"&"===o?l=this.unescapedValue(a,e):"name"===o?l=this.escapedValue(a,e):"text"===o&&(l=this.rawValue(a)),void 0!==l&&(s+=l);return s},p.prototype.renderSection=function(t,i,n,a){function o(t){return l.render(t,i,n)}var l=this,s="",r=i.lookup(t[1]);if(r){if(g(r))for(var d=0,c=r.length;d<c;++d)r[d]&&("object"===_typeof(r[d])&&(r[d]["@i"]=d,r[d]["@first"]=0===d),s+=this.renderTokens(t[4],i.push(r[d]),n,a));else if("object"===("undefined"==typeof r?"undefined":_typeof(r))||"string"==typeof r||"number"==typeof r)s+=this.renderTokens(t[4],i.push(r),n,a);else if(e(r)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");r=r.call(i.view,a.slice(t[3],t[5]),o),null!=r&&(s+=r)}else s+=this.renderTokens(t[4],i,n,a);return s}},p.prototype.renderInverted=function(t,e,i,n){var a=e.lookup(t[1]);if(!a||g(a)&&0===a.length)return this.renderTokens(t[4],e,i,n)},p.prototype.renderPartial=function(t,i,n){if(n){var a=e(n)?n(t[1]):n[t[1]];return null!=a?this.renderTokens(this.parse(a),i,n,a):void 0}},p.prototype.unescapedValue=function(t,e){var i=e.lookup(t[1]);if(null!=i)return i},p.prototype.escapedValue=function(e,i){var n=i.lookup(e[1]);if(null!=n)return t.escape(n)},p.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.1.3",t.tags=["{{","}}"];var k=new p;t.clearCache=function(){return k.clearCache()},t.parse=function(t,e){return k.parse(t,e)},t.render=function(t,e,n){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+i(t)+'" was given as the first argument for mustache#render(template, view, partials)');return k.render(t,e,n)},t.to_html=function(i,n,a,o){var l=t.render(i,n,a);return e(o)?void o(l):l},t.escape=s,t.Scanner=u,t.Context=h,t.Writer=p}),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"dialog"},function(){var n=function(){var n=this,a=void 0;this.instanceId=ax5.getGuid(),this.config={id:"ax5-dialog-"+this.instanceId,clickEventName:"click",theme:"default",width:300,title:"",msg:"",lang:{ok:"ok",cancel:"cancel"},animateTime:150,autoCloseTime:0},this.activeDialog=null,this.autoCloseTimer=null,this.queue=[],a=this.config;var o=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),e=null,!0},l=function(t,n){var o={dialogId:t,title:n.title||a.title||"",msg:(n.msg||a.msg||"").replace(/\n/g,"<br/>"),input:n.input,btns:n.btns,_crlf:function(){return this.replace(/\n/g,"<br/>")},additionalContent:function(t){return e.isFunction(t)?t.call(n):t}(n.additionalContent)};try{return i.tmpl.get.call(this,"dialogDisplay",o)}finally{o=null}},s=function(t,e){var i={},s=void 0;t.id=t.id||a.id,s={width:t.width},jQuery(document.body).append(l.call(this,t.id,t)),this.dialogConfig=t,this.activeDialog=jQuery("#"+t.id),this.activeDialog.css({width:s.width}),"undefined"==typeof e&&(e=t.callback),t.height=s.height=this.activeDialog.height(),"undefined"==typeof t.position||"center"===t.position?(i.top=jQuery(window).height()/2-s.height/2,i.left=jQuery(window).width()/2-s.width/2):(i.left=t.position.left||0,i.top=t.position.top||0),a.zIndex&&(i["z-index"]=a.zIndex),this.activeDialog.css(i),"prompt"===t.dialogType?this.activeDialog.find("[data-dialog-prompt]").get(0).focus():this.activeDialog.find("[data-dialog-btn]").get(0).focus(),this.activeDialog.find("[data-dialog-btn]").on(a.clickEventName,function(i){d.call(this,i||window.event,t,e)}.bind(this)),jQuery(window).bind("keydown.ax5dialog",function(i){c.call(this,i||window.event,t,e)}.bind(this)),jQuery(window).bind("resize.ax5dialog",function(t){r.call(this,t||window.event)}.bind(this)),o.call(this,t,{self:this,state:"open"}),t.autoCloseTime&&(this.autoCloseTimer=setTimeout(function(){n.close()},t.autoCloseTime)),i=null,s=null},r=function(t){if(!this.activeDialog)return this;var e=n.dialogConfig,i={width:e.width,height:e.height};return"undefined"==typeof e.position||"center"===e.position?(i.top=window.innerHeight/2-i.height/2,i.left=window.innerWidth/2-i.width/2):(i.left=e.position.left||0,i.top=e.position.top||0),i.left<0&&(i.left=0),i.top<0&&(i.top=0),this.activeDialog.css(i),e=null,i=null,this},d=function(t,i,n,a,o){var l=void 0,s=null;if(t.srcElement&&(t.target=t.srcElement),a=e.findParentNode(t.target,function(t){if(t.getAttribute("data-dialog-btn"))return!0})){if(o=a.getAttribute("data-dialog-btn"),l={self:this,key:o,value:i.btns[o],dialogId:i.id,btnTarget:a},"prompt"===i.dialogType){l.input={};for(var r in i.input)if(l.input[r]=this.activeDialog.find("[data-dialog-prompt="+r+"]").val(),i.input[r].required&&(""==l.input[r]||null==l.input[r])){s=r;break}}if(i.btns[o].onClick)i.btns[o].onClick.call(l,o);else if("alert"===i.dialogType)n&&n.call(l,o),this.close({doNotCallback:!0});else if("confirm"===i.dialogType)n&&n.call(l,o),this.close({doNotCallback:!0});else if("prompt"===i.dialogType){if("ok"===o&&s)return this.activeDialog.find('[data-dialog-prompt="'+s+'"]').get(0).focus(),!1;n&&n.call(l,o),this.close({doNotCallback:!0})}}l=null,i=null,n=null,a=null,o=null},c=function(t,e,i,n,a){var o=void 0,l=null;if(t.keyCode==ax5.info.eventKeys.ESC&&this.close(),"prompt"===e.dialogType&&t.keyCode==ax5.info.eventKeys.RETURN){o={self:this,key:a,value:e.btns[a],dialogId:e.id,btnTarget:n},o.input={};for(var s in e.input)if(o.input[s]=this.activeDialog.find("[data-dialog-prompt="+s+"]").val(),e.input[s].required&&(""==o.input[s]||null==o.input[s])){l=s;break}if(l)return o=null,l=null,!1;i&&i.call(o,a),this.close({doNotCallback:!0})}o=null,l=null,e=null,i=null,n=null,a=null};this.init=function(){this.onStateChanged=a.onStateChanged},this.alert=function(t,i,n){return e.isString(t)&&(t={title:a.title,msg:t}),t=jQuery.extend(!0,{},a,t),t.dialogType="alert",t.theme=t.theme||a.theme||"",t.callback=i,"undefined"==typeof t.btns&&(t.btns={ok:{label:a.lang.ok,theme:t.theme}}),this.activeDialog?this.queue.push(t):s.call(this,t,i),this},this.confirm=function(t,i,n){return e.isString(t)&&(t={title:a.title,msg:t}),t=jQuery.extend(!0,{},a,t),t.dialogType="confirm",t.theme=t.theme||a.theme||"",t.callback=i,"undefined"==typeof t.btns&&(t.btns={ok:{label:a.lang.ok,theme:t.theme},cancel:{label:a.lang.cancel}}),this.activeDialog?this.queue.push(t):s.call(this,t,i),this},this.prompt=function(t,i,n){return e.isString(t)&&(t={title:a.title,msg:t}),t=jQuery.extend(!0,{},a,t),t.dialogType="prompt",t.theme=t.theme||a.theme||"",t.callback=i,"undefined"==typeof t.input&&(t.input={value:{label:""}}),"undefined"==typeof t.btns&&(t.btns={ok:{label:a.lang.ok,theme:t.theme},cancel:{label:a.lang.cancel}}),this.activeDialog?this.queue.push(t):s.call(this,t,i),this},this.close=function(t){var e=void 0,i=void 0;return this.activeDialog&&(this.autoCloseTimer&&clearTimeout(this.autoCloseTimer),e=n.dialogConfig,this.activeDialog.addClass("destroy"),jQuery(window).unbind("keydown.ax5dialog"),jQuery(window).unbind("resize.ax5dialog"),setTimeout(function(){this.activeDialog&&(this.activeDialog.remove(),this.activeDialog=null),i={self:this,state:"close",dialogId:e.id},!e.callback||t&&t.doNotCallback||e.callback.call(i),e&&e.onStateChanged?e.onStateChanged.call(i,i):this.onStateChanged&&this.onStateChanged.call(i,i),this.queue&&this.queue.length&&s.call(this,this.queue.shift()),e=null,i=null}.bind(this),a.animateTime)),this},this.main=function(){t.dialog_instance=t.dialog_instance||[],t.dialog_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),i=ax5.ui.dialog}(),function(){var t=ax5.ui.dialog,e=function(t){return' \n        <div id="{{dialogId}}" data-dialog-els="root" class="ax5-ui-dialog {{theme}}">\n            <div class="ax-dialog-header" data-dialog-els="header">\n                {{{title}}}\n            </div>\n            <div class="ax-dialog-body" data-dialog-els="body">\n                <div class="ax-dialog-msg">{{{msg}}}</div>\n                \n                {{#input}}\n                <div class="ax-dialog-prompt">\n                    {{#@each}}\n                    <div class="form-group">\n                    {{#@value.label}}\n                    <label>{{#_crlf}}{{{.}}}{{/_crlf}}</label>\n                    {{/@value.label}}\n                    <input type="{{@value.type}}" placeholder="{{@value.placeholder}}" class="form-control {{@value.theme}}" data-dialog-prompt="{{@key}}" style="width:100%;" value="{{@value.value}}" />\n                    {{#@value.help}}\n                    <p class="help-block">{{#_crlf}}{{.}}{{/_crlf}}</p>\n                    {{/@value.help}}\n                    </div>\n                    {{/@each}}\n                </div>\n                {{/input}}\n                \n                <div class="ax-dialog-buttons" data-dialog-els="buttons">\n                    <div class="ax-button-wrap">\n                    {{#btns}}\n                        {{#@each}}\n                        <button type="button" data-dialog-btn="{{@key}}" class="btn btn-{{@value.theme}}">{{@value.label}}</button>\n                        {{/@each}}\n                    {{/btns}}\n                    </div>\n                </div>\n                \n                {{#additionalContent}}\n                <div data-dialog-els="additional-content">{{{.}}}</div>\n                {{/additionalContent}}\n            </div>\n        </div>  \n        '};t.tmpl={dialogDisplay:e,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"mask"},function(){return function(){var n=this,a=void 0;this.instanceId=ax5.getGuid(),this.config={theme:"",target:jQuery(document.body).get(0),animateTime:250},this.maskContent="",this.status="off",a=this.config;var o=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),t=null,e=null,!0},l=function(t){return"undefined"==typeof t.templateName&&(t.templateName="defaultMask"),i.tmpl.get.call(this,t.templateName,t)},s=function(t){this.maskContent=t};this.init=function(){this.onStateChanged=a.onStateChanged,this.onClick=a.onClick,this.config.content&&s.call(this,this.config.content)},this.open=function(t){"on"===this.status&&this.close(),t&&t.content&&s.call(this,t.content),t&&"undefined"==typeof t.templateName&&(t.templateName="defaultMask"),n.maskConfig=jQuery.extend(!0,{},this.config,t);var e=n.maskConfig,i=e.target,a=jQuery(i),r="ax-mask-"+ax5.getGuid(),d=void 0,c={},u={},h=e.templateName,p=l({theme:e.theme,maskId:r,body:this.maskContent,templateName:h});return jQuery(document.body).append(p),i&&i!==jQuery(document.body).get(0)&&(c={position:e.position||"absolute",left:a.offset().left,top:a.offset().top,width:a.outerWidth(),height:a.outerHeight()},a.addClass("ax-masking"),jQuery(window).on("resize.ax5mask-"+this.instanceId,function(t){this.align()}.bind(this))),"undefined"!=typeof n.maskConfig.zIndex&&(c["z-index"]=n.maskConfig.zIndex),this.$mask=d=jQuery("#"+r),this.$target=a,this.status="on",d.css(c),e.onClick&&d.on("click",function(t){u={self:n,state:"open",type:"click"},n.maskConfig.onClick.call(u,u)}),o.call(this,null,{self:this,state:"open"}),t=null,e=null,i=null,a=null,r=null,d=null,c=null,u=null,h=null,p=null,this},this.close=function(t){if(this.$mask){var e=function(){this.status="off",this.$mask.remove(),this.$target.removeClass("ax-masking"),o.call(this,null,{self:this,state:"close"}),jQuery(window).off("resize.ax5mask-"+this.instanceId)};t?setTimeout(function(){e.call(this)}.bind(this),t):e.call(this)}return this},this.fadeOut=function(){if(this.$mask){var t=function(){this.status="off",this.$mask.remove(),this.$target.removeClass("ax-masking"),o.call(this,null,{self:this,state:"close"}),jQuery(window).off("resize.ax5mask-"+this.instanceId)};this.$mask.addClass("fade-out"),setTimeout(function(){t.call(this)}.bind(this),a.animateTime)}return this},this.align=function(){if(this.maskConfig&&this.maskConfig.target&&this.maskConfig.target!==jQuery(document.body).get(0))try{var t={position:this.maskConfig.position||"absolute",left:this.$target.offset().left,top:this.$target.offset().top,width:this.$target.outerWidth(),height:this.$target.outerHeight()};this.$mask.css(t)}catch(e){}return this},this.pullRequest=function(){console.log("test pullRequest01"),console.log("test pullRequest02")},this.main=function(){t.mask_instance=t.mask_instance||[],t.mask_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),i=ax5.ui.mask}(),function(){var t=ax5.ui.mask,e=function(t){return'\n            <div class="ax-mask {{theme}}" id="{{maskId}}">\n                <div class="ax-mask-bg"></div>\n                <div class="ax-mask-content">\n                    <div class="ax-mask-body">\n                    {{{body}}}\n                    </div>\n                </div>\n            </div>\n        '};t.tmpl={defaultMask:e,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"toast"},function(){var n=function(){var n,a=this,o=0,l=null;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",width:300,icon:"",closeIcon:"",msg:"",lang:{ok:"ok",cancel:"cancel"},displayTime:3e3,animateTime:250,containerPosition:"bottom-left"},this.toastContainer=null,this.queue=[],n=this.config;var s=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),t=null,e=null,!0},r=function(e,i){var n={toastId:e,theme:i.theme,icon:i.icon,msg:(i.msg||"").replace(/\n/g,"<br/>"),btns:i.btns,closeIcon:i.closeIcon};try{return t.tmpl.get.call(this,"toastDisplay",n)}finally{e=null,n=null}},d=function(t,e){l&&clearTimeout(l);var d,u={width:t.width};return t.id="ax5-toast-"+a.containerId+"-"+ ++o,jQuery("#"+t.id).get(0)?this:("bottom"==i.left(n.containerPosition,"-")?this.toastContainer.append(r(t.id,t)):this.toastContainer.prepend(r(t.id,t)),d=jQuery("#"+t.id),d.css({width:u.width}),t.toastBox=d,this.queue.push(t),s.call(this,t,{self:this,state:"open",toastId:t.id}),"push"===t.toastType?(setTimeout(function(){this.close(t,e)}.bind(this),n.displayTime),d.find("[data-ax-toast-btn]").on(n.clickEventName,function(i){c.call(this,i||window.event,t,d,e)}.bind(this))):"confirm"===t.toastType&&d.find("[data-ax-toast-btn]").on(n.clickEventName,function(i){c.call(this,i||window.event,t,d,e)}.bind(this)),void(u=null))},c=function(t,e,n,a,o,l){if(o=i.findParentNode(t.target,function(t){if(t.getAttribute("data-ax-toast-btn"))return!0})){l=o.getAttribute("data-ax-toast-btn");var s={key:l,value:e.btns?e.btns[l]:l,toastId:e.id,btn_target:o};e.btns&&e.btns[l].onClick?e.btns[l].onClick.call(s,l):"push"===e.toastType?(a&&a.call(s,l),this.close(e,a)):"confirm"===e.toastType&&(a&&a.call(s,l),this.close(e,a))}t=null,e=null,n=null,a=null,o=null,l=null};this.init=function(){this.onStateChanged=n.onStateChanged,a.containerId=ax5.getGuid();var t=[];n.zIndex&&t.push("z-index:"+n.zIndex),jQuery(document.body).append('<div class="ax5-ui-toast-container '+n.containerPosition+'" data-toast-container="'+a.containerId+'" style="'+t.join(";")+'"></div>'),this.toastContainer=jQuery('[data-toast-container="'+a.containerId+'"]')},this.push=function(t,e){return a.containerId||this.init(),i.isString(t)&&(t={title:n.title,msg:t}),t.toastType="push",a.dialogConfig={},jQuery.extend(!0,a.dialogConfig,n,t),t=a.dialogConfig,d.call(this,t,e),t=null,e=null,this},this.confirm=function(t,e){return a.containerId||this.init(),i.isString(t)&&(t={title:n.title,msg:t}),t.toastType="confirm",a.dialogConfig={},jQuery.extend(!0,a.dialogConfig,n,t),t=a.dialogConfig,"undefined"==typeof t.btns&&(t.btns={ok:{label:n.lang.ok,theme:t.theme}}),d.call(this,t,e),t=null,e=null,this},this.close=function(t,e){"undefined"==typeof t&&(t=i.last(this.queue));var a=t.toastBox;return a.addClass("push"==t.toastType?"removed":"destroy"),this.queue=i.filter(this.queue,function(){return t.id!=this.id}),setTimeout(function(){var i={toastId:t.id};a.remove(),e&&e.call(i),i={self:this,state:"close",toastId:t.id},s.call(this,t,i),0===this.queue.length&&(l&&clearTimeout(l),l=setTimeout(function(){0===this.queue.length&&(o=0)}.bind(this),3e3)),i=null,t=null,e=null,a=null}.bind(this),n.animateTime),this},this.main=function(){e.toast_instance=e.toast_instance||[],e.toast_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),t=ax5.ui.toast}(),function(){var t=ax5.ui.toast,e=function(t){return'\n        <div id="{{toastId}}" data-ax5-ui="toast" class="ax5-ui-toast {{theme}}">\n            {{#icon}}\n            <div class="ax-toast-icon">{{{.}}}</div>\n            {{/icon}}\n            <div class="ax-toast-body">{{{msg}}}</div>\n            {{#btns}}\n            <div class="ax-toast-buttons">\n                <div class="ax-button-wrap">\n                    {{#@each}}\n                    <button type="button" data-ax-toast-btn="{{@key}}" class="btn btn-{{@value.theme}}">{{{@value.label}}}</button>\n                    {{/@each}}\n                </div>\n            </div>\n            {{/btns}}\n            {{^btns}}\n                <a class="ax-toast-close" data-ax-toast-btn="ok">{{{closeIcon}}}</a>\n            {{/btns}}\n            <div style="clear:both;"></div>\n        </div>'};t.tmpl={toastDisplay:e,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"modal"},function(){return function(){var n=this,a=void 0,o={mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"},l=function(t){var e=t;return"changedTouches"in t&&t.changedTouches&&(e=t.changedTouches[0]),{clientX:e.clientX,clientY:e.clientY}};this.instanceId=ax5.getGuid(),this.config={id:"ax5-modal-"+this.instanceId,position:{left:"center",top:"middle",margin:10},minimizePosition:"bottom-right",clickEventName:"ontouchstart"in document.documentElement?"touchstart":"click",theme:"default",width:300,height:400,closeToEsc:!0,disableDrag:!1,disableResize:!1,animateTime:250,iframe:!1},this.activeModal=null,this.watingModal=!1,this.$={},a=this.config;var s=function(t,e){var i={resize:function(e){t&&t.onResize?t.onResize.call(e,e):this.onResize&&this.onResize.call(e,e)},move:function(){}};return e.state in i&&i[e.state].call(this,e),t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),!0},r=function(t,e){var n={modalId:t,theme:e.theme,header:e.header,fullScreen:e.fullScreen?"fullscreen":"",styles:"",iframe:e.iframe,iframeLoadingMsg:e.iframeLoadingMsg,disableResize:e.disableResize};return e.zIndex&&(n.styles+="z-index:"+e.zIndex+";"),e.absolute&&(n.styles+="position:absolute;"),n.iframe&&"string"==typeof n.iframe.param&&(n.iframe.param=ax5.util.param(n.iframe.param)),i.tmpl.get.call(this,"content",n,{})},d=function(t,i){var a=void 0;jQuery(document.body).append(r.call(this,t.id,t)),this.activeModal=jQuery("#"+t.id),this.$={root:this.activeModal,header:this.activeModal.find('[data-modal-els="header"]'),body:this.activeModal.find('[data-modal-els="body"]')},t.iframe?(this.$["iframe-wrap"]=this.activeModal.find('[data-modal-els="iframe-wrap"]'),this.$.iframe=this.activeModal.find('[data-modal-els="iframe"]'),this.$["iframe-form"]=this.activeModal.find('[data-modal-els="iframe-form"]'),this.$["iframe-loading"]=this.activeModal.find('[data-modal-els="iframe-loading"]')):this.$["body-frame"]=this.activeModal.find('[data-modal-els="body-frame"]'),this.align(),a={self:this,id:t.id,theme:t.theme,width:t.width,height:t.height,state:"open",$:this.$},t.iframe&&(this.$["iframe-wrap"].css({height:t.height}),this.$.iframe.css({height:t.height}),this.$["iframe-form"].attr({method:t.iframe.method}),this.$["iframe-form"].attr({target:t.id+"-frame"}),this.$["iframe-form"].attr({action:t.iframe.url}),this.$.iframe.on("load",function(){a.state="load",t.iframeLoadingMsg&&this.$["iframe-loading"].hide(),s.call(this,t,a)}.bind(this)),t.iframeLoadingMsg||this.$.iframe.show(),this.$["iframe-form"].submit()),i&&i.call(a,a),this.watingModal||s.call(this,t,a),t.closeToEsc&&jQuery(window).bind("keydown.ax-modal",function(t){u.call(this,t||window.event)}.bind(this)),jQuery(window).bind("resize.ax-modal",function(t){this.align(null,t||window.event)}.bind(this)),this.$.header.off(o.mousedown).off("dragstart").on(o.mousedown,function(i){var a=e.findParentNode(i.target,function(t){if(t.getAttribute("data-modal-header-btn"))return!0});t.isFullScreen||a||1==t.disableDrag||(n.mousePosition=l(i),p.on.call(n)),a&&c.call(n,i||window.event,t)}).on("dragstart",function(t){return e.stopEvent(t.originalEvent),!1}),this.activeModal.off(o.mousedown).off("dragstart").on(o.mousedown,"[data-ax5modal-resizer]",function(e){return!t.disableDrag&&!t.isFullScreen&&(n.mousePosition=l(e),void f.on.call(n,this.getAttribute("data-ax5modal-resizer")))}).on("dragstart",function(t){return e.stopEvent(t.originalEvent),!1})},c=function(t,i,n,a,o){var l=void 0;t.srcElement&&(t.target=t.srcElement),a=e.findParentNode(t.target,function(t){if(t.getAttribute("data-modal-header-btn"))return!0}),a&&(o=a.getAttribute("data-modal-header-btn"),l={self:this,key:o,value:i.header.btns[o],dialogId:i.id,btnTarget:a},i.header.btns[o].onClick&&i.header.btns[o].onClick.call(l,o)),l=null,i=null,n=null,a=null,o=null},u=function(t){t.keyCode==ax5.info.eventKeys.ESC&&this.close()},h={"top-left":function(){this.align({left:"left",top:"top"})},"top-right":function(){this.align({left:"right",top:"top"})},"bottom-left":function(){this.align({left:"left",top:"bottom"})},"bottom-right":function(){this.align({left:"right",top:"bottom"})},"center-middle":function(){this.align({left:"center",top:"middle"})}},p={on:function(){var t=this.activeModal.css("z-index"),e=this.activeModal.offset(),i={width:this.activeModal.outerWidth(),height:this.activeModal.outerHeight()},a={width:jQuery(window).width(),height:jQuery(window).height(),scrollLeft:jQuery(document).scrollLeft(),scrollTop:jQuery(document).scrollTop()},l=function(t){return n.__dx=t.clientX-n.mousePosition.clientX,n.__dy=t.clientY-n.mousePosition.clientY,{left:e.left+n.__dx,top:e.top+n.__dy}};a.width-i.width,a.height-i.height;n.__dx=0,n.__dy=0,n.resizerBg=jQuery('<div class="ax5modal-resizer-background" ondragstart="return false;"></div>'),n.resizer=jQuery('<div class="ax5modal-resizer" ondragstart="return false;"></div>'),n.resizerBg.css({zIndex:t}),n.resizer.css({left:e.left,top:e.top,width:i.width,height:i.height,zIndex:t+1}),jQuery(document.body).append(n.resizerBg).append(n.resizer),n.activeModal.addClass("draged"),jQuery(document.body).on(o.mousemove+".ax5modal-move-"+this.instanceId,function(t){n.resizer.css(l(t))}).on(o.mouseup+".ax5modal-move-"+this.instanceId,function(t){p.off.call(n)}).on("mouseleave.ax5modal-move-"+this.instanceId,function(t){p.off.call(n)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){var t=function(){var t=this.resizer.offset();this.modalConfig.absolute||(t.left-=jQuery(document).scrollLeft(),t.top-=jQuery(document).scrollTop()),this.activeModal.css(t),this.modalConfig.left=t.left,this.modalConfig.top=t.top,t=null};this.activeModal.removeClass("draged"),t.call(this),this.resizer.remove(),this.resizer=null,this.resizerBg.remove(),this.resizerBg=null,jQuery(document.body).off(o.mousemove+".ax5modal-move-"+this.instanceId).off(o.mouseup+".ax5modal-move-"+this.instanceId).off("mouseleave.ax5modal-move-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart"),s.call(this,n.modalConfig,{self:this,state:"move"})}},f={on:function(t){var e=this.activeModal.css("z-index"),i=this.activeModal.offset(),a={width:this.activeModal.outerWidth(),height:this.activeModal.outerHeight()},l=({width:jQuery(window).width(),height:jQuery(window).height(),scrollLeft:jQuery(document).scrollLeft(),scrollTop:jQuery(document).scrollTop()},{top:function(t){return d>a.height-n.__dy&&(n.__dy=a.height-d),t.shiftKey?(d>a.height-2*n.__dy&&(n.__dy=(a.height-d)/2),{left:i.left,top:i.top+n.__dy,width:a.width,height:a.height-2*n.__dy}):t.altKey?(d>a.height-2*n.__dy&&(n.__dy=(a.height-d)/2),{left:i.left+n.__dy,top:i.top+n.__dy,width:a.width-2*n.__dy,height:a.height-2*n.__dy}):{left:i.left,top:i.top+n.__dy,width:a.width,height:a.height-n.__dy}},bottom:function(t){return d>a.height+n.__dy&&(n.__dy=-a.height+d),t.shiftKey?(d>a.height+2*n.__dy&&(n.__dy=(-a.height+d)/2),{left:i.left,top:i.top-n.__dy,width:a.width,height:a.height+2*n.__dy}):t.altKey?(d>a.height+2*n.__dy&&(n.__dy=(-a.height+d)/2),{left:i.left-n.__dy,top:i.top-n.__dy,width:a.width+2*n.__dy,height:a.height+2*n.__dy}):{left:i.left,top:i.top,width:a.width,height:a.height+n.__dy}},left:function(t){return r>a.width-n.__dx&&(n.__dx=a.width-r),t.shiftKey?(r>a.width-2*n.__dx&&(n.__dx=(a.width-r)/2),{left:i.left+n.__dx,top:i.top,width:a.width-2*n.__dx,height:a.height}):t.altKey?(r>a.width-2*n.__dx&&(n.__dx=(a.width-r)/2),{left:i.left+n.__dx,top:i.top+n.__dx,width:a.width-2*n.__dx,height:a.height-2*n.__dx}):{left:i.left+n.__dx,top:i.top,width:a.width-n.__dx,height:a.height}},right:function(t){return r>a.width+n.__dx&&(n.__dx=-a.width+r),t.shiftKey?(r>a.width+2*n.__dx&&(n.__dx=(-a.width+r)/2),{left:i.left-n.__dx,top:i.top,width:a.width+2*n.__dx,height:a.height}):t.altKey?(r>a.width+2*n.__dx&&(n.__dx=(-a.width+r)/2),{left:i.left-n.__dx,top:i.top-n.__dx,width:a.width+2*n.__dx,height:a.height+2*n.__dx}):{left:i.left,top:i.top,width:a.width+n.__dx,height:a.height}},"top-left":function(t){return r>a.width-n.__dx&&(n.__dx=a.width-r),d>a.height-n.__dy&&(n.__dy=a.height-d),t.shiftKey||t.altKey?(d>a.height-2*n.__dy&&(n.__dy=(a.height-d)/2),r>a.width-2*n.__dx&&(n.__dx=(a.width-r)/2),{left:i.left+n.__dx,top:i.top+n.__dy,width:a.width-2*n.__dx,height:a.height-2*n.__dy}):(d>a.height-2*n.__dy&&(n.__dy=(a.height-d)/2),r>a.width-2*n.__dx&&(n.__dx=(a.width-r)/2),{left:i.left+n.__dx,top:i.top+n.__dy,width:a.width-n.__dx,height:a.height-n.__dy})},"top-right":function(t){return r>a.width+n.__dx&&(n.__dx=-a.width+r),d>a.height-n.__dy&&(n.__dy=a.height-d),t.shiftKey||t.altKey?(d>a.height-2*n.__dy&&(n.__dy=(a.height-d)/2),r>a.width+2*n.__dx&&(n.__dx=(-a.width+r)/2),{left:i.left-n.__dx,top:i.top+n.__dy,width:a.width+2*n.__dx,height:a.height-2*n.__dy}):{left:i.left,top:i.top+n.__dy,width:a.width+n.__dx,height:a.height-n.__dy}},"bottom-left":function(t){return r>a.width-n.__dx&&(n.__dx=a.width-r),d>a.height+n.__dy&&(n.__dy=-a.height+d),t.shiftKey||t.altKey?(r>a.width-2*n.__dx&&(n.__dx=(a.width-r)/2),d>a.height+2*n.__dy&&(n.__dy=(-a.height+d)/2),{left:i.left+n.__dx,top:i.top-n.__dy,width:a.width-2*n.__dx,height:a.height+2*n.__dy}):{left:i.left+n.__dx,top:i.top,width:a.width-n.__dx,height:a.height+n.__dy}},"bottom-right":function(t){return r>a.width+n.__dx&&(n.__dx=-a.width+r),d>a.height+n.__dy&&(n.__dy=-a.height+d),t.shiftKey||t.altKey?(r>a.width+2*n.__dx&&(n.__dx=(-a.width+r)/2),d>a.height+2*n.__dy&&(n.__dy=(-a.height+d)/2),{left:i.left-n.__dx,top:i.top-n.__dy,width:a.width+2*n.__dx,height:a.height+2*n.__dy}):{left:i.left,top:i.top,width:a.width+n.__dx,height:a.height+n.__dy}}}),s=function(e){return n.__dx=e.clientX-n.mousePosition.clientX,n.__dy=e.clientY-n.mousePosition.clientY,l[t](e)},r=100,d=100,c={top:"row-resize",bottom:"row-resize",left:"col-resize",right:"col-resize","top-left":"nwse-resize","top-right":"nesw-resize","bottom-left":"nesw-resize","bottom-right":"nwse-resize"};n.__dx=0,n.__dy=0,n.resizerBg=jQuery('<div class="ax5modal-resizer-background" ondragstart="return false;"></div>'),n.resizer=jQuery('<div class="ax5modal-resizer" ondragstart="return false;"></div>'),n.resizerBg.css({zIndex:e,cursor:c[t]}),n.resizer.css({left:i.left,top:i.top,width:a.width,height:a.height,zIndex:e+1,cursor:c[t]}),jQuery(document.body).append(n.resizerBg).append(n.resizer),n.activeModal.addClass("draged"),jQuery(document.body).bind(o.mousemove+".ax5modal-resize-"+this.instanceId,function(t){n.resizer.css(s(t))}).bind(o.mouseup+".ax5modal-resize-"+this.instanceId,function(t){f.off.call(n)}).bind("mouseleave.ax5modal-resize-"+this.instanceId,function(t){f.off.call(n)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").bind("selectstart",!1)},off:function(){var t=function(){var t=this.resizer.offset();jQuery.extend(t,{width:this.resizer.width(),height:this.resizer.height()}),this.modalConfig.absolute||(t.left-=jQuery(document).scrollLeft(),t.top-=jQuery(document).scrollTop()),this.activeModal.css(t),this.modalConfig.left=t.left,this.modalConfig.top=t.top,this.modalConfig.width=t.width,this.modalConfig.height=t.height,this.$.body.css({height:t.height-this.modalConfig.headerHeight}),this.modalConfig.iframe&&(this.$["iframe-wrap"].css({height:t.height-this.modalConfig.headerHeight}),this.$.iframe.css({height:t.height-this.modalConfig.headerHeight})),t=null};this.activeModal.removeClass("draged"),t.call(this),this.resizer.remove(),this.resizer=null,this.resizerBg.remove(),this.resizerBg=null,s.call(this,n.modalConfig,{self:this,state:"resize"}),jQuery(document.body).unbind(o.mousemove+".ax5modal-resize-"+this.instanceId).unbind(o.mouseup+".ax5modal-resize-"+this.instanceId).unbind("mouseleave.ax5modal-resize-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").unbind("selectstart")}};this.init=function(){this.onStateChanged=a.onStateChanged,this.onResize=a.onResize},this.open=function(t,e,i){return"undefined"==typeof i&&(i=0),this.activeModal?i<3?(this.watingModal=!0,setTimeout(function(){this.open(t,e,i+1)}.bind(this),a.animateTime)):this.watingModal=!1:(t=n.modalConfig=jQuery.extend(!0,{},a,t),d.call(this,t,e),this.watingModal=!1),this},this.close=function(t){var i=void 0,o=void 0;return this.activeModal&&(i=n.modalConfig,this.activeModal.addClass("destroy"),jQuery(window).unbind("keydown.ax-modal"),jQuery(window).unbind("resize.ax-modal"),setTimeout(function(){if(i.iframe){var n=this.$.iframe;if(n){var a=n.get(0),l=a.contentDocument?a.contentDocument:a.contentWindow.document;try{$(l.body).children().each(function(){$(this).remove()})}catch(r){}l.innerHTML="",n.attr("src","about:blank").remove(),window.CollectGarbage&&window.CollectGarbage()}}this.activeModal.remove(),this.activeModal=null,this.watingModal||s.call(this,i,{self:this,state:"close"}),t&&e.isFunction(t.callback)&&(o={self:this,id:i.id,theme:i.theme,width:i.width,height:i.height,state:"close",$:this.$},t.callback.call(o,o))}.bind(this),a.animateTime)),this.minimized=!1,this},this.minimize=function(){return function(t){
if(this.minimized!==!0){var e=n.modalConfig;"undefined"==typeof t&&(t=a.minimizePosition),this.minimized=!0,this.$.body.hide(),n.modalConfig.originalHeight=e.height,n.modalConfig.height=0,h[t].call(this),s.call(this,e,{self:this,state:"minimize"})}return this}}(),this.restore=function(){var t=n.modalConfig;return this.minimized&&(this.minimized=!1,this.$.body.show(),n.modalConfig.height=n.modalConfig.originalHeight,n.modalConfig.originalHeight=void 0,this.align({left:"center",top:"middle"}),s.call(this,t,{self:this,state:"restore"})),this},this.css=function(t){return this.activeModal&&!n.fullScreen&&(this.activeModal.css(t),"undefined"!=typeof t.width&&(n.modalConfig.width=t.width),"undefined"!=typeof t.height&&(n.modalConfig.height=t.height),this.align()),this},this.setModalConfig=function(t){return n.modalConfig=jQuery.extend({},n.modalConfig,t),this.align(),this},this.align=function(){return function(t,i){if(!this.activeModal)return this;var a=n.modalConfig,o={width:a.width,height:a.height},l=a.isFullScreen=function(t){return"undefined"!=typeof t&&(e.isFunction(t)?t():void 0)}(a.fullScreen);return l?(a.header&&this.$.header.show(),a.header?(a.headerHeight=this.$.header.outerHeight(),o.height+=a.headerHeight):a.headerHeight=0,o.width=jQuery(window).width(),o.height=a.height,o.left=0,o.top=0):(a.header&&this.$.header.show(),t&&jQuery.extend(!0,a.position,t),a.header?(a.headerHeight=this.$.header.outerHeight(),o.height+=a.headerHeight):a.headerHeight=0,"left"==a.position.left?o.left=a.position.margin||0:"right"==a.position.left?o.left=jQuery(window).width()-o.width-(a.position.margin||0):"center"==a.position.left?o.left=jQuery(window).width()/2-o.width/2:o.left=a.position.left||0,"top"==a.position.top?o.top=a.position.margin||0:"bottom"==a.position.top?o.top=jQuery(window).height()-o.height-(a.position.margin||0):"middle"==a.position.top?o.top=jQuery(window).height()/2-o.height/2:o.top=a.position.top||0,o.left<0&&(o.left=0),o.top<0&&(o.top=0),a.absolute&&(o.top+=jQuery(window).scrollTop(),o.left+=jQuery(window).scrollLeft())),this.activeModal.css(o),this.$.body.css({height:o.height-(a.headerHeight||0)}),a.iframe&&(this.$["iframe-wrap"].css({height:o.height-a.headerHeight}),this.$.iframe.css({height:o.height-a.headerHeight})),this}}(),this.main=function(){t.modal_instance=t.modal_instance||[],t.modal_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),i=ax5.ui.modal}(),function(){var t=ax5.ui.modal,e=function(){return' \n        <div id="{{modalId}}" data-modal-els="root" class="ax5modal {{theme}} {{fullscreen}}" style="{{styles}}">\n            {{#header}}\n            <div class="ax-modal-header" data-modal-els="header">\n                {{{title}}}\n                {{#btns}}\n                    <div class="ax-modal-header-addon">\n                    {{#@each}}\n                    <button tabindex="-1" data-modal-header-btn="{{@key}}" class="{{@value.theme}}">{{{@value.label}}}</button>\n                    {{/@each}}\n                    </div>\n                {{/btns}}\n            </div>\n            {{/header}}\n            <div class="ax-modal-body" data-modal-els="body">\n            {{#iframe}}\n                <div data-modal-els="iframe-wrap" style="-webkit-overflow-scrolling: touch; overflow: auto;position: relative;">\n                    <table data-modal-els="iframe-loading" style="width:100%;height:100%;"><tr><td style="text-align: center;vertical-align: middle">{{{iframeLoadingMsg}}}</td></tr></table>\n                    <iframe name="{{modalId}}-frame" src="" width="100%" height="100%" frameborder="0" data-modal-els="iframe" style="position: absolute;left:0;top:0;"></iframe>\n                </div>\n                <form name="{{modalId}}-form" data-modal-els="iframe-form">\n                <input type="hidden" name="modalId" value="{{modalId}}" />\n                {{#param}}\n                {{#@each}}\n                <input type="hidden" name="{{@key}}" value="{{@value}}" />\n                {{/@each}}\n                {{/param}}\n                </form>\n            {{/iframe}}\n            {{^iframe}}\n                <div data-modal-els="body-frame" style="position: absolute;left:0;top:0;width:100%;height:100%;"></div>\n            {{/iframe}}\n            </div>\n            {{^disableResize}}\n            <div data-ax5modal-resizer="top"></div>\n            <div data-ax5modal-resizer="right"></div>\n            <div data-ax5modal-resizer="bottom"></div>\n            <div data-ax5modal-resizer="left"></div>\n            <div data-ax5modal-resizer="top-left"></div>\n            <div data-ax5modal-resizer="top-right"></div>\n            <div data-ax5modal-resizer="bottom-left"></div>\n            <div data-ax5modal-resizer="bottom-right"></div>\n            {{/disableResize}}\n        </div>\n        '};t.tmpl={content:e,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"calendar"},function(){return function(){var n=this,a=void 0,o=1;this.instanceId=ax5.getGuid(),this.target=null,this.selection=[],this.selectionMap={},this.selectableMap={},this.markerMap={},this.printedDay={start:"",end:""},this.config={clickEventName:"click",theme:"default",startOfWeek:0,mode:"day",dateFormat:"yyyy-MM-dd",displayDate:new Date,animateTime:100,dimensions:{controlHeight:"40",controlButtonWidth:"40",colHeadHeight:"30",itemPadding:2},lang:{yearHeading:"Choose the year",monthHeading:"Choose the month",yearTmpl:"%s",months:ax5.info.months||["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],dayTmpl:"%s"},multipleSelect:!1,selectMode:"day",defaultMarkerTheme:"holiday",defaultPeriodTheme:"period"},a=this.config;var l=function(t,e){t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),e=null},s=function(){var t=jQuery.extend(!0,{},a,{controlCSS:{},controlButtonCSS:{}});t.controlButtonCSS.height=t.controlCSS.height=e.cssNumber(a.dimensions.controlHeight),t.controlButtonCSS["line-height"]=t.controlCSS["line-height"]=e.cssNumber(a.dimensions.controlHeight),t.controlButtonCSS.width=e.cssNumber(a.dimensions.controlHeight),t.controlCSS=e.css(t.controlCSS),t.controlButtonCSS=e.css(t.controlButtonCSS);try{return i.tmpl.get.call(this,"frameTmpl",t)}finally{t=null}},r=function(){var t,i,n=e.date(a.displayDate),o="",l="";return a.control&&("day"==a.mode||"d"==a.mode?(o=a.control.yearTmpl?a.control.yearTmpl.replace("%s",n.getFullYear()):n.getFullYear(),l=a.control.monthTmpl?a.control.monthTmpl.replace("%s",a.lang.months[n.getMonth()]):a.lang.months[n.getMonth()],this.$["control-display"].html(function(){return a.control.yearFirst?'<span data-calendar-display="year">'+o+'</span><span data-calendar-display="month">'+l+"</span>":'<span data-calendar-display="month">'+l+'</span><span data-calendar-display="year">'+o+"</span>"}())):"month"==a.mode||"m"==a.mode?(o=a.control.yearTmpl?a.control.yearTmpl.replace("%s",n.getFullYear()):n.getFullYear(),this.$["control-display"].html('<span data-calendar-display="year">'+o+"</span>")):"year"!=a.mode&&"y"!=a.mode||(t=a.control.yearTmpl?a.control.yearTmpl.replace("%s",n.getFullYear()-10):n.getFullYear()-10,i=a.control.yearTmpl?a.control.yearTmpl.replace("%s",Number(n.getFullYear())+9):Number(n.getFullYear())+9,this.$["control-display"].html(t+" ~ "+i)),this.$["control-display"].find("[data-calendar-display]").on(a.clickEventName,function(t){var i,n=e.findParentNode(t.target,function(t){if(t.getAttribute("data-calendar-display"))return!0});n&&(i=n.getAttribute("data-calendar-display"),this.changeMode(i)),n=null,i=null}.bind(this))),n=null,o=null,l=null,t=null,i=null,this},d=function(t){var o,s,d,c,u,p,f=e.date(t),g=new Date(f.getFullYear(),f.getMonth(),1,12),m=a.displayDate,x=function(){var t=g.getDay();0==t&&(t=7),t-=a.startOfWeek;try{return e.date(g,{add:{d:-t}})}finally{t=null}}(),v=f.getMonth(),b={},y=this.$.body.width(),w=Math.floor(y*(6/7));for(a.dimensions.height&&(w=e.number(a.dimensions.height)-e.number(a.dimensions.colHeadHeight)),b.height=Math.floor(w/6)-2*e.number(a.dimensions.itemPadding)+"px",b["line-height"]=b.height,b.padding=e.cssNumber(a.dimensions.itemPadding),u={weekNames:[].concat(ax5.info.weekNames),list:[]},a.startOfWeek&&(u.weekNames=u.weekNames.concat(u.weekNames.slice(0,a.startOfWeek)).splice(a.startOfWeek)),u.weekNames.forEach(function(t){t.colHeadHeight=e.cssNumber(a.dimensions.colHeadHeight)}),o=x,s=0;s<6;){for(d=0;d<7;){c=(7+(d-a.startOfWeek))%7;var _=""+e.date(o,{"return":a.dateFormat}),I={row:s,col:d,isStartOfWeek:0==d,thisDate:""+_,thisDataLabel:a.lang.dayTmpl.replace("%s",o.getDate()),itemStyles:e.css(b),addClass:function(){var t="";return a.selectable?t+=n.selectableMap[_]?o.getMonth()==v?" live":"":" disable":o.getMonth()==v&&(t+=_==e.date(m,{"return":"yyyyMMdd"})?" focus":" live",0==o.getDay()&&(t+=" sunday"),6==o.getDay()&&(t+=" saturday")),t}()+" "+function(){return n.markerMap[_]?n.markerMap[_].theme||a.defaultMarkerTheme:""}()+" "+function(){return n.selectionMap[_]?"selected-day":""}()};u.list.push(I),d++,o=e.date(o,{add:{d:1}}),_=null,I=null}s++}p=i.tmpl.get.call(this,"dayTmpl",u),this.$.body.html(p),this.$.body.find("[data-calendar-item-date]").on(a.clickEventName,function(t){t=t||window.event,h.call(n,t,"date"),e.stopEvent(t)}),this.printedDay={start:x,end:o},l.call(this,null,{self:this,action:"printDay",printedDay:this.printedDay}),r.call(this),f=null,g=null,m=null,x=null,o=null,v=null,b=null,s=null,d=null,y=null,w=null,u=null,p=null},c=function(t){var o,s,d,c,u,p,f=e.date(t),g=f.getMonth(),m={},x=this.$.body.width(),v=Math.floor(x*(6/7));for(a.dimensions.height&&(v=e.number(a.dimensions.height)-e.number(a.dimensions.colHeadHeight)),m.height=Math.floor(v/4)-2*e.number(a.dimensions.itemPadding)+"px",m["line-height"]=m.height,m.padding=e.cssNumber(a.dimensions.itemPadding),u={colHeadHeight:e.cssNumber(a.dimensions.colHeadHeight),colHeadLabel:a.lang.monthHeading,list:[]},c=0,d=0,o=0;o<4;){for(s=0;s<3;){var b={row:o,col:s,isStartOfRow:0==s,thisMonth:f.getFullYear()+"-"+e.setDigit(d+1,2)+"-01",thisMonthLabel:a.lang.months[d],itemStyles:e.css(m),addClass:function(){return a.selectable?n.selectableMap[d]?"live":"disable":"live"}()+" "+function(){return d==g?"focus":""}()+" "+function(){return n.markerMap[d]?n.markerMap[d].theme||a.defaultMarkerTheme:""}()};u.list.push(b),d++,s++,b=null}o++}p=i.tmpl.get.call(this,"monthTmpl",u),this.$.body.html(p),this.$.body.find("[data-calendar-item-month]").on(a.clickEventName,function(t){t=t||window.event,h.call(n,t,"month"),e.stopEvent(t)}),this.printedDay={start:f.getFullYear()+"-"+e.setDigit(c+1,2),end:f.getFullYear()+"-"+e.setDigit(d,2)},l.call(this,null,{self:this,action:"printMonth",printedDay:this.printedDay}),r.call(this),f=null,g=null,m=null,o=null,s=null,d=null,c=null,x=null,v=null,u=null,p=null},u=function(t){var o,s,d,c,u,p,f=e.date(t),g=f.getFullYear(),m={},x=this.$.body.width(),v=Math.floor(x*(6/7));for(a.dimensions.height&&(v=e.number(a.dimensions.height)-e.number(a.dimensions.colHeadHeight)),m.height=Math.floor(v/5)-2*e.number(a.dimensions.itemPadding)+"px",m["line-height"]=m.height,m.padding=e.cssNumber(a.dimensions.itemPadding),u={colHeadHeight:e.cssNumber(a.dimensions.colHeadHeight),colHeadLabel:a.lang.yearHeading,list:[]},c=g-10,d=g-10,o=0;o<5;){for(s=0;s<4;){var b={row:o,col:s,isStartOfRow:0==s,thisYear:d+"-"+e.setDigit(f.getMonth()+1,2)+"-01",thisYearLabel:a.lang.yearTmpl.replace("%s",d),itemStyles:e.css(m),addClass:function(){return a.selectable?n.selectableMap[d]?"live":"disable":"live"}()+" "+function(){return d==g?"focus":""}()+" "+function(){return n.selectableMap[d]?n.selectableMap[d].theme||a.defaultMarkerTheme:""}()};u.list.push(b),d++,s++,b=null}o++}p=i.tmpl.get.call(this,"yearTmpl",u),this.$.body.html(p),this.$.body.find("[data-calendar-item-year]").on(a.clickEventName,function(t){t=t||window.event,h.call(this,t,"year"),e.stopEvent(t)}),this.printedDay={start:c,end:d-1},l.call(this,null,{self:this,action:"printYear",printedDay:this.printedDay}),r.call(this),f=null,g=null,m=null,o=null,s=null,d=null,c=null,x=null,v=null,u=null,p=null},h=function(t,i,l,s){var r,d,c;i=i||"date",l=e.findParentNode(t.target,function(t){if(t.getAttribute("data-calendar-item-"+i))return!0}),l&&(s=l.getAttribute("data-calendar-item-"+i),d=e.date(s,{"return":a.dateFormat}),c=!0,o=a.multipleSelect?e.isNumber(a.multipleSelect)?a.multipleSelect:2:1,a.selectable&&(n.selectableMap[d]||(c=!1)),"date"==i?c&&(n.selection.length>=o&&(r=n.selection.splice(0,n.selection.length-(o-1)),r.forEach(function(t){n.$.body.find('[data-calendar-item-date="'+e.date(t,{"return":a.dateFormat})+'"]').removeClass("selected-day")})),jQuery(l).addClass("selected-day"),n.selection.push(s),n.onClick&&n.onClick.call({self:this,date:s,target:this.target,dateElement:l})):"month"==i?"month"==a.selectMode?c&&(n.selection.length>=o&&(r=n.selection.splice(0,n.selection.length-(o-1)),r.forEach(function(t){n.$.body.find('[data-calendar-item-month="'+e.date(t,{"return":"yyyy-MM-dd"})+'"]').removeClass("selected-month")})),jQuery(l).addClass("selected-month"),n.selection.push(s),n.onClick&&n.onClick.call({self:this,date:s,target:this.target,dateElement:l})):n.changeMode("day",s):"year"==i&&("year"==a.selectMode?c&&(n.selection.length>=o&&(r=n.selection.splice(0,n.selection.length-(o-1)),r.forEach(function(t){n.$.body.find('[data-calendar-item-year="'+e.date(t,{"return":"yyyy-MM-dd"})+'"]').removeClass("selected-year")})),jQuery(l).addClass("selected-year"),n.selection.push(s),n.onClick&&n.onClick.call({self:this,date:s,target:this.target,dateElement:l})):n.changeMode("month",s))),i=null,l=null,s=null,r=null,d=null,c=null},p=function(t,i,n){i=e.findParentNode(t.target,function(t){if(t.getAttribute("data-calendar-move"))return!0}),i&&(n=i.getAttribute("data-calendar-move"),"day"==a.mode||"d"==a.mode?("left"==n?a.displayDate=e.date(a.displayDate,{add:{m:-1}}):a.displayDate=e.date(a.displayDate,{add:{m:1}}),d.call(this,a.displayDate)):"month"==a.mode||"m"==a.mode?("left"==n?a.displayDate=e.date(a.displayDate,{add:{y:-1}}):a.displayDate=e.date(a.displayDate,{add:{y:1}}),c.call(this,a.displayDate)):"year"!=a.mode&&"y"!=a.mode||("left"==n?a.displayDate=e.date(a.displayDate,{add:{y:-10}}):a.displayDate=e.date(a.displayDate,{add:{y:10}}),u.call(this,a.displayDate))),i=null,n=null},f=function(){setTimeout(function(){if("day"===a.mode||"d"===a.mode)for(var t in this.markerMap)this.$.body.find('[data-calendar-item-date="'+t+'"]').addClass(this.markerMap[t].theme||a.defaultMarkerTheme)}.bind(this))},g=function(){setTimeout(function(){for(var t in this.selectionMap)this.$.body.find('[data-calendar-item-date="'+t+'"]').addClass("selected-day")}.bind(this))},m=function(){setTimeout(function(){if("day"===a.mode||"d"===a.mode)for(var t in this.periodMap)this.periodMap[t].label&&this.$.body.find('[data-calendar-item-date="'+t+'"]').find(".addon-footer").html(this.periodMap[t].label),this.$.body.find('[data-calendar-item-date="'+t+'"]').addClass(this.periodMap[t].theme)}.bind(this))},x=function(){if("day"===a.mode||"d"===a.mode)for(var t in this.periodMap)this.$.body.find('[data-calendar-item-date="'+t+'"]').find(".addon-footer").empty(),this.$.body.find('[data-calendar-item-date="'+t+'"]').removeClass(this.periodMap[t].theme)};this.init=function(){this.onStateChanged=a.onStateChanged,this.onClick=a.onClick,a.target||console.log(ax5.info.getError("ax5calendar","401","setConfig")),this.target=jQuery(a.target),a.displayDate=e.date(a.displayDate),this.target.html(s.call(this)),this.$={root:this.target.find('[data-calendar-els="root"]'),control:this.target.find('[data-calendar-els="control"]'),"control-display":this.target.find('[data-calendar-els="control-display"]'),body:this.target.find('[data-calendar-els="body"]')},a.control&&this.$.root.on(a.clickEventName,"[data-calendar-move]",function(t){p.call(this,t||window.event)}.bind(this)),a.selection&&this.setSelection(a.selection,!1),a.selectable&&this.setSelectable(a.selectable,!1),a.marker&&this.setMarker(a.marker,!1),setTimeout(function(){"day"===a.mode||"d"===a.mode?d.call(this,a.displayDate):"month"===a.mode||"m"===a.mode?c.call(this,a.displayDate):"year"!==a.mode&&"y"!==a.mode||u.call(this,a.displayDate)}.bind(this))},this.changeMode=function(t,e){return"undefined"!=typeof e&&(a.displayDate=e),t&&(a.mode=t),this.$.body.removeClass("fadein").addClass("fadeout"),setTimeout(function(){"day"==a.mode||"d"==a.mode?d.call(this,a.displayDate):"month"==a.mode||"m"==a.mode?c.call(this,a.displayDate):"year"!=a.mode&&"y"!=a.mode||u.call(this,a.displayDate),this.$.body.removeClass("fadeout").addClass("fadein")}.bind(this),a.animateTime),this},this.setSelection=function(){n.selectionMap={};var t={arr:function(t,i,o){return i={},e.isArray(t)?(n.selection=t=t.splice(0,o),t.forEach(function(t){e.isDate(t)&&(t=e.date(t,{"return":a.dateFormat})),i[t]=!0}),i):i}};return function(i,n){var l={};if(o=a.multipleSelect?e.isNumber(a.multipleSelect)?a.multipleSelect:2:1,a.selection=i){if(!e.isArray(i))return this;l=t.arr(i,{},o)}return this.selectionMap=jQuery.extend({},l),n!==!1&&g.call(this),l=null,this}}(),this.getSelection=function(){return this.selection},this.setSelectable=function(){n.selectableMap={};var t={arr:function(t,i){return i={},e.isArray(t)?(t.forEach(function(t){e.isDate(t)&&(t=e.date(t,{"return":a.dateFormat})),i[t]=!0}),i):i},obj:function(t,i){if(i={},e.isArray(t))return i;if(t.range)return i;for(var n in t)i[n]=t[n];return i},range:function(t,i){return i={},e.isArray(t)?i:t.range?(t.range.forEach(function(t){if(e.isDateFormat(t.from)&&e.isDateFormat(t.to))for(var n=e.date(t.from);n<=e.date(t.to);n.setDate(n.getDate()+1))i[e.date(n,{"return":a.dateFormat})]=!0;else for(var o=t.from;o<=t.to;o++)i[o]=!0}),i):i}};return function(i,n){var o,l={};if(a.selectable=i)if(e.isArray(i))l=t.arr(i);else{for(o in t)if(i[o]){l=t[o](i);break}0===Object.keys(l).length&&(l=t.obj(i))}return this.selectableMap=l,n!==!1&&this.changeMode(),this}}(),this.setMarker=function(){n.markerMap={};var t={obj:function(t,i){if(i={},e.isArray(t))return i;if(t.range)return i;for(var n in t)i[n]=t[n];return t=null,i},range:function(t,i){return i={},e.isArray(t)?i:t.range?(t.range.forEach(function(t){if(e.isDateFormat(t.from)&&e.isDateFormat(t.to))for(var n=e.date(t.from);n<=e.date(t.to);n.setDate(n.getDate()+1))i[e.date(n,{"return":a.dateFormat})]={theme:t.theme,label:t.label};else for(var o=t.from;o<=t.to;o++)i[o]={theme:t.theme,label:t.label}}),t=null,i):i}};return function(e,i){var n,o={};if(a.marker=e){for(n in t)if(e[n]){o=t[n](e);break}0===Object.keys(o).length&&(o=t.obj(e))}return this.markerMap=o,i!==!1&&f.call(this),this}}(),this.setPeriod=function(){n.periodMap={};var t={range:function(t,i){return i={},e.isArray(t)?i:t.range?(t.range.forEach(function(t){if(e.isDateFormat(t.from)&&e.isDateFormat(t.to))for(var n=new Date(e.date(t.from));n<=e.date(t.to);n.setDate(n.getDate()+1))n.getTime()==e.date(t.from).getTime()?i[e.date(n,{"return":a.dateFormat})]={theme:t.theme||a.defaultPeriodTheme,label:t.fromLabel}:n.getTime()==e.date(t.to).getTime()?i[e.date(n,{"return":a.dateFormat})]={theme:t.theme||a.defaultPeriodTheme,label:t.toLabel}:i[e.date(n,{"return":a.dateFormat})]={theme:t.theme||a.defaultPeriodTheme}}),t=null,i):i}};return function(e,i){var n={};return i!==!1&&x.call(this),(a.period=e)&&(n=t.range(e)),this.periodMap=n,i!==!1&&m.call(this),this}}(),this.main=function(){t.calendar_instance=t.calendar_instance||[],t.calendar_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),i=ax5.ui.calendar}(),function(){var t=ax5.ui.calendar,e=function(t){return'\n                <div class="ax5-ui-calendar {{theme}}" data-calendar-els="root" onselectstart="return false;">\n                    {{#control}}\n                    <div class="calendar-control" data-calendar-els="control" style="{{controlCSS}}">\n                        <a class="date-move-left" data-calendar-move="left" style="{{controlButtonCSS}}">{{{left}}}</a>\n                        <div class="date-display" data-calendar-els="control-display" style="{{controlCSS}}"></div>\n                        <a class="date-move-right" data-calendar-move="right" style="{{controlButtonCSS}}">{{{right}}}</a>\n                    </div>\n                    {{/control}}\n                    <div class="calendar-body" data-calendar-els="body"></div>\n                </div>\n                '},i=function(t){return'\n                <table data-calendar-table="day" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                        {{#weekNames}}\n                            <td class="calendar-col-{{col}}" style="height: {{colHeadHeight}}">\n                            {{label}}\n                            </td>\n                        {{/weekNames}}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfWeek}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfWeek}}\n                            <td class="calendar-col-{{col}}" style="{{itemStyles}}">\n                                <a class="calendar-item-day {{addClass}}" data-calendar-item-date="{{thisDate}}">\n                                    <span class="addon addon-header"></span>\n                                    {{thisDataLabel}}\n                                    <span class="addon addon-footer"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '},n=function(t){return'\n                <table data-calendar-table="month" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                            <td class="calendar-col-0" colspan="3" style="height: {{colHeadHeight}}">\n                            {{colHeadLabel}}\n                            </td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfRow}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfRow}}\n                            <td class="calendar-col-{{col}}" style="{{itemStyles}}">\n                                <a class="calendar-item-month {{addClass}}" data-calendar-item-month="{{thisMonth}}">\n                                    <span class="addon"></span>\n                                    {{thisMonthLabel}}\n                                    <span class="lunar"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '},a=function(t){return'\n                <table data-calendar-table="year" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                            <td class="calendar-col-0" colspan="4" style="height: {{colHeadHeight}}">\n                            {{colHeadLabel}}\n                            </td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfRow}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfRow}}\n                            <td class="calendar-col-{{col}}" style="{{itemStyles}}">\n                                <a class="calendar-item-year {{addClass}}" data-calendar-item-year="{{thisYear}}">\n                                    <span class="addon"></span>\n                                    {{thisYearLabel}}\n                                    <span class="lunar"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '};t.tmpl={frameTmpl:e,dayTmpl:i,monthTmpl:n,yearTmpl:a,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"picker"},function(){return function(){var t=this,n=void 0;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",title:"",lang:{ok:"ok",cancel:"cancel"},animateTime:100,calendar:{multipleSelect:!1,control:{left:ax5.def.picker.date_leftArrow||"&#x02190",yearTmpl:ax5.def.picker.date_yearTmpl||"%s",monthTmpl:ax5.def.picker.date_monthTmpl||"%s",right:ax5.def.picker.date_rightArrow||"&#x02192",yearFirst:!0}},palette:{}},this.queue=[],this.activePicker=null,this.activePickerQueueIndex=-1,this.openTimer=null,this.closeTimer=null,n=this.config;var a=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),!0},o=function(){var t={focus:function(t,e){this.open(t)},click:function(t,e){this.open(t)}},i={"@fn":function(t,e){var i=this.queue[t],a=e.length,o={inputLength:a||1};a>1&&(o.btns={ok:{label:n.lang.ok,theme:n.theme}}),this.queue[t]=jQuery.extend(!0,o,i),o=null,a=null},date:function(t,e){var i=this.queue[t],a=i.content?i.content.width||270:270,o=i.content?i.content.margin||5:5,l=e.length,s={contentWidth:a*l+(l-1)*o,content:{width:a,margin:o},inputLength:l||1};l>1&&!i.btns&&(s.btns={ok:{label:n.lang.ok,theme:n.theme}}),this.queue[t]=jQuery.extend(!0,s,i),a=null,o=null,s=null,l=null},"secure-num":function(t,e){var i=this.queue[t],n=e.length,a={inputLength:n||1};this.queue[t]=jQuery.extend(!0,a,i),a=null,n=null},keyboard:function(t,e){var i=this.queue[t],n=e.length,a={inputLength:n||1};this.queue[t]=jQuery.extend(!0,a,i),a=null,n=null},numpad:function(t,e){var i=this.queue[t],n=e.length,a={inputLength:n||1};this.queue[t]=jQuery.extend(!0,a,i),a=null,n=null},color:function(t,i){var a=this.queue[t],o=a.content?a.content.width||270:270,l=a.content?a.content.margin||5:5,s=i.length,r={contentWidth:o*s+(s-1)*l,content:{width:o,margin:l},inputLength:s||1},d=a.$target.find('[data-ax5picker-color="preview"]');d.get(0)&&(d.css({"background-color":"#"+e.color(i.val()||"#000000").getHexValue()}),i.on("change",function(){d.css({"background-color":"#"+e.color(this.value||"#000000").getHexValue()})})),s>1&&!a.btns&&(r.btns={ok:{label:n.lang.ok,theme:n.theme}}),this.queue[t]=jQuery.extend(!0,r,a),o=null,l=null,r=null,s=null}};return function(n){var a=this.queue[n],o=void 0;if(!a.content)return console.log(ax5.info.getError("ax5picker","501","bind")),this;if(o="INPUT"==a.$target.get(0).tagName.toUpperCase()?a.$target:a.$target.find("input[type]"),e.isFunction(a.content))i["@fn"].call(this,n,o);else for(var l in i)if(a.content.type==l){i[l].call(this,n,o);break}return o.unbind("focus.ax5picker").unbind("click.ax5picker").bind("focus.ax5picker",t.focus.bind(this,n)).bind("click.ax5picker",t.click.bind(this,n)),a.$target.find(".input-group-addon").unbind("click.ax5picker").bind("click.ax5picker",t.click.bind(this,n)),a.content.formatter&&ax5.ui.formatter&&o.ax5formatter(a.content.formatter),o=null,a=null,n=null,this}}(),l=function(t){if(!this.activePicker)return this;var e=function(e){var i,n=jQuery(window),a=jQuery(document.body),o={},l=12,s={},r={};o=e.$target.offset(),s={width:e.$target.outerWidth(),height:e.$target.outerHeight()},r={winWidth:Math.max(n.width(),a.width()),winHeight:Math.max(n.height(),a.height()),width:this.activePicker.outerWidth(),height:this.activePicker.outerHeight()},e.direction&&""!==e.direction&&"auto"!==e.direction?i=e.direction:(i="top",o.top-r.height-l<0?i="top":o.top+s.height+r.height+l>r.winHeight&&(i="bottom")),t&&this.activePicker.addClass("direction-"+i);var d=function(){var t={left:0,top:0};switch(i){case"top":t.left=o.left+s.width/2-r.width/2,t.top=o.top+s.height+l;break;case"bottom":t.left=o.left+s.width/2-r.width/2,t.top=o.top-r.height-l;break;case"left":t.left=o.left+s.width+l,t.top=o.top-r.height/2+s.height/2;break;case"right":t.left=o.left-r.width-l,t.top=o.top-r.height/2+s.height/2}return t}();(function(){"top"!=i&&"bottom"!=i||(d.left<0?(d.left=l,this.activePickerArrow.css({left:o.left+s.width/2-d.left})):d.left+r.width>r.winWidth&&(d.left=r.winWidth-r.width-l,this.activePickerArrow.css({left:o.left+s.width/2-d.left})))}).call(this),this.activePicker.css(d)},i=this.queue[this.activePickerQueueIndex];t&&(this.activePicker.css({top:-999}),jQuery(document.body).append(this.activePicker)),setTimeout(function(){e.call(this,i)}.bind(this))},s=function(t,i){if(!this.activePicker)return this;var n=this.queue[this.activePickerQueueIndex];return i=e.findParentNode(t.target,function(t){return!!t.getAttribute("data-picker-els")||(n.$target.get(0)==t||void 0)}),i?this:(this.close(),this)},r=function(t,i){if(t.srcElement&&(t.target=t.srcElement),i=e.findParentNode(t.target,function(t){if(t.getAttribute("data-picker-btn"))return!0})){var n=this.queue[this.activePickerQueueIndex],a=i.getAttribute("data-picker-btn");if(n.btns&&n.btns[a].onClick){var o={key:a,value:n.btns[a],self:this,item:n};n.btns[a].onClick.call(o,a)}else this.close()}},d=function(t){t.keyCode==ax5.info.eventKeys.ESC&&this.close()},c=function(t){return e.isString(t)||(t=jQuery(t).data("data-axpicker-id")),e.isString(t)?e.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5picker","402","getQueIdx"))};this.init=function(){this.onStateChanged=n.onStateChanged},this.bind=function(t){var i={},a=void 0;return t=jQuery.extend(!0,i,n,t),t.target?(t.$target=jQuery(t.target),t.$target.get(0)?(t.id||(t.id=t.$target.data("data-axpicker-id")),t.id||(t.id="ax5-picker-"+ax5.getGuid(),t.$target.data("data-axpicker-id",t.id)),a=e.search(this.queue,function(){return this.id==t.id}),a===-1?(this.queue.push(t),o.call(this,this.queue.length-1)):(this.queue[a]=jQuery.extend(!0,{},this.queue[a],t),o.call(this,a)),i=null,a=null,this):(console.log(ax5.info.getError("ax5picker","401","bind")),this)):(console.log(ax5.info.getError("ax5picker","401","bind")),this)},this.setContentValue=function(){var i={date:function(t,e,i){var n,a,o,l=[];return"INPUT"!==t.$target.get(0).tagName.toUpperCase()&&t.$target.find("input[type]").each(function(){l.push(this.value)}),0==e?(l.length>1&&""!==l[1]?(n=ax5.util.dday(l[1],{today:l[0]}),n<0&&(o=i)):o=i,o&&(t.pickerCalendar[1].ax5uiInstance.setSelection([o],!1).changeMode("d",o),this.setContentValue(t.id,1,o)),i):1==e?(l.length>1&&(n=ax5.util.dday(l[1],{today:l[0]}),n<0&&(a=l[1])),a&&(t.pickerCalendar[0].ax5uiInstance.setSelection([a],!1).changeMode("d",a),this.setContentValue(t.id,0,a)),i):void 0}};return function(n,o,l,s){var r=e.isNumber(n)?n:c.call(this,n),d=this.queue[r],u=void 0;if(s||(s={}),d){if(u="INPUT"==d.$target.get(0).tagName.toUpperCase()?d.$target:jQuery(d.$target.find("input[type]").get(o)),u.val(l),d.disableChangeTrigger){var h=d.$target.find('[data-ax5picker-color="preview"]');h.get(0)&&h.css({"background-color":l})}else u.trigger("change");d.inputLength>1&&i[d.content.type]&&(l=i[d.content.type].call(this,d,o,l));var p={self:t,state:"changeValue",item:d,inputIndex:o,value:l,values:[l]};"INPUT"!==d.$target.get(0).tagName.toUpperCase()&&(p.values=[],d.$target.find("input[type]").each(function(){
p.values.push(this.value)})),a.call(this,d,p),1!=d.inputLength||s.doNotClose||this.close()}return d=null,n=null,o=null,l=null,this}}(),this.getContentValue=function(){return function(t,i){var n=e.isNumber(t)?t:c.call(this,t),a=this.queue[n],o=void 0;return a?(o="INPUT"==a.$target.get(0).tagName.toUpperCase()?a.$target:jQuery(a.$target.find("input[type]").get(i)),o.val()):(a=null,t=null,i=null,this)}}(),this.open=function(){var o={"@fn":function(t,e){var i=this.queue[t];return i.content.call(i,function(t){e(t)}),!0},date:function(i){for(var a=this.queue[i],o=[],l=jQuery.extend({},n.calendar,{displayDate:new Date}),s="INPUT"==a.$target.get(0).tagName.toUpperCase()?a.$target:a.$target.find("input[type]"),r=0;r<a.inputLength;r++)o.push('<div style="width:'+e.cssNumber(a.content.width)+';float:left;" class="ax-picker-content-box" data-calendar-target="'+r+'"></div>'),r<a.inputLength-1&&o.push('<div style="width:'+a.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),a.pickerContent.html(o.join("")),a.pickerCalendar=[],a.pickerContent.find("[data-calendar-target]").each(function(){var e=this.getAttribute("data-calendar-target"),i=s.get(e).value,n=ax5.util.date(i),o={year:function(t){return ax5.util.date(t,{"return":"yyyy"})},month:function(t){return ax5.util.date(t,{"return":"yyyy-MM"})},day:function(t){return t}};l.displayDate=n,i&&(l.selection=[n]),l=jQuery.extend(!0,l,a.content.config||{}),l.target=this,l.onClick=function(){t.setContentValue(a.id,e,o[l.selectMode||"day"](this.date))},a.pickerCalendar.push({itemId:a.id,inputIndex:e,ax5uiInstance:new ax5.ui.calendar(l)})})},"secure-num":function(i){for(var n=this.queue[i],o=[],l=0;l<n.inputLength;l++)o.push('<div style="width:'+e.cssNumber(n.content.width)+';float:left;" class="ax-picker-content-box" data-secure-num-target="'+l+'"></div>'),l<n.inputLength-1&&o.push('<div style="width:'+n.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),n.pickerContent.html(o.join("")),n.pickerContent.find("[data-secure-num-target]").each(function(){var e=this.getAttribute("data-secure-num-target"),i=[],o=function(t){var e,i,n;for(n=t.length;n;n-=1)e=Math.floor(Math.random()*n),i=t[n-1],t[n-1]=t[e],t[e]=i;return t}([0,1,2,3,4,5,6,7,8,9]),l=[{label:"&#x02190",fn:"back"},{label:"C",fn:"clear"}];o.forEach(function(t){i.push('<div style="float:left;'+n.content.config.btnWrapStyle+'">'),i.push('<button class="btn btn-default btn-'+n.content.config.btnTheme+'" style="'+n.content.config.btnStyle+'" data-secure-num-value="'+t+'">'+t+"</button>"),i.push("</div>")}),l.forEach(function(t){i.push('<div style="float:left;'+n.content.config.btnWrapStyle+'">'),i.push('<button class="btn btn-default btn-'+n.content.config.specialBtnTheme+'" style="'+n.content.config.btnStyle+'" data-secure-num-value="'+t.fn+'">'+t.label+"</button>"),i.push("</div>")}),i.push('<div style="clear:both;"></div>'),$(this).html(i.join("")).on("click","[data-secure-num-value]",function(){var i=this.getAttribute("data-secure-num-value"),o="INPUT"==n.$target.get(0).tagName.toUpperCase()?n.$target:jQuery(n.$target.find("input[type]").get(e)),l=o.val();"back"==i?o.val(l.substring(0,l.length-1)):"clear"==i?o.val(""):o.val(l+i),a.call(this,n,{self:t,state:"changeValue",item:n,value:o.val()})})})},keyboard:function(i){for(var n=this.queue[i],o=[],l=0;l<n.inputLength;l++)o.push('<div style="width:'+e.cssNumber(n.content.width)+';float:left;" class="ax-picker-content-box" data-keyboard-target="'+l+'"></div>'),l<n.inputLength-1&&o.push('<div style="width:'+n.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),n.pickerContent.html(o.join(""));var s=[[{value:"`",shiftValue:"~"},{value:"1",shiftValue:"!"},{value:"2",shiftValue:"@"},{value:"3",shiftValue:"#"},{value:"4",shiftValue:"$"},{value:"5",shiftValue:"%"},{value:"6",shiftValue:"^"},{value:"7",shiftValue:"&"},{value:"8",shiftValue:"*"},{value:"9",shiftValue:"("},{value:"0",shiftValue:")"},{value:"-",shiftValue:"_"},{value:"=",shiftValue:"+"},{label:"&#x02190",fn:"back"}],[{value:"q",shiftValue:"Q"},{value:"w",shiftValue:"W"},{value:"e",shiftValue:"E"},{value:"r",shiftValue:"R"},{value:"t",shiftValue:"T"},{value:"y",shiftValue:"Y"},{value:"u",shiftValue:"U"},{value:"i",shiftValue:"I"},{value:"o",shiftValue:"O"},{value:"p",shiftValue:"P"},{value:"[",shiftValue:"{"},{value:"]",shiftValue:"}"},{value:"\\",shiftValue:"|"}],[{label:"Clear",fn:"clear"},{value:"a",shiftValue:"A"},{value:"s",shiftValue:"S"},{value:"d",shiftValue:"D"},{value:"f",shiftValue:"F"},{value:"g",shiftValue:"G"},{value:"h",shiftValue:"H"},{value:"j",shiftValue:"J"},{value:"k",shiftValue:"K"},{value:"l",shiftValue:"L"},{value:";",shiftValue:":"},{value:"'",shiftValue:'"'}],[{label:"Shift",fn:"shift"},{value:"z",shiftValue:"Z"},{value:"x",shiftValue:"X"},{value:"c",shiftValue:"C"},{value:"v",shiftValue:"V"},{value:"b",shiftValue:"B"},{value:"n",shiftValue:"N"},{value:"m",shiftValue:"M"},{value:",",shiftValue:"<"},{value:".",shiftValue:">"},{value:"/",shiftValue:"?"},{label:"Close",fn:"close"}]],r=function(t){var e=[];return s.forEach(function(i){e.push('<div style="display: table;margin:0 auto;">'),i.forEach(function(i){var a,o,l,s,r;i.fn?(a=i.fn,o=i.label,l=n.content.config.specialBtnWrapStyle,s=n.content.config.specialBtnTheme,r=n.content.config.specialBtnStyle):(o=a=t?i.shiftValue:i.value,l=n.content.config.btnWrapStyle,s=n.content.config.btnTheme,r=n.content.config.btnStyle),e.push('<div style="display: table-cell;'+l+'">'),e.push('<button class="btn btn-default btn-'+s+'" style="'+r+'" data-keyboard-value="'+a+'">'+o+"</button>"),e.push("</div>")}),e.push("</div>")}),e.join("")};n.pickerContent.find("[data-keyboard-target]").each(function(){var e=this.getAttribute("data-keyboard-target"),i=$(this),o=!1,l=function(){o=!o,i.html(r(o))};i.html(r(o)).on("mousedown","[data-keyboard-value]",function(){var i=this.getAttribute("data-keyboard-value"),o="INPUT"==n.$target.get(0).tagName.toUpperCase()?n.$target:jQuery(n.$target.find("input[type]").get(e)),s=o.val();switch(i){case"back":o.val(s.substring(0,s.length-1));break;case"clear":o.val("");break;case"shift":return l(),!1;case"close":return t.close(),!1;default:o.val(s+i)}a.call(this,n,{self:t,state:"changeValue",item:n,value:o.val()})})})},numpad:function(i){for(var n=this.queue[i],o=[],l=0;l<n.inputLength;l++)o.push('<div style="width:'+e.cssNumber(n.content.width)+';float:left;" class="ax-picker-content-box" data-numpad-target="'+l+'"></div>'),l<n.inputLength-1&&o.push('<div style="width:'+n.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),n.pickerContent.html(o.join("")),n.pickerContent.find("[data-numpad-target]").each(function(){var e=this.getAttribute("data-numpad-target"),i=[],o=n.content.config.keyArray||[{value:"7"},{value:"8"},{value:"9"},{label:"BS",fn:"back"},{value:"4"},{value:"5"},{value:"6"},{label:"CLS",fn:"clear"},{value:"1"},{value:"2"},{value:"3"},{value:""},{value:"."},{value:"0"},{value:""},{label:"OK",fn:"enter"}];o.forEach(function(t){var e=void 0,a=void 0,o=void 0,l=void 0,s=void 0;t.fn?(e=t.fn,a=t.label,l=n.content.config.specialBtnTheme,o=n.content.config.specialBtnWrapStyle,s=n.content.config.specialBtnStyle):(a=e=t.value,l=e?n.content.config.btnTheme:"",o=n.content.config.btnWrapStyle,s=n.content.config.btnStyle),i.push('<div style="float:left;'+o+'">'),i.push('<button class="btn btn-default btn-'+l+'" style="'+s+'" data-numpad-value="'+e+'">'+(a||"&nbsp;")+"</button>"),i.push("</div>")}),i.push('<div style="clear:both;"></div>'),$(this).html(i.join("")).on("mousedown","[data-numpad-value]",function(){var i=this.getAttribute("data-numpad-value"),o="INPUT"==n.$target.get(0).tagName.toUpperCase()?n.$target:jQuery(n.$target.find("input[type]").get(e)),l=o.val(),s="";switch(i){case"back":s="changeValue",o.val(l.substring(0,l.length-1));break;case"clear":s="changeValue",o.val("");break;case"enter":return t.close(n,"enter"),!1;case"close":return t.close(),!1;default:s="changeValue",o.val(l+i)}a.call(this,n,{self:t,state:s,item:n,value:o.val()})})})},color:function(i){for(var a=this.queue[i],o=[],l=jQuery.extend({},n.palette),s="INPUT"==a.$target.get(0).tagName.toUpperCase()?a.$target:a.$target.find("input[type]"),r=0;r<a.inputLength;r++)o.push('<div style="padding: 5px;width:'+e.cssNumber(a.content.width)+';float:left;" class="ax-picker-content-box" data-palette-target="'+r+'" data-ax5palette="ax5picker-'+a.id+'"></div>'),r<a.inputLength-1&&o.push('<div style="width:'+a.content.margin+'px;float:left;height: 5px;"></div>');o.push('<div style="clear:both;"></div>'),a.pickerContent.html(o.join("")),a.pickerPalette=[],a.pickerContent.find("[data-palette-target]").each(function(){var e=this.getAttribute("data-palette-target"),i=s.get(e).value;l.selectedColor=i,l=jQuery.extend(!0,l,a.content.config||{}),l.target=this,l.onClick=function(i){t.setContentValue(a.id,e,i)},l.onUpdateColor=function(i){t.setContentValue(a.id,e,i,{doNotClose:!0})},a.pickerPalette.push({itemId:a.id,inputIndex:e,ax5uiInstance:new ax5.ui.palette(l)})})}};return function(t,u){var h=e.isNumber(t)?t:c.call(this,t),p=this.queue[h];return this.openTimer&&clearTimeout(this.openTimer),this.activePicker?this.activePickerQueueIndex==h?this:u>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(h,(u||0)+1)}.bind(this),n.animateTime),this):(this.activePicker=jQuery(i.tmpl.get.call(this,"pickerTmpl",p)),this.activePickerArrow=this.activePicker.find(".ax-picker-arrow"),this.activePickerQueueIndex=h,p.pickerContent=this.activePicker.find('[data-picker-els="content"]'),e.isFunction(p.content)?(p.pickerContent.html("Loading.."),o["@fn"].call(this,h,function(t){p.pickerContent.html(t)})):p.content.type in o&&o[p.content.type].call(this,h),this.activePicker.find("[data-picker-btn]").on(n.clickEventName,function(t){r.call(this,t||window.event,h)}.bind(this)),l.call(this,"append"),jQuery(window).bind("resize.ax5picker",function(){l.call(this)}.bind(this)),jQuery(window).bind("keyup.ax5picker",function(t){t=t||window.event,d.call(this,t),e.stopEvent(t)}.bind(this)),jQuery(window).bind("click.ax5picker",function(t){t=t||window.event,s.call(this,t),e.stopEvent(t)}.bind(this)),a.call(this,p,{self:this,state:"open",item:p}),this)}}(),this.close=function(t,e){return this.closeTimer&&clearTimeout(this.closeTimer),this.activePicker?(t=this.queue[this.activePickerQueueIndex],this.activePicker.addClass("destroy"),jQuery(window).unbind("resize.ax5picker"),jQuery(window).unbind("click.ax5picker"),jQuery(window).unbind("keyup.ax5picker"),this.closeTimer=setTimeout(function(){this.activePicker&&this.activePicker.remove(),this.activePicker=null,this.activePickerQueueIndex=-1,a.call(this,t,{self:this,state:e||"close"})}.bind(this),n.animateTime),this):this},this.main=function(){arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),i=ax5.ui.picker}(),function(){var t=ax5.ui.picker,e=(ax5.util,function(){return'\n<div class="ax5-ui-picker {{theme}}" id="{{id}}" data-picker-els="root" {{#zIndex}}style="z-index:{{zIndex}};"{{/zIndex}}>\n    {{#title}}\n        <div class="ax-picker-heading">{{title}}</div>\n    {{/title}}\n    <div class="ax-picker-body">\n        <div class="ax-picker-content" data-picker-els="content" style="width:{{contentWidth}}px;"></div>\n        {{#btns}}\n            <div class="ax-picker-buttons">\n            {{#btns}}\n                {{#@each}}\n                <button data-picker-btn="{{@key}}" class="btn btn-default {{@value.theme}}">{{@value.label}}</button>\n                {{/@each}}\n            {{/btns}}\n            </div>\n        {{/btns}}\n    </div>\n    <div class="ax-picker-arrow"></div>\n</div>\n'});t.tmpl={pickerTmpl:e,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),ax5&&ax5.ui&&ax5.ui.picker&&(ax5.ui.picker_instance=new ax5.ui.picker,jQuery.fn.ax5picker=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"open":return ax5.ui.picker_instance.open(this);case"close":return ax5.ui.picker_instance.close(this);case"setValue":return ax5.ui.picker_instance.setContentValue(this,arguments[1],arguments[2]);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend(!0,t,e),ax5.ui.picker_instance.bind(t)});return this}}()),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"formatter"},function(){var t=(new Date,function(t,e){if("undefined"==typeof e&&(e=t.value.length),t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}else t.selectionStart&&(t.focus(),t.selectionStart=e,t.selectionEnd=e)});return function(){var n,a=this;this.instanceId=ax5.getGuid(),this.config={animateTime:250},this.queue=[],this.openTimer=null,this.closeTimer=null,n=this.config;var o={focus:function(t,e,i){t.$input.data("__originValue__")||t.$input.data("__originValue__",t.$input.val())},keydown:function(t,e,i){var n=!1;t.enterableKeyCodes&&(i.which&&t.enterableKeyCodes[i.which]||i.metaKey||i.ctrlKey||i.shiftKey||(n=!0)),n&&ax5.util.stopEvent(i)},keyup:function(e,n,a){var o,l,s,r,d,c=e.$input.get(0);"selectionStart"in c?o=c.selectionStart:document.selection&&(r=document.selection.createRange(),d=document.selection.createRange().text.length,r.moveStart("character",-c.value.length),o=r.text.length-d),l=c.value,s=e.pattern in i.formatter?i.formatter[e.pattern].getPatternValue.call(this,e,n,a,c.value):l,s!=l&&(e.$input.val(s).trigger("change"),t(c,o+s.length-l.length))},blur:function(t,e,n,a){var o,l,s=t.$input.get(0);t.$input.removeData("__originValue__"),o=s.value,l=t.pattern in i.formatter?i.formatter[t.pattern].getPatternValue.call(this,t,e,n,s.value,"blur"):o,a?t.$input.val(l):l!=o&&t.$input.val(l).trigger("change")}},l=function(t,e){if(!t.pattern&&("INPUT"==t.$target.get(0).tagName?t.pattern=t.$target.attr("data-ax5formatter"):t.pattern=t.$target.find('input[type="text"]').attr("data-ax5formatter"),!t.pattern))return console.log(ax5.info.getError("ax5formatter","501","bind")),console.log(t.target),this;var n=/[^\(^\))]+/gi,a=t.pattern.match(n);return t.pattern=a[0],t.patternArgument=a[1]||"",t.pattern in i.formatter&&(t.enterableKeyCodes=i.formatter[t.pattern].getEnterableKeyCodes.call(this,t,e)),t.$input.unbind("focus.ax5formatter").bind("focus.ax5formatter",o.focus.bind(this,this.queue[e],e)),t.$input.unbind("keydown.ax5formatter").bind("keydown.ax5formatter",o.keydown.bind(this,this.queue[e],e)),t.$input.unbind("keyup.ax5formatter").bind("keyup.ax5formatter",o.keyup.bind(this,this.queue[e],e)),t.$input.unbind("blur.ax5formatter").bind("blur.ax5formatter",o.blur.bind(this,this.queue[e],e)),o.blur.call(this,this.queue[e],e),this},s=function(t){return e.isString(t)||(t=jQuery(t).data("data-formatter")),e.search(this.queue,function(){return this.id==t})};this.init=function(){},this.bind=function(t){var i={},o=void 0;if(jQuery.extend(!0,i,n),t&&jQuery.extend(!0,i,t),t=i,!t.target)return console.log(ax5.info.getError("ax5formatter","401","bind")),this;if(t.$target=jQuery(t.target),"INPUT"==t.$target.get(0).tagName)t.$input=t.$target;else if(t.$input=t.$target.find('input[type="text"]'),t.$input.length>1)return t.$input.each(function(){t.target=this,a.bind(t)}),this;return t.$input="INPUT"==t.$target.get(0).tagName?t.$target:t.$target.find('input[type="text"]'),t.id||(t.id=t.$input.data("ax5-formatter")),t.id||(t.id="ax5-formatter-"+ax5.getGuid(),t.$input.data("ax5-formatter",t.id)),o=e.search(this.queue,function(){return this.id==t.id}),o===-1?(this.queue.push(t),l.call(this,this.queue[this.queue.length-1],this.queue.length-1)):(this.queue[o]=t,l.call(this,this.queue[o],o)),this},this.formatting=function(t){var i=e.isNumber(t)?t:s.call(this,t);if(i===-1)for(var n=this.queue.length;n--;)o.blur.call(this,this.queue[n],n,null,!0);else o.blur.call(this,this.queue[i],i,null,!0);return this},this.unbind=function(){},this.main=function(){arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),i=ax5.ui.formatter}(),function(){var t=ax5.ui.formatter,e=ax5.util,i=new Date,n={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},a={48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1},o={getEnterableKeyCodes:function(e){var i={188:","};return"int"==e.patternArgument||(i[190]="."),jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,i,n,a,o){a=a.replace(/[^0-9^\.^\-]/g,"");var l,s=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),r=a.split(".");r[0]+=".";do r[0]=r[0].replace(s,"$1,$2");while(s.test(r[0]));return l=r.length>1?e.isNumber(t.maxRound)?r[0]+e.left(r[1],t.maxRound):r.join(""):r[0].split(".")[0]}},l={getEnterableKeyCodes:function(e){var i={190:".",110:"."};return jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,i,n,a,o){a=a.replace(/[^0-9^\.^\-]/g,"");var l,s=a.split(".");return s[0]+=".",l=s.length>1?e.isNumber(t.maxRound)?s[0]+e.left(s[1],t.maxRound):s.join(""):s[0].split(".")[0]}},s={getEnterableKeyCodes:function(e){var i={189:"-",191:"/"};return jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,n,a,o,l){if(o=o.replace(/\D/g,""),""==o)return o;var s=/^([0-9]{4})\-?([0-9]{1,2})?\-?([0-9]{1,2})?.*$/;"time"==t.patternArgument?s=/^([0-9]{4})\-?([0-9]{1,2})?\-?([0-9]{1,2})? ?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?.*$/:"year"==t.patternArgument?s=/^([0-9]{0,4})?.*$/:"month"==t.patternArgument&&(s=/^([0-9]{4})\-?([0-9]{1,2})?.*$/);var r=o.match(s),d="",c=function(t,n,a,o){var l={Y:function(t){return"undefined"==typeof t&&(t=i.getFullYear()),""!=t&&"0000"!=t||(t=i.getFullYear()),t.length<4?e.setDigit(t,4):t},M:function(t){return"undefined"==typeof t&&(t=i.getMonth()+1),t>12?12:0==t?"01":e.setDigit(t,2)},D:function(t){"undefined"==typeof t&&(t=i.getDate()+1);var n=e.daysOfMonth(o[1],o[2]-1);return t>n?n:0==t?"01":e.setDigit(t,2)},h:function(t){return t||(t=0),t>23?23:e.setDigit(t,2)},m:function(t){return t||(t=0),t>59?59:e.setDigit(t,2)},s:function(t){return t||(t=0),t>59?59:e.setDigit(t,2)}};return a?l[n](t):t};return d=o.replace(s,function(e,i){var n=[];return"year"==t.patternArgument?n.push(c(arguments[1],"Y",l)):"month"==t.patternArgument?(n.push(c(arguments[1],"Y",l)),(arguments[2]||l)&&n.push("-"+c(arguments[2],"M",l))):"time"==t.patternArgument?(n.push(c(arguments[1],"Y",l)),(arguments[2]||l)&&n.push("-"+c(arguments[2],"M",l)),(arguments[3]||l)&&n.push("-"+c(arguments[3],"D",l,arguments)),(arguments[4]||l)&&n.push(" "+c(arguments[4],"h",l)),(arguments[5]||l)&&n.push(":"+c(arguments[5],"m",l)),(arguments[6]||l)&&n.push(":"+c(arguments[6],"s",l))):(n.push(c(arguments[1],"Y",l)),(arguments[2]||l)&&n.push("-"+c(arguments[2],"M",l)),(arguments[3]||l)&&n.push("-"+c(arguments[3],"D",l,arguments))),n.join("")}),"blur"!=l||r?r||(d=d.length>4?e.left(d,4):d):d=function(){var e=[];return"year"==t.patternArgument?e.push(c(0,"Y",l)):"month"==t.patternArgument?(e.push(c(0,"Y",l)),e.push("-"+c(0,"M",l))):"time"==t.patternArgument?(e.push(c(0,"Y",l)),e.push("-"+c(0,"M",l)),e.push("-"+c(0,"D",l,arguments)),e.push(" "+c(0,"h",l)),e.push(":"+c(0,"m",l)),e.push(":"+c(0,"s",l))):(e.push(c(0,"Y",l)),e.push("-"+c(0,"M",l)),e.push("-"+c(0,"D",l,arguments))),e.join("")}(),d}},r={getEnterableKeyCodes:function(e){var i={186:":"};return jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,i,n,a,o){a=a.replace(/\D/g,"");var l=/^([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?.*$/,s=a.match(l),r=a.replace(l,function(t,e){var i=[arguments[1]];return arguments[2]&&i.push(":"+arguments[2]),arguments[3]&&i.push(":"+arguments[3]),i.join("")});return s||(r=r.length>2?e.left(r,2):r),r}},d={getEnterableKeyCodes:function(e){var i={189:"-"};return jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,e,i,n,a){n=n.replace(/\D/g,"");var o=/^([0-9]{3})\-?([0-9]{1,2})?\-?([0-9]{1,5})?.*$/,l=n.replace(o,function(t,e){var i=[arguments[1]];return arguments[2]&&i.push(arguments[2]),arguments[3]&&i.push(arguments[3]),i.join("-")});return l}},c={getEnterableKeyCodes:function(e){var i={189:"-",188:",",107:"+",187:"+"};return jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,e,i,n,a){var o=n.replace(/\D/g,""),l=/^([0-9]{3})\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?/;"+"==n.substr(0,1)&&(o="+"+n.replace(/\D/g,""),l=/^\+?([0-9]{2}) ?([0-9]{3})\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?/),"02"==o.substr(0,2)&&(l=/^([0-9]{2})\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?/);var s=o.replace(l,function(t,e){console.log(t,e);var i=[arguments[1]];return arguments[2]&&i.push(arguments[2]),arguments[3]&&i.push(arguments[3]),arguments[4]&&i.push(arguments[4]),arguments[5]&&i.push(arguments[5]),i.join("-")});return s}},u={getEnterableKeyCodes:function(e){var i={189:"-"};return jQuery.extend(i,t.formatter.ctrlKeys,t.formatter.numKeys)},getPatternValue:function(t,e,i,n,a){n=n.replace(/\D/g,"").substring(0,16);var o=/^([0-9]{4})\-?([0-9]{4})?\-?([0-9]{4})?\-?([0-9]{4})?/,l=n.replace(o,function(t,e){var i=[arguments[1]];return arguments[2]&&i.push(arguments[2]),arguments[3]&&i.push(arguments[3]),arguments[4]&&i.push(arguments[4]),i.join("-")});return l}},h={getEnterableKeyCodes:function(t){return t.getEnterableKeyCodes?t.getEnterableKeyCodes.call(t,{$input:t.$input}):null},getPatternValue:function(t,e,i,n,a){if(t.getPatternValue)return t.getPatternValue.call(t,{event:i,$input:t.$input,value:n})}};t.formatter={ctrlKeys:n,numKeys:a,money:o,number:l,date:s,time:r,bizno:d,phone:c,credit:u,custom:h}}(),ax5.ui.formatter_instance=new ax5.ui.formatter,jQuery.fn.ax5formatter=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"formatting":return ax5.ui.formatter_instance.formatting(this);case"unbind":return ax5.ui.formatter_instance.unbind(this);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.formatter_instance.bind(t)});return this}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"menu"},function(){return function(){var n=this,a=void 0;this.instanceId=ax5.getGuid(),this.config={theme:"default",iconWidth:22,acceleratorWidth:100,menuBodyPadding:5,offset:{left:0,top:0},position:"fixed",animateTime:250,items:[],itemClickAndClose:!0,columnKeys:{label:"label",items:"items"}},this.openTimer=null,this.closeTimer=null,this.queue=[],this.menuBar={},this.state=void 0,a=this.config;var o=function(t,e){t?(jQuery(document.body).off("click.ax5menu-"+this.instanceId).on("click.ax5menu-"+this.instanceId,d.bind(this,e)),jQuery(window).off("keydown.ax5menu-"+this.instanceId).on("keydown.ax5menu-"+this.instanceId,function(t){t.which==ax5.info.eventKeys.ESC&&n.close()}),jQuery(window).on("resize.ax5menu-"+this.instanceId).on("resize.ax5menu-"+this.instanceId,function(t){n.close()})):(jQuery(document.body).off("click.ax5menu-"+this.instanceId),jQuery(window).off("keydown.ax5menu-"+this.instanceId),jQuery(window).off("resize.ax5menu-"+this.instanceId))},l=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),n.state=e.state,t=null,e=null,!0},s=function(t){return this.onLoad&&this.onLoad.call(t,t),t=null,!0},r=function u(e,i,o,r){var d=e,h=void 0,p=void 0;return d.theme=e.theme||a.theme,d.cfg={icons:jQuery.extend({},a.icons),iconWidth:e.iconWidth||a.iconWidth,acceleratorWidth:e.acceleratorWidth||a.acceleratorWidth},i.forEach(function(t){t.html||t.divide?(t["@isMenu"]=!1,t.html&&(t["@html"]=t.html.call({item:t,config:a,opt:e}))):t["@isMenu"]=!0}),d[a.columnKeys.items]=i,d["@depth"]=o,d["@path"]=r||"root",d["@hasChild"]=function(){return this[a.columnKeys.items]&&this[a.columnKeys.items].length>0},h=jQuery(t.tmpl.get.call(this,"tmpl",d,a.columnKeys)),jQuery(document.body).append(h),p=this.queue.splice(o),p.forEach(function(t){t.$target.remove()}),this.queue.push({$target:h,data:jQuery.extend({},d)}),h.find("[data-menu-item-index]").bind("mouseover",function(){var t=this.getAttribute("data-menu-item-depth"),i=this.getAttribute("data-menu-item-index"),o=this.getAttribute("data-menu-item-path"),l=void 0,s=void 0,r=void 0,d=void 0,c=void 0,h=void 0;null!=t&&"undefined"!=typeof t&&(c=n.queue[t].data[a.columnKeys.items][i][a.columnKeys.items],h=n.queue[t].$target,h.find("[data-menu-item-index]").removeClass("hover"),jQuery(this).addClass("hover"),h.attr("data-selected-menu-item-index")!=i&&(h.attr("data-selected-menu-item-index",i),c&&c.length>0?(l=jQuery(this),s=l.offset(),r="fixed"==a.position?jQuery(document).scrollTop():0,d={"@parent":{left:s.left,top:s.top,width:l.outerWidth(),height:l.outerHeight()},left:s.left+l.outerWidth()-a.menuBodyPadding,top:s.top-a.menuBodyPadding-1-r},d=jQuery.extend(!0,e,d),u.call(n,d,c,Number(t)+1,o)):n.queue.splice(Number(t)+1).forEach(function(t){t.$target.remove()}))),t=null,i=null,o=null,l=null,s=null,r=null,d=null,c=null,h=null}),h.find("[data-menu-item-index]").bind("mouseout",function(){var t=this.getAttribute("data-menu-item-depth"),e=this.getAttribute("data-menu-item-index"),i=this.getAttribute("data-menu-item-path"),o=void 0;i&&(o=n.queue[t].data[a.columnKeys.items][e][a.columnKeys.items]),o&&o.length>0||jQuery(this).removeClass("hover")}),0==o&&(d.direction&&h.addClass("direction-"+d.direction),l.call(this,null,{self:this,items:i,parent:function(t){if(!t)return!1;var e=null;try{e=Function("","return this.config.items["+t.substring(5).replace(/\./g,"].items[")+"];").call(n)}catch(i){}return e}(d["@path"]),state:"popup"})),c.call(this,h,d),s.call(this,{self:this,items:i,element:h.get(0)}),d=null,h=null,p=null,e=null,i=null,o=null,r=null,this},d=function(t,e){var o=void 0,l=void 0;if(o=i.findParentNode(e.target,function(t){if(t.getAttribute("data-menu-item-index"))return!0})){if("undefined"==typeof t&&(t={}),l=function(e){if(!e)return!1;var i=void 0;try{i=Function("","return this["+e.substring(5).replace(/\./g,"]."+a.columnKeys.items+"[")+"];").call(t.items||a.items)}catch(n){console.log(ax5.info.getError("ax5menu","501","menuItemClick"))}try{return i}finally{i=null}}(o.getAttribute("data-menu-item-path")),!l)return this;l.check&&(function(t){var e={checkbox:function(t){this.checked=!t},radio:function(e){var i=this.name;t.forEach(function(t){t.check&&"radio"===t.check.type&&t.check.name==i&&(t.check.checked=!1)}),this.checked=!e}};e[this.type]&&e[this.type].call(this,this.checked),e=null}.call(l.check,a.items),a.itemClickAndClose||n.queue.forEach(function(t){t.$target.find("[data-menu-item-index]").each(function(){var e=t.data[a.columnKeys.items][this.getAttribute("data-menu-item-index")];e.check&&jQuery(this).find(".item-checkbox-wrap").attr("data-item-checked",e.check.checked)})})),n.onClick&&n.onClick.call(l,l,t.param)&&n.close(),l[a.columnKeys.items]&&0!=l[a.columnKeys.items].length||!a.itemClickAndClose||n.close()}else n.close();return o=null,l=null,this},c=function(t,e){var i=jQuery(window),n=jQuery(document),o="fixed"==a.position?i.height():n.height(),l=i.width(),s=t.outerHeight(),r=t.outerWidth(),d=e.left,c=e.top,u=a.position||"fixed";return d+r>l&&(d=e["@parent"]?e["@parent"].left-r+a.menuBodyPadding:l-r),c+s>o&&(c=o-s),t.css({left:d,top:c,position:u}),t=null,e=null,i=null,n=null,o=null,l=null,s=null,r=null,d=null,c=null,u=null,this};this.init=function(){this.onStateChanged=a.onStateChanged,this.onClick=a.onClick,this.onLoad=a.onLoad,l.call(this,null,{self:this,state:"init"})},this.popup=function(){var t={event:function(t,e){t={left:t.clientX,top:"fixed"==a.position?t.clientY:t.pageY,width:a.width,theme:a.theme},t.left-=5,t.top-=5,a.offset&&(a.offset.left&&(t.left+=a.offset.left),a.offset.top&&(t.top+=a.offset.top)),e=jQuery.extend(!0,t,e);try{return e}finally{t=null}},object:function(t,e){t={left:t.left,top:t.top,width:t.width||a.width,theme:t.theme||a.theme},a.offset&&(a.offset.left&&(t.left+=a.offset.left),a.offset.top&&(t.top+=a.offset.top)),e=jQuery.extend(!0,t,e);try{return e}finally{t=null}}},e=function(t){t&&(a.theme=t)};return function(i,n){if(!i)return this;n=t["undefined"==typeof i.clientX?"object":"event"].call(this,i,n),e(n.theme);var l=[].concat(a.items),s=void 0;return n.items=l,n.filter&&(s=function(t){var e=[];return t.forEach(function(t){t.items&&t.items.length>0&&(t.items=s(t.items)),n.filter.call(t)&&e.push(t)}),e},n.items=l=s(l)),l.length&&(o.call(this,!1),r.call(this,n,l,0),this.popupEventAttachTimer&&clearTimeout(this.popupEventAttachTimer),this.popupEventAttachTimer=setTimeout(function(){o.call(this,!0,n)}.bind(this),500)),i=null,this}}(),this.attach=function(){var e={object:function(t,e){t={left:t.left,top:t.top,width:t.width||a.width,theme:t.theme||a.theme,direction:t.direction||a.direction},e=jQuery.extend(!0,e,t);try{return e}finally{t=null,e=null}}},l=function(t,i,l){var s=jQuery(t),d=s.offset(),c=s.outerHeight(),u=Number(t.getAttribute("data-menu-item-index")),h="fixed"==a.position?jQuery(document).scrollTop():0;if(a.items&&a.items[u][a.columnKeys.items]&&a.items[u][a.columnKeys.items].length){if(n.menuBar.openedIndex==u)return"click"==l&&n.close(),!1;n.menuBar.target.find("[data-menu-item-index]").removeClass("hover"),n.menuBar.opened=!0,n.menuBar.openedIndex=u,s.attr("data-menu-item-opened","true"),s.addClass("hover"),a.offset&&(a.offset.left&&(d.left+=a.offset.left),a.offset.top&&(d.top+=a.offset.top)),i=e.object.call(this,{left:d.left,top:d.top+c-h},i),r.call(n,i,a.items[u][a.columnKeys.items],0,"root."+t.getAttribute("data-menu-item-index")),o.call(n,!0,{})}t=null,i=null,s=null,d=null,c=null,u=null,h=null},s=function(t,e,i){var o=jQuery(t),l=(o.offset(),o.outerHeight(),Number(t.getAttribute("data-menu-item-index")));"fixed"==a.position?jQuery(document).scrollTop():0;!a.items||a.items[l][a.columnKeys.items]&&0!=a.items[l][a.columnKeys.items].length||n.onClick&&n.onClick.call(a.items[l],a.items[l])};return function(e,o){var r,d={},c=a.items;return"undefined"==typeof o&&(o={}),d.theme=o.theme||a.theme,d.cfg={icons:jQuery.extend({},a.icons),iconWidth:o.iconWidth||a.iconWidth,acceleratorWidth:o.acceleratorWidth||a.acceleratorWidth},c.forEach(function(t){t.html||t.divide?(t["@isMenu"]=!1,t.html&&(t["@html"]=t.html.call({item:t,config:a,opt:o}))):t["@isMenu"]=!0}),d[a.columnKeys.items]=c,r=jQuery(t.tmpl.get.call(this,"tmplMenubar",d,a.columnKeys)),n.menuBar={target:jQuery(e),opened:!1},n.menuBar.target.html(r),n.menuBar.target.bind("click",function(t){if(!t)return this;var e=i.findParentNode(t.target,function(t){if(t.getAttribute("data-menu-item-index"))return!0});e&&(s(e,o,"click"),l(e,o,"click")),e=null}),n.menuBar.target.bind("mouseover",function(t){if(!n.menuBar.opened)return!1;var e=i.findParentNode(t.target,function(t){if(t.getAttribute("data-menu-item-index"))return!0});e&&l(e,o,"mouseover"),e=null}),e=null,o=null,d=null,c=null,r=null,this}}(),this.close=function(){return n.menuBar&&n.menuBar.target&&(n.menuBar.target.find("[data-menu-item-index]").removeClass("hover"),n.menuBar.opened=!1,n.menuBar.openedIndex=null),o.call(this,!1),this.queue.forEach(function(t){t.$target.remove()}),this.queue=[],l.call(this,null,{self:this,state:"close"}),this},this.getCheckValue=function(){var t={},e=function(n){for(var a=n.length;a--;)n[a].check&&n[a].check.checked&&(t[n[a].check.name]?(i.isString(t[n[a].check.name])&&(t[n[a].check.name]=[t[n[a].check.name]]),t[n[a].check.name].push(n[a].check.value)):t[n[a].check.name]=n[a].check.value),
n[a].items&&n[a].items.length>0&&e(n[a].items)};e(a.items);try{return t}finally{t=null,e=null}},this.main=function(){e.menu_instance=e.menu_instance||[],e.menu_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),t=ax5.ui.menu}(),function(){var t=ax5.ui.menu,e=function(t){return'\n        <div class="ax5-ui-menu {{theme}}" {{#width}}style="width:{{width}}px;"{{/width}}>\n            <div class="ax-menu-body">\n                {{#'+t.items+'}}\n                    {{^@isMenu}}\n                        {{#divide}}\n                        <div class="ax-menu-item-divide" data-menu-item-index="{{@i}}"></div>\n                        {{/divide}}\n                        {{#html}}\n                        <div class="ax-menu-item-html" data-menu-item-index="{{@i}}">{{{@html}}}</div>\n                        {{/html}}\n                    {{/@isMenu}}\n                    {{#@isMenu}}\n                    <div class="ax-menu-item" data-menu-item-depth="{{@depth}}" data-menu-item-index="{{@i}}" data-menu-item-path="{{@path}}.{{@i}}">\n                        <span class="ax-menu-item-cell ax-menu-item-checkbox">\n                            {{#check}}\n                            <span class="item-checkbox-wrap useCheckBox" {{#checked}}data-item-checked="true"{{/checked}}></span>\n                            {{/check}}\n                            {{^check}}\n                            <span class="item-checkbox-wrap"></span>\n                            {{/check}}\n                        </span>\n                        {{#icon}}\n                        <span class="ax-menu-item-cell ax-menu-item-icon" style="width:{{cfg.iconWidth}}px;">{{{.}}}</span>\n                        {{/icon}}\n                        <span class="ax-menu-item-cell ax-menu-item-label">{{{'+t.label+'}}}</span>\n                        {{#accelerator}}\n                        <span class="ax-menu-item-cell ax-menu-item-accelerator" style="width:{{cfg.acceleratorWidth}}px;"><span class="item-wrap">{{.}}</span></span>\n                        {{/accelerator}}\n                        {{#@hasChild}}\n                        <span class="ax-menu-item-cell ax-menu-item-handle">{{{cfg.icons.arrow}}}</span>\n                        {{/@hasChild}}\n                    </div>\n                    {{/@isMenu}}\n\n                {{/'+t.items+'}}\n            </div>\n            <div class="ax-menu-arrow"></div>\n        </div>\n        '},i=function(t){return'\n        <div class="ax5-ui-menubar {{theme}}">\n            <div class="ax-menu-body">\n                {{#'+t.items+'}}\n                    {{^@isMenu}}\n                        {{#divide}}\n                        <div class="ax-menu-item-divide" data-menu-item-index="{{@i}}"></div>\n                        {{/divide}}\n                        {{#html}}\n                        <div class="ax-menu-item-html" data-menu-item-index="{{@i}}">{{{@html}}}</div>\n                        {{/html}}\n                    {{/@isMenu}}\n                    {{#@isMenu}}\n                    <div class="ax-menu-item" data-menu-item-index="{{@i}}">\n                        {{#icon}}\n                        <span class="ax-menu-item-cell ax-menu-item-icon" style="width:{{cfg.iconWidth}}px;">{{{.}}}</span>\n                        {{/icon}}\n                        <span class="ax-menu-item-cell ax-menu-item-label">{{{'+t.label+"}}}</span>\n                    </div>\n                    {{/@isMenu}}\n                {{/"+t.items+"}}\n            </div>\n        </div>\n        "};t.tmpl={tmpl:e,tmplMenubar:i,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"select"},function(){var t=function(){var t=this,n=void 0;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:100,lang:{noSelected:"",noOptions:"no options",loading:"now loading..",multipleLabel:'"{{label}}"외 {{length}}건'},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,this.xvar={},n=this.config;var a=jQuery(window),o={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},l=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),"changeValue"==e.state&&(t&&t.onChange?t.onChange.call(e,e):this.onChange&&this.onChange.call(e,e)),t=null,e=null,!0},s=function(){for(var t=this.queue.length,i=void 0;t--;)this.queue[t].$display&&(i=Math.max(this.queue[t].$select.outerWidth(),e.number(this.queue[t].minWidth)),this.queue[t].$display.css({"min-width":i}),this.queue[t].reset&&this.queue[t].$display.find(".addon-icon-reset").css({"line-height":this.queue[t].$display.height()+"px"}));return t=null,i=null,this},r=function(t){if(!this.activeSelectOptionGroup)return this;var e=this.queue[this.activeSelectQueueIndex],i={},n=0,o={},l={},s=void 0;t&&jQuery(document.body).append(this.activeSelectOptionGroup),i=e.$target.offset(),o={width:e.$target.outerWidth(),height:e.$target.outerHeight()},l={winWidth:Math.max(a.width(),jQuery(document.body).width()),winHeight:Math.max(a.height(),jQuery(document.body).height()),width:this.activeSelectOptionGroup.outerWidth(),height:this.activeSelectOptionGroup.outerHeight()},e.direction&&""!==e.direction&&"auto"!==e.direction?s=e.direction:(s="top",i.top-l.height-n<0?s="top":i.top+o.height+l.height+n>l.winHeight&&(s="bottom")),t&&this.activeSelectOptionGroup.addClass("direction-"+s),this.activeSelectOptionGroup.css(function(){if("top"==s){if(i.top+o.height+l.height+n>l.winHeight){var t=i.top+o.height/2-l.height/2;return t+l.height+n>l.winHeight&&(t=0),t<0&&(t=0),{left:i.left,top:t,width:o.width}}return{left:i.left,top:i.top+o.height+1,width:o.width}}if("bottom"==s)return{left:i.left,top:i.top-l.height-1,width:o.width}}.call(this))},d=function(t,i){if(!this.activeSelectOptionGroup)return this;var n=this.queue[this.activeSelectQueueIndex],a="display";return(i=e.findParentNode(t.target,function(t){return t.getAttribute("data-option-value")||""==t.getAttribute("data-option-value")?(a="optionItem",!0):n.$target.get(0)==t?(a="display",!0):void 0}))?("optionItem"===a&&(this.val(n.id,{index:{gindex:i.getAttribute("data-option-group-index"),index:i.getAttribute("data-option-index")}},void 0,"internal"),n.$select.trigger("change"),n.$display.focus(),n.multiple||this.close()),this):(this.close(),this)},c=function(t){if(t.keyCode==ax5.info.eventKeys.ESC)this.close();else if(t.which==ax5.info.eventKeys.RETURN)if(this.queue[this.activeSelectQueueIndex].optionFocusIndex>-1){var e=this.activeSelectOptionGroup.find('[data-option-focus-index="'+this.queue[this.activeSelectQueueIndex].optionFocusIndex+'"]');this.val(this.queue[this.activeSelectQueueIndex].id,{index:{gindex:e.attr("data-option-group-index"),index:e.attr("data-option-index")}},void 0,"internal"),this.queue[this.activeSelectQueueIndex].$select.trigger("change"),this.queue[this.activeSelectQueueIndex].multiple||this.close()}else this.close()},u=function(t){var i=this.queue[t],n=[];return e.isArray(i.selected)&&i.selected.length>0?i.selected.forEach(function(t){t.selected&&n.push(t[i.columnKeys.optionText])}):!i.multiple&&i.options&&i.options[0]?i.options[0].optgroup?n[0]=i.options[0].options[0][i.columnKeys.optionText]:n[0]=i.options[0][i.columnKeys.optionText]:n[0]=i.lang.noSelected,function(){if(i.multiple&&n.length>1){var t={label:n[0],length:n.length-1};return ax5.mustache.render(i.lang.multipleLabel,t)}return n[0]}()},h=function(t){this.queue[t].$displayLabel.html(u.call(this,t))},p=function(t,e){var i=[],n=-1,a=this.queue[t].indexedOptions.length-1,o=void 0;if(e){for(;a-n++;){if(o=this.queue[t].indexedOptions[n],(""+o.value).toLowerCase()==e.toLowerCase()){i=[{"@findex":o["@findex"],optionsSort:0}];break}var l=(""+o.value).toLowerCase().search(e.toLowerCase());if(l>-1&&(i.push({"@findex":o["@findex"],optionsSort:l}),i.length>2))break;l=null}i.sort(function(t,e){return t.optionsSort-e.optionsSort})}i&&i.length>0&&f.call(this,t,void 0,i[0]["@findex"]);try{return i}finally{i=null,n=null,a=null,o=null}},f=function(t,e,i){var n=void 0,a=void 0,o=void 0,l=void 0;if(this.activeSelectOptionGroup&&this.queue[t].options&&this.queue[t].options.length>0){"undefined"!=typeof i?n=i:(a=this.queue[t].optionFocusIndex==-1?this.queue[t].optionSelectedIndex||-1:this.queue[t].optionFocusIndex,a==-1?n=e>0?0:this.queue[t].optionItemLength-1:(n=a+e,n<0?n=0:n>this.queue[t].optionItemLength-1&&(n=this.queue[t].optionItemLength-1))),this.queue[t].optionFocusIndex=n,this.activeSelectOptionGroup.find("[data-option-focus-index]").removeClass("hover"),o=this.activeSelectOptionGroup.find('[data-option-focus-index="'+n+'"]').addClass("hover"),l=this.activeSelectOptionGroup.find('[data-els="content"]');var s=o.outerHeight(),r=l.innerHeight(),d=l.scrollTop(),c=o.position().top+l.scrollTop();r+d<c+s?l.scrollTop(c+s-r):d>c&&l.scrollTop(c)}},g=function(){var a=e.debounce(function(e,i){p.call(t,i,e),t.queue[i].$displayInput.val("")},300),l={click:function(i,n){var a=e.findParentNode(n.target,function(t){if(t.getAttribute("data-selected-clear"))return!0});a?this.val(i,{clear:!0}):t.activeSelectQueueIndex==i?this.queue[i].optionFocusIndex==-1&&t.close():(t.open(i),e.stopEvent(n))},keyUp:function(t,e){e.which==ax5.info.eventKeys.SPACE?l.click.call(this,t,e):o[e.which]||a(this.queue[t].$displayInput.val(),t)},keyDown:function(t,i){i.which==ax5.info.eventKeys.DOWN?(f.call(this,t,1),e.stopEvent(i)):i.which==ax5.info.eventKeys.UP&&(f.call(this,t,-1),e.stopEvent(i))},blur:function(t,e){},selectChange:function(t,e){this.val(t,this.queue[t].$select.val(),!0)}};return function(t){var e=this.queue[t],a={};return e.selected=[],e.options||(e.options=[]),e.options.forEach(function(t){t[n.columnKeys.optionSelected]&&e.selected.push(jQuery.extend({},t))}),e.$display?(e.$displayLabel.html(u.call(this,t)),e.options=m.call(this,t,e.options),s.call(this)):(a.instanceId=this.instanceId,a.id=e.id,a.name=e.name,a.theme=e.theme,a.tabIndex=e.tabIndex,a.multiple=e.multiple,a.reset=e.reset,a.label=u.call(this,t),a.formSize=function(){return e.size?"input-"+e.size:""}(),e.$display=i.tmpl.get.call(this,"tmpl",a),e.$displayLabel=e.$display.find('[data-ax5select-display="label"]'),e.$target.find("select").get(0)?(e.$select=e.$target.find("select"),e.$select.attr("tabindex","-1").attr("class","form-control "+a.formSize),a.name&&e.$select.attr("name","name"),a.multiple&&e.$select.attr("multiple","multiple")):(e.$select=i.tmpl.get.call(this,"selectTmpl",a),e.$target.append(e.$select)),e.$target.append(e.$display),e.$displayInput=e.$display.find('[data-ax5select-display="input"]'),e.options=m.call(this,t,e.options),s.call(this),e.$displayInput.unbind("blur.ax5select").bind("blur.ax5select",l.blur.bind(this,t)).unbind("keyup.ax5select").bind("keyup.ax5select",l.keyUp.bind(this,t)).unbind("keydown.ax5select").bind("keydown.ax5select",l.keyDown.bind(this,t))),e.$display.unbind("click.ax5select").bind("click.ax5select",l.click.bind(this,t)).unbind("keyup.ax5select").bind("keyup.ax5select",l.keyUp.bind(this,t)),e.$select.unbind("change.ax5select").bind("change.ax5select",l.selectChange.bind(this,t)),a=null,e=null,t=null,this}}(),m=function(){var i=function(t,e){e?this.queue[t].multiple?this.queue[t].selected.push(jQuery.extend({},e)):this.queue[t].selected[0]=jQuery.extend({},e):this.queue[t].selected=[]};return function(n,a){var o=this.queue[n],l=void 0,s=void 0,r=void 0,d=0;return i.call(this,n,!1),a?(o.options=a,o.indexedOptions=[],l=[],o.options.forEach(function(e,a){e.optgroup?(e["@gindex"]=a,e.options.forEach(function(e,a){e["@index"]=a,e["@findex"]=d,l.push('<option value="'+e[o.columnKeys.optionValue]+'" '+(e[o.columnKeys.optionSelected]?' selected="selected"':"")+">"+e[o.columnKeys.optionText]+"</option>"),e[o.columnKeys.optionSelected]&&i.call(t,n,e),o.indexedOptions.push({"@findex":d,value:e[o.columnKeys.optionValue],text:e[o.columnKeys.optionText]}),d++})):(e["@index"]=a,e["@findex"]=d,l.push('<option value="'+e[o.columnKeys.optionValue]+'" '+(e[o.columnKeys.optionSelected]?' selected="selected"':"")+">"+e[o.columnKeys.optionText]+"</option>"),e[o.columnKeys.optionSelected]&&i.call(t,n,e),o.indexedOptions.push({"@findex":d,value:e[o.columnKeys.optionValue],text:e[o.columnKeys.optionText]}),d++)}),o.optionItemLength=d,o.$select.html(l.join(""))):(s=e.toArray(o.$select.get(0).options),r=[],s.forEach(function(e,a){var l={};l[o.columnKeys.optionValue]=e.value,l[o.columnKeys.optionText]=e.text,l[o.columnKeys.optionSelected]=e.selected,l["@index"]=a,l["@findex"]=a,e.selected&&i.call(t,n,l),r.push(l),l=null}),o.options=r,o.indexedOptions=r),!o.multiple&&0==o.selected.length&&o.options&&o.options[0]&&(o.options[0].optgroup?(o.options[0].options[0][o.columnKeys.optionSelected]=!0,o.selected.push(jQuery.extend({},o.options[0].options[0]))):(o.options[0][o.columnKeys.optionSelected]=!0,o.selected.push(jQuery.extend({},o.options[0])))),l=null,s=null,r=null,o.options}}(),x=function(t){return e.isString(t)||(t=jQuery(t).data("data-ax5select-id")),e.isString(t)?e.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5select","402","getQueIdx"))};this.init=function(){this.onStateChanged=n.onStateChanged,this.onChange=n.onChange,jQuery(window).bind("resize.ax5select-display-"+this.instanceId,function(){s.call(this)}.bind(this))},this.bind=function(t){var i={},a=void 0;return t=jQuery.extend(!0,i,n,t),t.target?(t.$target=jQuery(t.target),t.id||(t.id=t.$target.data("data-ax5select-id")),t.id||(t.id="ax5select-"+ax5.getGuid(),t.$target.data("data-ax5select-id",t.id)),t.name=t.$target.attr("data-ax5select"),t.options&&(t.options=JSON.parse(JSON.stringify(t.options))),function(i){e.isObject(i)&&!i.error&&(t=jQuery.extend(!0,t,i))}(e.parseJson(t.$target.attr("data-ax5select-config"),!0)),a=e.search(this.queue,function(){return this.id==t.id}),a===-1?(this.queue.push(t),g.call(this,this.queue.length-1)):(this.queue[a].selected=[],this.queue[a].options=t.options,this.queue[a]=jQuery.extend(!0,{},this.queue[a],t),g.call(this,a)),i=null,a=null,this):(console.log(ax5.info.getError("ax5select","401","bind")),this)},this.open=function(){var t=function(t){t.onExpand.call({self:this,item:t},function(t){if(this.waitOptionsCallback){var n={},a=this.queue[this.activeSelectQueueIndex];!function(t,i){var n={};i.options.forEach(function(e,i){e["@index"]=i,n[e[t.columnKeys.optionValue]]=e}),e.isArray(t.selected)&&t.selected.forEach(function(e){n[e[t.columnKeys.optionValue]]&&(i.options[n[e[t.columnKeys.optionValue]]["@index"]][t.columnKeys.optionSelected]=!0)})}(a,t),a.$displayLabel.html(u.call(this,this.activeSelectQueueIndex)),a.options=m.call(this,this.activeSelectQueueIndex,t.options),s.call(this),n.id=a.id,n.theme=a.theme,n.size="ax5select-option-group-"+a.size,n.multiple=a.multiple,n.lang=a.lang,n.options=a.options,this.activeSelectOptionGroup.find('[data-els="content"]').html(i.tmpl.get.call(this,"optionsTmpl",n,a.columnKeys))}}.bind(this))};return function(a,o){this.waitOptionsCallback=null;var s=e.isNumber(a)?a:x.call(this,a),u=this.queue[s],h={},p=void 0,f=void 0;return u.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activeSelectOptionGroup?this.activeSelectQueueIndex==s?this:o>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(s,(o||0)+1)}.bind(this),n.animateTime),this):(u.optionFocusIndex=-1,u.selected&&u.selected.length>0&&(u.optionSelectedIndex=u.selected[0]["@findex"]),h.id=u.id,h.theme=u.theme,h.size="ax5select-option-group-"+u.size,h.multiple=u.multiple,h.lang=u.lang,u.$display.attr("data-select-option-group-opened","true"),u.onExpand&&(h.waitOptions=!0),h.options=u.options,this.activeSelectOptionGroup=i.tmpl.get.call(this,"optionGroupTmpl",h),this.activeSelectOptionGroup.find('[data-els="content"]').html(i.tmpl.get.call(this,"optionsTmpl",h,u.columnKeys)),this.activeSelectQueueIndex=s,r.call(this,"append"),jQuery(window).bind("resize.ax5select-"+this.instanceId,function(){r.call(this)}.bind(this)),u.selected&&u.selected.length>0&&(f=this.activeSelectOptionGroup.find('[data-option-index="'+u.selected[0]["@index"]+'"]'),f.get(0)&&(p=f.position().top-this.activeSelectOptionGroup.height()/3,this.activeSelectOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:p},u.animateTime,"swing",function(){}))),u.$displayInput.val(""),setTimeout(function(){u.$displayInput.trigger("focus"),jQuery(window).bind("keyup.ax5select-"+this.instanceId,function(t){t=t||window.event,c.call(this,t),e.stopEvent(t)}.bind(this)),jQuery(window).bind("click.ax5select-"+this.instanceId,function(t){t=t||window.event,d.call(this,t),e.stopEvent(t)}.bind(this))}.bind(this),300),l.call(this,u,{self:this,state:"open",item:u}),u.onExpand&&(this.waitOptionsCallback=!0,t.call(this,u)),h=null,p=null,f=null,this))}}(),this.update=function(t){return this.bind(t),this},this.setOptions=function(t,e){var i=x.call(this,t);return this.queue[i].selected=[],this.queue[i].options=e,g.call(this,i),this},this.val=function(){var i=function(t,e,i){return"undefined"==typeof i?!t.multiple||!e:i},n=function(t){this.queue[t].options.forEach(function(t){t.optgroup?t.options.forEach(function(t){t.selected=!1}):t.selected=!1})},a={index:function(n,a,o){var l=this.queue[n];e.isString(a.index.gindex)?(l.options[a.index.gindex].options[a.index.index][l.columnKeys.optionSelected]=i(l,l.options[a.index.gindex].options[a.index.index][l.columnKeys.optionSelected],o),t.activeSelectOptionGroup.find('[data-option-group-index="'+a.index.gindex+'"][data-option-index="'+a.index.index+'"]').attr("data-option-selected",l.options[a.index.gindex].options[a.index.index][l.columnKeys.optionSelected].toString())):(l.options[a.index.index][l.columnKeys.optionSelected]=i(l,l.options[a.index.index][l.columnKeys.optionSelected],o),t.activeSelectOptionGroup.find('[data-option-index="'+a.index.index+'"]').attr("data-option-selected",l.options[a.index.index][l.columnKeys.optionSelected].toString())),m.call(this,n,l.options),h.call(this,n),r.call(this)},arr:function(i,n,o){n.forEach(function(n){if(e.isString(n)||e.isNumber(n))a.value.call(t,i,n,o);else for(var l in a)if(n[l]){a[l].call(t,i,n,o);break}})},value:function(t,n,a){var o=this.queue[t],l=e.search(o.options,function(){return this[o.columnKeys.optionValue]==n});return l>-1?(o.options[l][o.columnKeys.optionSelected]=i(o,o.options[l][o.columnKeys.optionSelected],a),m.call(this,t,o.options),void h.call(this,t)):void console.log(ax5.info.getError("ax5select","501","val"))},text:function(t,n,a){var o=this.queue[t],l=e.search(o.options,function(){return this[o.columnKeys.optionText]==n});return l>-1?(o.options[l][o.columnKeys.optionSelected]=i(o,o.options[l][o.columnKeys.optionSelected],a),m.call(this,t,o.options),void h.call(this,t)):void console.log(ax5.info.getError("ax5select","501","val"))},clear:function(t){n.call(this,t),m.call(this,t,this.queue[t].options),h.call(this,t),this.activeSelectOptionGroup&&this.activeSelectOptionGroup.find("[data-option-index]").attr("data-option-selected","false")}};return function(t,i,o,s){var r=e.isNumber(t)?t:x.call(this,t);if(!this.queue[r])return this;if("undefined"==typeof i||this.queue[r].multiple||n.call(this,r),"undefined"==typeof i)return this.queue[r].selected;if(e.isArray(i))a.arr.call(this,r,i,o);else if(e.isString(i)||e.isNumber(i))a.value.call(this,r,i,o);else if(null===i)a.clear.call(this,r);else for(var d in a)if(i[d]){a[d].call(this,r,i,o);break}return"undefined"!=typeof i&&l.call(this,this.queue[r],{self:this,item:this.queue[r],state:s?"changeValue":"setValue",value:this.queue[r].selected,internal:s}),t=null,this}}(),this.close=function(t){return this.closeTimer&&clearTimeout(this.closeTimer),this.activeSelectOptionGroup?(t=this.queue[this.activeSelectQueueIndex],t.optionFocusIndex=-1,t.$displayInput.val("").trigger("blur"),t.$display.removeAttr("data-select-option-group-opened").trigger("focus"),this.activeSelectOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5select-"+this.instanceId).unbind("click.ax5select-"+this.instanceId).unbind("keyup.ax5select-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activeSelectOptionGroup&&this.activeSelectOptionGroup.remove(),this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1;var e={self:this,item:t,value:t.selected,state:"close"};l.call(this,t,e),t.onClose&&t.onClose.call(e)}.bind(this),n.animateTime),this.waitOptionsCallback=null,this):this},this.enable=function(t){var e=x.call(this,t);return this.queue[e].$display.removeAttr("disabled"),this.queue[e].$select.removeAttr("disabled"),l.call(this,this.queue[e],{self:this,state:"enable"}),this},this.disable=function(t){var e=x.call(this,t);return this.queue[e].$display.attr("disabled","disabled"),this.queue[e].$select.attr("disabled","disabled"),l.call(this,this.queue[e],{self:this,state:"disable"}),this},this.main=function(){arguments&&e.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return t}()),i=ax5.ui.select}(),ax5.ui.select_instance=new ax5.ui.select,jQuery.fn.ax5select=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"open":return ax5.ui.select_instance.open(this);case"close":return ax5.ui.select_instance.close(this);case"setValue":return ax5.ui.select_instance.val(this,arguments[1],arguments[2]);case"getValue":return ax5.ui.select_instance.val(this);case"enable":return ax5.ui.select_instance.enable(this);case"disable":return ax5.ui.select_instance.disable(this);case"setOptions":return ax5.ui.select_instance.setOptions(this,arguments[1]);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.select_instance.bind(t)});return this}}(),function(){var t=ax5.ui.select,e=function(t){return'\n<div class="ax5select-option-group {{theme}} {{size}}" data-ax5select-option-group="{{id}}">\n    <div class="ax-select-body">\n        <div class="ax-select-option-group-content" data-els="content"></div>\n    </div>\n    <div class="ax-select-arrow"></div> \n</div>\n'},i=function(t){return'\n<a {{^tabIndex}}href="#ax5select-{{id}}" {{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}class="form-control {{formSize}} ax5select-display {{theme}}" \ndata-ax5select-display="{{id}}" data-ax5select-instance="{{instanceId}}">\n    <div class="ax5select-display-table" data-els="display-table">\n        <div data-ax5select-display="label">{{label}}</div>\n        <div data-ax5select-display="addon"> \n            {{#multiple}}{{#reset}}\n            <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n            {{/reset}}{{/multiple}}\n            {{#icons}}\n            <span class="addon-icon-closed">{{clesed}}</span>\n            <span class="addon-icon-opened">{{opened}}</span>\n            {{/icons}}\n            {{^icons}}\n            <span class="addon-icon-closed"><span class="addon-icon-arrow"></span></span>\n            <span class="addon-icon-opened"><span class="addon-icon-arrow"></span></span>\n            {{/icons}}\n        </div>\n    </div>\n    <input type="text" tabindex="-1" data-ax5select-display="input" \n    style="position:absolute;z-index:0;left:0px;top:0px;font-size:1px;opacity: 0;width:1px;border: 0px none;color : transparent;text-indent: -9999em;" />\n</a>\n'},n=function(t){return'\n<select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" {{#multiple}}multiple="multiple"{{/multiple}}></select>\n'},a=function(t){return'\n{{#waitOptions}}\n    <div class="ax-select-option-item">\n            <div class="ax-select-option-item-holder">\n                <span class="ax-select-option-item-cell ax-select-option-item-label">\n                    {{{lang.loading}}}\n                </span>\n            </div>\n        </div>\n{{/waitOptions}}\n{{^waitOptions}}\n    {{#options}}\n        {{#optgroup}}\n            <div class="ax-select-option-group">\n                <div class="ax-select-option-item-holder">\n                    <span class="ax-select-option-group-label">\n                        {{{.}}}\n                    </span>\n                </div>\n                {{#options}}\n                <div class="ax-select-option-item" data-option-focus-index="{{@findex}}" data-option-group-index="{{@gindex}}" data-option-index="{{@index}}" \n                data-option-value="{{'+t.optionValue+'}}" \n                {{#'+t.optionSelected+'}}data-option-selected="true"{{/'+t.optionSelected+'}}>\n                    <div class="ax-select-option-item-holder">\n                        {{#multiple}}\n                        <span class="ax-select-option-item-cell ax-select-option-item-checkbox">\n                            <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                        </span>\n                        {{/multiple}}\n                        <span class="ax-select-option-item-cell ax-select-option-item-label">{{{'+t.optionText+'}}}</span>\n                    </div>\n                </div>\n                {{/options}}\n            </div>                            \n        {{/optgroup}}\n        {{^optgroup}}\n        <div class="ax-select-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+t.optionValue+'}}" {{#'+t.optionSelected+'}}data-option-selected="true"{{/'+t.optionSelected+'}}>\n            <div class="ax-select-option-item-holder">\n                {{#multiple}}\n                <span class="ax-select-option-item-cell ax-select-option-item-checkbox">\n                    <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                </span>\n                {{/multiple}}\n                <span class="ax-select-option-item-cell ax-select-option-item-label">{{{'+t.optionText+'}}}</span>\n            </div>\n        </div>\n        {{/optgroup}}\n    {{/options}}\n    {{^options}}\n        <div class="ax-select-option-item">\n            <div class="ax-select-option-item-holder">\n                <span class="ax-select-option-item-cell ax-select-option-item-label">\n                    {{{lang.noOptions}}}\n                </span>\n            </div>\n        </div>\n    {{/options}}\n{{/waitOptions}}\n'};t.tmpl={optionGroupTmpl:e,tmpl:i,selectTmpl:n,optionsTmpl:a,get:function(e,i,n){return jQuery(ax5.mustache.render(t.tmpl[e].call(this,n),i))}}}(),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"grid"},function(){return function(){var n=this,a=void 0,o={33:"KEY_PAGEUP",34:"KEY_PAGEDOWN",35:"KEY_END",36:"KEY_HOME",37:"KEY_LEFT",38:"KEY_UP",39:"KEY_RIGHT",40:"KEY_DOWN"};this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,debounceTime:250,appendDebouncer:null,appendDebounceTimes:0,appendProgressIcon:"...",appendProgress:!1,frozenColumnIndex:0,frozenRowIndex:0,showLineNumber:!1,showRowSelector:!1,multipleSelect:!0,virtualScrollY:!0,virtualScrollX:!0,headerSelect:!0,virtualScrollYCountMargin:0,virtualScrollAccelerated:!0,virtualScrollAcceleratedDelayTime:10,height:0,columnMinWidth:100,lineNumberColumnWidth:30,rowSelectorColumnWidth:26,sortable:void 0,remoteSort:!1,header:{display:!0,align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1,selector:!0},body:{align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1,grouping:!1,mergeCells:!1},rightSum:!1,footSum:!1,page:{height:25,display:!0,statusDisplay:!0,navigationItemCount:5},scroller:{size:15,barMinSize:15,trackPadding:4},columnKeys:{selected:"__selected__",modified:"__modified__",deleted:"__deleted__",disableSelection:"__disable_selection__"},tree:{use:!1,hashDigit:8,indentWidth:10,arrowWidth:15,iconWidth:18,icons:{openedArrow:"▾",collapsedArrow:"▸",groupIcon:"⊚",collapsedGroupIcon:"⊚",itemIcon:"⊙"},columnKeys:{parentKey:"pid",selfKey:"id",collapse:"collapse",hidden:"hidden",parentHash:"__hp__",selfHash:"__hs__",children:"__children__",depth:"__depth__"}}},this.xvar={bodyTrHeight:0,scrollContentWidth:0,scrollContentHeight:0,scrollTimer:null},this.columns=[],this.colGroup=[],this.footSumColumns=[],this.bodyGrouping={},this.list=[],this.proxyList=null,this.page=null,this.selectedDataIndexs=[],this.deletedList=[],this.sortInfo={},this.focusedColumn={},this.selectedColumn={},this.isInlineEditing=!1,this.inlineEditing={},this.listIndexMap={},this.contextMenu=null,this.headerTable={},this.leftHeaderData={},this.headerData={},this.rightHeaderData={},this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowMap={},this.bodyGroupingTable={},this.leftBodyGroupingData={},this.bodyGroupingData={},this.rightBodyGroupingData={},this.bodyGroupingMap={},this.footSumTable={},this.leftFootSumData={},this.footSumData={},this.needToPaintSum=!0,a=this.config;var l=function(){var t={instanceId:this.id};return this.$target.html(i.tmpl.get("main",t)),this.$={container:{hidden:this.$target.find('[data-ax5grid-container="hidden"]'),root:this.$target.find('[data-ax5grid-container="root"]'),header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]'),page:this.$target.find('[data-ax5grid-container="page"]'),scroller:this.$target.find('[data-ax5grid-container="scroller"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"header-scroll":this.$target.find('[data-ax5grid-panel-scroll="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="top-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"aside-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),"left-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"body-scroll":this.$target.find('[data-ax5grid-panel-scroll="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"right-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')},livePanelKeys:[],scroller:{vertical:this.$target.find('[data-ax5grid-scroller="vertical"]'),"vertical-bar":this.$target.find('[data-ax5grid-scroller="vertical-bar"]'),horizontal:this.$target.find('[data-ax5grid-scroller="horizontal"]'),"horizontal-bar":this.$target.find('[data-ax5grid-scroller="horizontal-bar"]'),corner:this.$target.find('[data-ax5grid-scroller="corner"]')},page:{navigation:this.$target.find('[data-ax5grid-page="navigation"]'),status:this.$target.find('[data-ax5grid-page="status"]')
},form:{clipboard:this.$target.find('[data-ax5grid-form="clipboard"]')},resizer:{vertical:this.$target.find('[data-ax5grid-resizer="vertical"]'),horizontal:this.$target.find('[data-ax5grid-resizer="horizontal"]')}},this.$.container.root.css({height:this.config.height||this.config._height}),this},s=function(t){e.isArray(t)||(t=[]),this.columns=e.deepCopy(t),this.headerTable=i.util.makeHeaderTable.call(this,this.columns),this.xvar.frozenColumnIndex=a.frozenColumnIndex||0,this.bodyRowTable=i.util.makeBodyRowTable.call(this,this.columns),this.bodyRowMap=i.util.makeBodyRowMap.call(this,this.bodyRowTable),this.xvar.bodyTrHeight=this.bodyRowTable.rows.length*this.config.body.columnHeight;for(var n={},o=0,l=this.headerTable.rows.length;o<l;o++)for(var s=this.headerTable.rows[o],r=0,d=s.cols.length;r<d;r++)n[s.cols[r].colIndex]=jQuery.extend({},s.cols[r]);this.colGroup=[];for(var c in n)this.colGroup.push(n[c]);return this},r=function(){s.call(this,this.config.columns),d.call(this),this.config.footSum&&(c.call(this,this.config.footSum),this.needToPaintSum=!0),this.config.body.grouping&&u.call(this,this.config.body.grouping),h.call(this,!0),i.header.repaint.call(this,!0),i.body.repaint.call(this,!0),i.scroller.resize.call(this)},d=function(){var t=this.$.container.root.width()-function(){var t=0;return a.showLineNumber&&(t+=a.lineNumberColumnWidth),a.showRowSelector&&(t+=a.rowSelectorColumnWidth),t+=a.scroller.size}(),i=0,n=void 0,o=[],l=this.colGroup,s=void 0,r=void 0;for(s=0,r=l.length;s<r;s++)e.isNumber(l[s].width)?i+=l[s]._width=l[s].width:"*"===l[s].width?o.push(s):"%"===e.right(l[s].width,1)&&(i+=l[s]._width=t*e.left(l[s].width,"%")/100);if(o.length>0)for(n=(t-i)/o.length,s=0,r=o.length;s<r;s++)l[o[s]]._width=n},c=function(t){e.isArray(t)?this.footSumTable=i.util.makeFootSumTable.call(this,this.footSumColumns=t):(this.footSumColumns=[],this.footSumTable={})},u=function(t){var e=jQuery.extend({},t);"by"in e&&"columns"in e?(this.bodyGrouping={by:e.by,columns:e.columns},this.bodyGroupingTable=i.util.makeBodyGroupingTable.call(this,this.bodyGrouping.columns),this.sortInfo=function(){for(var t={},e=0,i=this.bodyGrouping.by.length;e<i;e++){t[this.bodyGrouping.by[e]]={orderBy:"asc",seq:e,fixed:!0};for(var n=0,a=this.colGroup.length;n<a;n++)this.colGroup[n].key===this.bodyGrouping.by[e]&&(this.colGroup[n].sort="asc",this.colGroup[n].sortFixed=!0)}return t}.call(this)):a.body.grouping=!1},h=function(t){var e=this.proxyList?this.proxyList:this.list;if(Math.min(this.$target.innerWidth(),this.$target.innerHeight())<5)return!1;this.config.height||this.$.container.root.css({height:this.config._height=this.$target.height()});var i=this.$.container.root.width(),n=this.$.container.root.height(),o=i,l=n,s=a.asidePanelWidth=function(){var t=0;return a.showLineNumber&&(t+=a.lineNumberColumnWidth),a.showRowSelector&&(t+=a.rowSelectorColumnWidth),t}(),r=a.frozenPanelWidth=function(t,e){for(var i=0,n=0,a=e;n<a;n++)i+=t[n]._width;return i}(this.colGroup,a.frozenColumnIndex),d=void 0,c=void 0,u=void 0,h=0,p=function(t){return a.frozenRowIndex*t}(this.xvar.bodyTrHeight),f=function(t){return this.footSumColumns.length*t}.call(this,this.xvar.bodyTrHeight),g=a.header.display?this.headerTable.rows.length*a.header.columnHeight:0,m=a.page.display?a.page.height:0;(function(){d=n-g-m-f<e.length*this.xvar.bodyTrHeight?this.config.scroller.size:0,c=function(){for(var t=0,e=i-s-d,n=0,a=this.colGroup.length;n<a;n++)t+=this.colGroup[n]._width;return t>e?this.config.scroller.size:0}.call(this),c>0&&(d=n-g-m-f-c<e.length*this.xvar.bodyTrHeight?this.config.scroller.size:0)}).call(this),o=i-d,l=n-m-c,u=l-g;var x=function(t,e,i,n){var l={},d=!1;switch(i){case"aside":0===s?d=!0:(l.left=0,l.width=s);break;case"left":0===a.frozenColumnIndex?d=!0:(l.left=s,l.width=r);break;case"right":a.rightSum||(d=!0);break;default:"page"!==n&&(0===a.frozenColumnIndex?l.left=s:l.left=r+s,l.width=o-s-r-h)}if(d)return t.hide(),this;if("body"===n)switch(e){case"top":0==a.frozenRowIndex?d=!0:(l.top=0,l.height=p);break;case"bottom":a.footSum?(l.top=u-f,l.height=f):d=!0;break;default:l.top=p,l.height=u-p-f}else"header"===n?l.height=g:"page"===n&&(0==m?d=!0:l.height=m);return d?(t.hide(),this):(t.show().css(l),this)},v=function(t,e,i,n){var a={},s=!1;switch(n){case"vertical":e>0?(a.width=e,a.height=l,a.bottom=i+m):s=!0;break;case"horizontal":i>0?(a.width=o,a.height=i,a.right=e,a.bottom=m):s=!0;break;case"corner":e>0&&i>0?(a.width=e,a.height=i,a.bottom=m):s=!0}return s?(t.hide(),this):void t.show().css(a)};return this.$.container.header.css({height:g}),this.$.container.body.css({height:u}),x.call(this,this.$.panel["aside-header"],"","aside","header"),x.call(this,this.$.panel["left-header"],"","left","header"),x.call(this,this.$.panel.header,"","","header"),x.call(this,this.$.panel["right-header"],"","right","header"),x.call(this,this.$.panel["top-aside-body"],"top","aside","body"),x.call(this,this.$.panel["top-left-body"],"top","left","body"),x.call(this,this.$.panel["top-body"],"top","","body"),x.call(this,this.$.panel["top-right-body"],"top","right","body"),x.call(this,this.$.panel["aside-body"],"","aside","body"),x.call(this,this.$.panel["left-body"],"","left","body"),x.call(this,this.$.panel.body,"","","body"),x.call(this,this.$.panel["right-body"],"","right","body"),x.call(this,this.$.panel["bottom-aside-body"],"bottom","aside","body"),x.call(this,this.$.panel["bottom-left-body"],"bottom","left","body"),x.call(this,this.$.panel["bottom-body"],"bottom","","body"),x.call(this,this.$.panel["bottom-right-body"],"bottom","right","body"),v.call(this,this.$.scroller.vertical,d,c,"vertical"),v.call(this,this.$.scroller.horizontal,d,c,"horizontal"),v.call(this,this.$.scroller.corner,d,c,"corner"),x.call(this,this.$.container.page,"","","page"),this.xvar.bodyHeight=this.$.panel.body.height(),this.xvar.bodyWidth=this.$.panel.body.width(),!0},p=function(t){if(i.header.repaint.call(this),e.isFunction(this.config.remoteSort)){var n={sortInfo:[]};for(var a in t)n.sortInfo.push({key:a,orderBy:t[a].orderBy,seq:t[a].seq});n.sortInfo.sort(function(t,e){return t.seq>e.seq}),this.config.remoteSort.call(n,n)}else this.config.body.grouping?this.list=i.data.initData.call(this,i.data.sort.call(this,t,i.data.clearGroupingData.call(this,this.list))):this.list=i.data.sort.call(this,t,i.data.clearGroupingData.call(this,this.list),{resetLineNumber:!0}),i.body.repaint.call(this,!0),i.scroller.resize.call(this)};this.init=function(t){if(a=jQuery.extend(!0,{},a,t),!a.target)return console.log(ax5.info.getError("ax5grid","401","init")),this;this.onStateChanged=a.onStateChanged,this.onClick=a.onClick,this.onLoad=a.onLoad,this.onDataChanged=a.body.onDataChanged,this.$target=jQuery(a.target),function(t){e.isObject(t)&&!t.error&&(a=jQuery.extend(!0,a,t))}.call(this,e.parseJson(this.$target.attr("data-ax5grid-config"),!0));var r=this.config=a;return this.config.height||(this.config._height=this.$target.height()),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+this.instanceId,this.$target.data("data-ax5grid-id",r.id)),i.data.init.call(this),this.config.tree.use&&(this.sortInfo={},this.sortInfo[this.config.tree.columnKeys.selfHash]={orderBy:"asc",seq:0,fixed:!0}),l.call(this),s.call(this,r.columns),d.call(this),r.footSum&&c.call(this,r.footSum),r.body.grouping&&u.call(this,r.body.grouping),h.call(this,!0),i.header.init.call(this),i.header.repaint.call(this),i.body.init.call(this),i.body.repaint.call(this),i.scroller.init.call(this),i.scroller.resize.call(this),jQuery(window).bind("resize.ax5grid-"+this.id,function(){h.call(n),i.scroller.resize.call(n),i.body.repaint.call(n)}),jQuery(document.body).on("click.ax5grid-"+this.id,function(t){var a=!1,o=e.findParentNode(t.target,function(t){return!!(a=t.getAttribute("data-ax5grid-inline-edit-picker"))||"root"===t.getAttribute("data-ax5grid-container")});o&&o.getAttribute("data-ax5grid-instance")===this.id?n.focused=!0:(n.focused=!1,i.body.blur.call(this))}.bind(this)),jQuery(window).on("keydown.ax5grid-"+this.instanceId,function(t){n.focused&&(n.isInlineEditing?t.which==ax5.info.eventKeys.ESC?n.keyDown("ESC",t.originalEvent):t.which==ax5.info.eventKeys.RETURN?n.keyDown("RETURN",t.originalEvent):t.which==ax5.info.eventKeys.TAB?(n.keyDown("TAB",t.originalEvent),e.stopEvent(t)):t.which==ax5.info.eventKeys.UP?n.keyDown("RETURN",{shiftKey:!0}):t.which==ax5.info.eventKeys.DOWN&&n.keyDown("RETURN",{}):t.metaKey||t.ctrlKey?67==t.which&&n.copySelect():o[t.which]?(n.keyDown(o[t.which],t.originalEvent),e.stopEvent(t)):t.which==ax5.info.eventKeys.ESC?n.focused&&i.body.blur.call(n):t.which==ax5.info.eventKeys.RETURN||t.which==ax5.info.eventKeys.SPACE?n.keyDown("RETURN",t.originalEvent):t.which==ax5.info.eventKeys.TAB?e.stopEvent(t):Object.keys(n.focusedColumn).length)}),jQuery(window).on("keyup.ax5grid-"+this.instanceId,function(t){n.focused&&(n.isInlineEditing||t.metaKey||t.ctrlKey||o[t.which]||t.which==ax5.info.eventKeys.ESC||t.which==ax5.info.eventKeys.RETURN||t.which==ax5.info.eventKeys.SPACE||t.which==ax5.info.eventKeys.TAB||Object.keys(n.focusedColumn).length&&n.keyDown("INLINE_EDIT",t.originalEvent))}),setTimeout(function(){this.onLoad&&this.onLoad.call({self:this})}.bind(this)),this},this.align=function(){return h.call(this)&&(i.body.repaint.call(this),i.scroller.resize.call(this)),this},this.repaint=function(){return i.header.repaint.call(this),i.body.repaint.call(this,!0),i.scroller.resize.call(this),this},this.keyDown=function(){var t={KEY_UP:function(){i.body.moveFocus.call(this,"UP")},KEY_DOWN:function(){i.body.moveFocus.call(this,"DOWN")},KEY_LEFT:function(){i.body.moveFocus.call(this,"LEFT")},KEY_RIGHT:function(){i.body.moveFocus.call(this,"RIGHT")},KEY_HOME:function(){i.body.moveFocus.call(this,"HOME")},KEY_END:function(){i.body.moveFocus.call(this,"END")},INLINE_EDIT:function(t){i.body.inlineEdit.active.call(this,this.focusedColumn,t),/[0-9a-zA-Z]/.test(t.key)||e.stopEvent(t)},ESC:function(t){i.body.inlineEdit.keydown.call(this,"ESC")},RETURN:function(t){var n=0;for(var a in this.inlineEditing){if(n++,!i.body.inlineEdit.keydown.call(this,"RETURN",a))return!1;1==n&&i.body.moveFocus.call(this,t.shiftKey?"UP":"DOWN")&&i.body.inlineEdit.keydown.call(this,"RETURN")}0==n&&(i.body.inlineEdit.keydown.call(this,"RETURN"),e.stopEvent(t))},TAB:function(t){var e=0;for(var n in this.inlineEditing)e++,i.body.inlineEdit.keydown.call(this,"RETURN",n,{moveFocus:!0}),1==e&&i.body.moveFocus.call(this,t.shiftKey?"LEFT":"RIGHT")&&i.body.inlineEdit.keydown.call(this,"RETURN",void 0,{moveFocus:!0})}};return function(e,i){return e in t&&t[e].call(this,i),this}}(),this.copySelect=function(){var t=void 0,e=this.$.form.clipboard,i=[],n="",a=void 0,o=void 0,l=void 0,s=0;for(var r in this.selectedColumn){var d=this.selectedColumn[r];if(d){"undefined"==typeof l&&(l=d.dindex,a=d.rowIndex,o=d.rowIndex),l==d.dindex&&a==d.rowIndex||s++,i[s]||(i[s]=[]);var c=this.bodyRowMap[d.rowIndex+"_"+d.colIndex];c?this.list[d.dindex].__isGrouping?i[s].push(this.list[d.dindex][d.colIndex]):i[s].push(this.list[d.dindex][c.key]):i[s].push(""),l=d.dindex,a=d.rowIndex}}i.forEach(function(t){n+=t.join("\t")+"\n"}),e.get(0).value=n,e.select();try{t=document.execCommand("copy")}catch(u){t=!1}return t},this.setData=function(t){var e="undefined"==typeof this.xvar.paintStartRowIndex;return i.data.set.call(this,t),i.body.repaint.call(this),e||i.body.scrollTo.call(this,{top:0}),h.call(this),i.scroller.resize.call(this),i.page.navigationUpdate.call(this),e=null,this},this.getList=function(t){return i.data.getList.call(this,t)},this.setHeight=function(t){return"100%"==t&&(t=this.$target.offsetParent().innerHeight()),this.$target.css({height:t}),this.$.container.root.css({height:t}),h.call(this),i.body.repaint.call(this,"reset"),i.scroller.resize.call(this),this},this.addRow=function(t,e,n){var a=this;return i.data.add.call(this,t,e,n),h.call(this),i.body.repaint.call(this,"reset"),n&&n.focus?setTimeout(function(){i.body.moveFocus.call(a,n.focus)},1):i.scroller.resize.call(this),this},this.appendToList=function(t){return i.data.append.call(this,t,function(){h.call(this),i.body.repaint.call(this),i.scroller.resize.call(this)}.bind(this)),this},this.removeRow=function(t){return i.data.remove.call(this,t),h.call(this),i.body.repaint.call(this,"reset"),i.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),i.scroller.resize.call(this),this},this.updateRow=function(t,e){return i.data.update.call(this,t,e),i.body.repaintRow.call(this,e),this},this.updateChildRows=function(t,e,n){return i.data.updateChild.call(this,t,e,n),this.xvar.paintStartRowIndex=void 0,this.xvar.paintStartColumnIndex=void 0,i.body.repaint.call(this),this},this.deleteRow=function(t){return i.data.deleteRow.call(this,t),h.call(this),i.body.repaint.call(this,"reset"),i.scroller.resize.call(this),this},this.setValue=function(t,e,n){var a=void 0;if(i.data.setValue.call(this,t,a,e,n)){var o=function(t,e,n,a,o,l){for(var s=0,r=e.length;s<r;s++)for(var d=0,c=e[s].cols.length;d<c;d++)e[s].cols[d].key==o&&(this.xvar.frozenRowIndex>n?i.body.repaintCell.call(this,"top-"+t,n,a,s,d,l):i.body.repaintCell.call(this,t+"-scroll",n,a,s,d,l))};o.call(this,"left-body",this.leftBodyRowData.rows,t,a,e,n),o.call(this,"body",this.bodyRowData.rows,t,a,e,n)}return this},this.addColumn=function(){var t={first:function(t){this.config.columns=[].concat(t).concat(this.config.columns)},last:function(t){this.config.columns=this.config.columns.concat([].concat(t))}};return function(i,n){if("undefined"==typeof i)throw"_column must not be null";if("undefined"==typeof n&&(n="last"),n in t)t[n].call(this,i);else{if(!e.isNumber(n))throw"invalid argument _cindex";if(e.isArray(i))for(var a=0,o=i.length;a<o;a++)this.config.columns.splice(n+a,0,i[a]);else this.config.columns.splice(n,0,i)}return r.call(this),this}}(),this.removeColumn=function(){var t={first:function(t){this.config.columns.splice(t,1)},last:function(){this.config.columns.splice(this.config.columns.length-1,1)}};return function(i){if("undefined"==typeof i&&(i="last"),i in t)t[i].call(this,i);else{if(!e.isNumber(i))throw"invalid argument _cindex";this.config.columns.splice(i,1)}return r.call(this),this}}(),this.updateColumn=function(t,i){if(!e.isNumber(i))throw"invalid argument _cindex";return this.config.columns.splice(i,1,t),r.call(this),this},this.setColumnWidth=function(t,e){return this.colGroup[this.xvar.columnResizerIndex]._width=t,this.needToPaintSum=!0,i.header.repaint.call(this),i.body.repaint.call(this,!0),i.scroller.resize.call(this),h.call(this),this},this.getColumnSortInfo=function(){var t={sortInfo:[]};for(var e in this.sortInfo)t.sortInfo.push({key:e,orderBy:this.sortInfo[e].orderBy,seq:this.sortInfo[e].seq});return t.sortInfo.sort(function(t,e){return t.seq>e.seq}),t.sortInfo},this.setColumnSort=function(t){return"undefined"!=typeof t&&(this.sortInfo=t,i.header.applySortStatus.call(this,t)),p.call(this,t||this.sortInfo),this},this.select=function(t,n){if(e.isNumber(t)){var a=t;this.config.multipleSelect?n&&n.selectedClear&&this.clearSelect():this.clearSelect(),i.data.select.call(this,a,void 0,n&&n.selected),i.body.updateRowState.call(this,["selected"],a,void 0)}return this},this.clickBody=function(t){return i.body.click.call(this,t),this},this.DBLClickBody=function(t){return i.body.dblClick.call(this,t),this},this.clearSelect=function(){return i.body.updateRowState.call(this,["selectedClear"]),i.data.clearSelect.call(this),this},this.selectAll=function(t){return i.data.selectAll.call(this,t&&t.selected,t),i.body.updateRowStateAll.call(this,["selected"]),this},this.exportExcel=function(t){var e=[];return e.push('<table border="1">'),e.push(i.header.getExcelString.call(this)),e.push(i.body.getExcelString.call(this)),e.push("</table>"),"undefined"==typeof t?e.join(""):(i.excel["export"].call(this,[e.join("")],t),this)},this.focus=function(t){if(i.body.moveFocus.call(this,t)){var e=void 0;for(var n in this.focusedColumn){e=jQuery.extend({},this.focusedColumn[n],!0);break}e&&this.select(e.dindex,{selectedClear:!0})}else if("undefined"==typeof this.selectedDataIndexs[0])this.select(0);else{var a=this.selectedDataIndexs[0],o={UP:function(){a>0&&(this.select(a-1,{selectedClear:!0}),i.body.moveFocus.call(this,a-1))},DOWN:function(){a<this.list.length-1&&(this.select(a+1,{selectedClear:!0}),i.body.moveFocus.call(this,a+1))},HOME:function(){this.select(0,{selectedClear:!0}),i.body.moveFocus.call(this,0)},END:function(){this.select(this.list.length-1,{selectedClear:!0}),i.body.moveFocus.call(this,this.list.length-1)}};t in o&&o[t].call(this)}return this},this.destroy=function(){var e=this.instanceId;return this.$target.empty(),this.list=[],t.grid_instance=ax5.util.filter(t.grid_instance,function(){return this.instanceId!=e}),null},this.main=function(){t.grid_instance=t.grid_instance||[],t.grid_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),i=ax5.ui.grid}(),function(){var t=ax5.ui.grid,e=ax5.util,i={focusClear:function(){var t=this,e=void 0;for(var i in t.focusedColumn)e=t.focusedColumn[i],e&&t.$.panel[e.panelName].find('[data-ax5grid-tr-data-index="'+e.dindex+'"]').find('[data-ax5grid-column-rowindex="'+e.rowIndex+'"][data-ax5grid-column-colindex="'+e.colIndex+'"]').removeAttr("data-ax5grid-column-focused");t.focusedColumn={}},clear:function(){var t=this,e=void 0;for(var i in t.selectedColumn)e=t.selectedColumn[i],e&&t.$.panel[e.panelName].find('[data-ax5grid-tr-data-index="'+e.dindex+'"]').find('[data-ax5grid-column-rowindex="'+e.rowIndex+'"][data-ax5grid-column-colindex="'+e.colIndex+'"]').removeAttr("data-ax5grid-column-selected");t.selectedColumn={}},init:function(e){var n=this;if(this.isInlineEditing)for(var a in this.inlineEditing)if(a==e.dindex+"_"+e.colIndex+"_"+e.rowIndex)return this;i.focusClear.call(n),n.focusedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]={panelName:e.panelName,dindex:e.dindex,doindex:e.doindex,rowIndex:e.rowIndex,colIndex:e.colIndex,colspan:e.colspan},i.clear.call(n),n.xvar.selectedRange={start:[e.dindex,e.rowIndex,e.colIndex,e.colspan-1],end:null},n.selectedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]=function(t){return!t&&{panelName:e.panelName,dindex:e.dindex,doindex:e.doindex,rowIndex:e.rowIndex,colIndex:e.colIndex,colspan:e.colspan}}(n.selectedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]),this.$.panel[e.panelName].find('[data-ax5grid-tr-data-index="'+e.dindex+'"]').find('[data-ax5grid-column-rowindex="'+e.rowIndex+'"][data-ax5grid-column-colindex="'+e.colIndex+'"]').attr("data-ax5grid-column-focused","true").attr("data-ax5grid-column-selected","true"),this.isInlineEditing&&t.body.inlineEdit.deActive.call(this,"RETURN")},update:function(t){var e=this,n=void 0,a=void 0,o=void 0,l=void 0,s=void 0;e.xvar.selectedRange.end=[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],i.clear.call(e);var r={r:{s:Math.min(e.xvar.selectedRange.start[0],e.xvar.selectedRange.end[0]),e:Math.max(e.xvar.selectedRange.start[0],e.xvar.selectedRange.end[0])},c:{s:Math.min(e.xvar.selectedRange.start[2],e.xvar.selectedRange.end[2]),e:Math.max(e.xvar.selectedRange.start[2]+e.xvar.selectedRange.start[3],e.xvar.selectedRange.end[2]+e.xvar.selectedRange.end[3])}};for(n=r.r.s;n<=r.r.e;n++)for(s=this.bodyRowTable.rows.length,l=0;l<s;l++)for(o=r.c.s;o<=r.c.e;o++){var d=[],c="";e.xvar.frozenRowIndex>n&&d.push("top"),e.xvar.frozenColumnIndex>o&&d.push("left"),d.push("body"),"top"!==d[0]&&d.push("scroll"),c=d.join("-"),e.selectedColumn[n+"_"+o+"_"+l]={panelName:c,dindex:n,rowIndex:l,colIndex:o,colspan:t.colspan},d=null,c=null}n=null,a=null,o=null,l=null;for(var u in e.selectedColumn){var h=e.selectedColumn[u];h&&e.$.panel[h.panelName].find('[data-ax5grid-tr-data-index="'+h.dindex+'"]').find('[data-ax5grid-column-rowindex="'+h.rowIndex+'"][data-ax5grid-column-colindex="'+h.colIndex+'"]').attr("data-ax5grid-column-selected","true")}}},n={on:function(t){var a=this;this.inlineEditing[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]||(i.init.call(a,t),this.$.container.body.on("mousemove.ax5grid-"+this.instanceId,'[data-ax5grid-column-attr="default"]',function(t){this.getAttribute("data-ax5grid-column-rowIndex")&&(i.update.call(a,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),doindex:Number(this.getAttribute("data-ax5grid-data-o-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))}),e.stopEvent(t))}).on("mouseup.ax5grid-"+this.instanceId,function(){n.off.call(a)}).on("mouseleave.ax5grid-"+this.instanceId,function(){n.off.call(a)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1))},off:function(){this.$.container.body.off("mousemove.ax5grid-"+this.instanceId).off("mouseup.ax5grid-"+this.instanceId).off("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},a=function(t,e,i,n){var a=this,o=this.config,l={selected:function(t,e){if(this.list[e])for(var i=this.$.livePanelKeys.length;i--;)this.$.panel[this.$.livePanelKeys[i]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",this.list[e][o.columnKeys.selected])},selectedClear:function(){var t=this.list.length,e=void 0;if(this.proxyList){for(;t--;)this.list[t][o.columnKeys.selected]=!1;for(t=this.proxyList.length;t--;){if(this.list[i][o.columnKeys.selected])for(e=this.$.livePanelKeys.length;e--;)this.$.panel[this.$.livePanelKeys[e]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",!1);this.proxyList[t][o.columnKeys.selected]=!1;var i=this.proxyList[t].__original_index__}}else for(;t--;){if(this.list[t][o.columnKeys.selected])for(e=this.$.livePanelKeys.length;e--;)this.$.panel[this.$.livePanelKeys[e]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",!1);this.list[t][o.columnKeys.selected]=!1}},cellChecked:function(t,e,i){var n=(i.key,i.rowIndex),a=i.colIndex,o=function(){var e=[];return this.xvar.frozenRowIndex>t&&e.push("top"),this.xvar.frozenColumnIndex>a&&e.push("left"),e.push("body"),"top"!==e[0]&&e.push("scroll"),e.join("-")}.call(this);this.$.panel[o].find('[data-ax5grid-tr-data-index="'+t+'"]').find('[data-ax5grid-column-rowIndex="'+n+'"][data-ax5grid-column-colIndex="'+a+'"]').find('[data-ax5grid-editor="checkbox"]').attr("data-ax5grid-checked",""+i.checked)}};"undefined"==typeof i&&(i=e),t.forEach(function(t){if(!l[t])throw"invaild state name";l[t].call(a,e,i,n)})},o=function(e,i){var n=this,a=(this.config,{selected:function(e){t.body.repaint.call(this,!0)}});e.forEach(function(t){if(!a[t])throw"invaild state name";a[t].call(n,i)})},l=function(){var i=this;this.$.container.body.on("click","[data-ax5grid-column-attr]",function(e){var n=void 0,o=void 0,l=void 0,s=void 0,r=void 0,d=void 0,c=void 0,u=void 0,h={"default":function(n){var o=i.bodyRowMap[n.rowIndex+"_"+n.colIndex],l={self:i,page:i.page,list:i.list,item:i.list[n.doindex],dindex:n.dindex,doindex:n.doindex,rowIndex:n.rowIndex,colIndex:n.colIndex,column:o,value:i.list[n.dindex][o.key]};if(o.editor&&"checkbox"===o.editor.type){var s=t.data.getValue.call(i,n.dindex,n.doindex,o.key),r=void 0,d=void 0;d=o.editor.config&&o.editor.config.trueValue?(r=!(s==o.editor.config.trueValue))?o.editor.config.trueValue:o.editor.config.falseValue:r=0==s||"false"==s||s<"1"?"true":"false",t.data.setValue.call(i,n.dindex,n.doindex,o.key,d),a.call(i,["cellChecked"],n.dindex,n.doindex,{key:o.key,rowIndex:n.rowIndex,colIndex:n.colIndex,editorConfig:o.editor.config,checked:r})}i.config.body.onClick&&i.config.body.onClick.call(l,l,e)},rowSelector:function(e){var n=i.list[e.doindex];return!n[i.config.columnKeys.disableSelection]&&(i.config.multipleSelect||i.selectedDataIndexs[0]===e.doindex||(a.call(i,["selectedClear"]),t.data.clearSelect.call(i)),t.data.select.call(i,e.dindex,e.doindex,void 0,{internalCall:!0}),void a.call(i,["selected"],e.dindex,e.doindex))},lineNumber:function(t){},"tree-control":function(t,e){b.call(i,t.dindex,t.doindex)}};n=this.getAttribute("data-ax5grid-panel-name"),o=this.getAttribute("data-ax5grid-column-attr"),l=Number(this.getAttribute("data-ax5grid-column-row")),s=Number(this.getAttribute("data-ax5grid-column-col")),c=Number(this.getAttribute("data-ax5grid-column-rowIndex")),u=Number(this.getAttribute("data-ax5grid-column-colIndex")),r=Number(this.getAttribute("data-ax5grid-data-index")),d=Number(this.getAttribute("data-ax5grid-data-o-index")),o in h&&h[o]({panelName:n,attr:o,row:l,col:s,dindex:r,doindex:d,rowIndex:c,colIndex:u},this)}),this.$.container.body.on("dblclick","[data-ax5grid-column-attr]",function(n){var a=void 0,o=void 0,l=void 0,s=void 0,r=void 0,d=void 0,c=void 0,u=void 0,h={"default":function(a){if(i.isInlineEditing)for(var o in i.inlineEditing)if(o==a.dindex+"_"+a.colIndex+"_"+a.rowIndex)return this;var l=i.bodyRowMap[a.rowIndex+"_"+a.colIndex],s="";l&&(i.list[r].__isGrouping||(s=t.data.getValue.call(i,r,d,l.key)));var c=i.colGroup[a.colIndex].editor;if(e.isObject(c))t.body.inlineEdit.active.call(i,i.focusedColumn,n,s);else if(i.config.body.onDBLClick){var u={self:i,page:i.page,list:i.list,item:i.list[a.dindex],dindex:a.dindex,doindex:a.doindex,rowIndex:a.rowIndex,colIndex:a.colIndex,column:l,value:i.list[a.dindex][l.key]};i.config.body.onDBLClick.call(u)}},rowSelector:function(t){},lineNumber:function(t){}};a=this.getAttribute("data-ax5grid-panel-name"),o=this.getAttribute("data-ax5grid-column-attr"),l=Number(this.getAttribute("data-ax5grid-column-row")),s=Number(this.getAttribute("data-ax5grid-column-col")),c=Number(this.getAttribute("data-ax5grid-column-rowIndex")),u=Number(this.getAttribute("data-ax5grid-column-colIndex")),r=Number(this.getAttribute("data-ax5grid-data-index")),d=Number(this.getAttribute("data-ax5grid-data-o-index")),o in h&&h[o]({panelName:a,attr:o,row:l,col:s,dindex:r,doindex:d,rowIndex:c,colIndex:u})}),this.config.contextMenu&&this.$.container.body.on("contextmenu",function(t){var n=void 0,a=void 0,o=void 0,l=void 0,s=void 0,r=void 0,d=void 0,c={};n=e.findParentNode(t.target,function(t){if(t.getAttribute("data-ax5grid-column-attr"))return!0}),n&&(l=Number(n.getAttribute("data-ax5grid-column-rowIndex")),s=Number(n.getAttribute("data-ax5grid-column-colIndex")),a=Number(n.getAttribute("data-ax5grid-data-index")),o=Number(n.getAttribute("data-ax5grid-data-o-index")),d=i.bodyRowMap[l+"_"+s],r=i.list[a]),i.contextMenu||(i.contextMenu=new ax5.ui.menu),i.contextMenu.setConfig(i.config.contextMenu),c={element:n,dindex:a,doindex:o,rowIndex:l,colIndex:s,item:r,column:d,gridSelf:i},i.contextMenu.popup(t,{filter:function(){return i.config.contextMenu.popupFilter.call(this,this,c)},param:c}),e.stopEvent(t.originalEvent),n=null,a=null,o=null,l=null,s=null,r=null,d=null,c=null}),this.$.container.body.on("mousedown",'[data-ax5grid-column-attr="default"]',function(t){return!i.xvar.touchmoved&&void(this.getAttribute("data-ax5grid-column-rowIndex")&&n.on.call(i,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),doindex:Number(this.getAttribute("data-ax5grid-data-o-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))}))}).on("dragstart",function(t){return e.stopEvent(t),!1}),s.call(this),this.xvar.paintRowCountMargin=this.config.virtualScrollYCountMargin,this.xvar.paintRowCountTopMargin=this.config.virtualScrollYCountMargin-Math.floor(this.config.virtualScrollYCountMargin/2),this.config.virtualScrollAccelerated?this.__throttledScroll=e.throttle(function(t,e){this.config.virtualScrollY&&!e.noRepaint&&"top"in t?u.call(this):this.config.virtualScrollX&&!e.noRepaint&&"left"in t&&u.call(this),e.callback&&e.callback()},this.config.virtualScrollAcceleratedDelayTime):this.__throttledScroll=!1},s=function(){var e=this.config,i=t.util.divideTableByFrozenColumnIndex(this.bodyRowTable,this.xvar.frozenColumnIndex);if(this.asideBodyRowData=function(t){for(var i={rows:[]},n=0,a=t.rows.length;n<a;n++)if(i.rows[n]={cols:[]},0===n){var o={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},l={};e.showLineNumber&&(l=jQuery.extend({},o,{width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),i.rows[n].cols.push(l)),e.showRowSelector&&(l=jQuery.extend({},o,{width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),i.rows[n].cols.push(l))}return i}.call(this,this.bodyRowTable),this.leftBodyRowData=i.leftData,this.bodyRowData=i.rightData,e.body.grouping){var n=t.util.divideTableByFrozenColumnIndex(this.bodyGroupingTable,this.xvar.frozenColumnIndex);this.asideBodyGroupingData=function(t){for(var i={rows:[]},n=0,a=t.rows.length;n<a;n++)if(i.rows[n]={cols:[]},0===n){var o={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},l={};e.showLineNumber&&(l=jQuery.extend({},o,{width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),i.rows[n].cols.push(l)),e.showRowSelector&&(l=jQuery.extend({},o,{width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),i.rows[n].cols.push(l))}return i}.call(this,this.bodyGroupingTable),this.leftBodyGroupingData=n.leftData,this.bodyGroupingData=n.rightData,this.bodyGroupingMap=t.util.makeBodyRowMap.call(this,this.bodyGroupingTable)}if(this.leftFootSumData={},this.footSumData={},this.config.footSum){var a=t.util.divideTableByFrozenColumnIndex(this.footSumTable,this.xvar.frozenColumnIndex);this.leftFootSumData=a.leftData,this.footSumData=a.rightData}},r=function(i,n,a,o,l,s){var r=o.key,d={"<":"&lt;",">":"&gt;"};if("__d-index__"===r)return"undefined"!=typeof n.__index?n.__index+1:"";if("__d-checkbox__"===r)return'<div class="checkBox" style="max-height: '+(o.width-10)+"px;min-height: "+(o.width-10)+'px;"></div>';if(o.editor&&function(e){return e.type in t.inlineEditor&&"inline"==t.inlineEditor[e.type].editMode}(o.editor))return l=l||t.data.getValue.call(this,a,n.__origin_index__,r),e.isFunction(o.editor.disabled)&&o.editor.disabled.call({list:i,dindex:a,item:i[a],key:r,value:l})?l:s?l:t.inlineEditor[o.editor.type].getHtml(this,o.editor,l);var c={formatter:function(){var s={key:r,value:l||t.data.getValue.call(this,a,n.__origin_index__,r),dindex:a,item:n,list:i};return e.isFunction(o.formatter)?o.formatter.call(s):t.formatter[o.formatter].call(s)},"default":function(){var e="";return"undefined"!=typeof l?e=l:(l=/[\.\[\]]/.test(r)?t.data.getValue.call(this,a,n.__origin_index__,r):n[r],null!==l&&"undefined"!=typeof l&&(e=l)),"string"!=typeof e?e:e.replace(/[<>]/g,function(t){return d[t]||t})},treeControl:function(t){var e=this.config,i=this.config.tree.columnKeys,o="";return n[i.children].length?(o+='<a data-ax5grid-data-index="'+a+'" data-ax5grid-column-attr="tree-control" data-ax5grid-tnode-arrow="" style="width: '+e.tree.arrowWidth+"px;padding-left:"+n[i.depth]*e.tree.indentWidth+'px;">',o+=n[i.collapse]?e.tree.icons.collapsedArrow:e.tree.icons.openedArrow,o+="</a>"):o+='<span data-ax5grid-tnode-arrow="" style="width: '+e.tree.arrowWidth+"px;padding-left:"+n[i.depth]*e.tree.indentWidth+'px;">&nbsp;</span>',o+='<span data-ax5grid-tnode-item="'+(n[i.children].length?"group":"item")+'" style="width: '+e.tree.iconWidth+'px;">',o+=n[i.children].length?n[i.collapse]?e.tree.icons.collapsedGroupIcon:e.tree.icons.groupIcon:e.tree.icons.itemIcon,o+="</span>",o+t}},u=o.formatter?c.formatter.call(this):c["default"].call(this);return this.config.tree.use&&o.treeControl&&(u=c.treeControl.call(this,u)),u},d=function(i,n,a){var o=void 0,l=void 0,s=a.key,r=a.label;return"undefined"==typeof s?(l={key:s,list:i.__groupingList,groupBy:i.__groupingBy},o=e.isFunction(r)?r.call(l):r,
i[a.colIndex]=o,o):"__d-index__"===s?"":"__d-checkbox__"===s?"":a.collector?(l={key:s,list:i.__groupingList},o=e.isFunction(a.collector)?a.collector.call(l):t.collector[a.collector].call(l),i[a.colIndex]=o,a.formatter?(l.value=o,e.isFunction(a.formatter)?a.formatter.call(l):t.formatter[a.formatter].call(l)):o):"&nbsp;"},c=function(i,n){var a=n.key,o=n.label;if("undefined"==typeof a)return o;if("__d-index__"===a||"__d-checkbox__"===a)return"&nbsp;";if(n.collector){var l={key:a,list:i},s=void 0;return s=e.isFunction(n.collector)?n.collector.call(l):t.collector[n.collector].call(l),n.formatter?(l.value=s,e.isFunction(n.formatter)?n.formatter.call(l):t.formatter[n.formatter].call(l)):s}return"&nbsp;"},u=function(i){var n=this.config,a=this.proxyList?this.proxyList:this.list;i&&(s.call(this),this.xvar.paintStartRowIndex=void 0,this.xvar.paintStartColumnIndex=void 0);var o=void 0,l=void 0;if(this.config.virtualScrollY?(l=o=Math.floor(-this.$.panel["body-scroll"].position().top/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,this.xvar.paintRowCountTopMargin<o&&(o-=this.xvar.paintRowCountTopMargin)):o=this.xvar.frozenRowIndex,isNaN(o))return this;var u=0,h=0,p=null,f=null,g=-this.$.panel["body-scroll"].position().left;if(this.config.virtualScrollX){for(var m=this.xvar.frozenColumnIndex;m<this.colGroup.length;m++)this.colGroup[m]._sx=m==this.xvar.frozenColumnIndex?0:this.colGroup[m-1]._ex,this.colGroup[m]._ex=this.colGroup[m]._sx+this.colGroup[m]._width,this.colGroup[m]._sx<=g&&this.colGroup[m]._ex>=g&&(u=m),this.colGroup[m]._sx<=g+this.xvar.bodyWidth&&this.colGroup[m]._ex>=g+this.xvar.bodyWidth&&(h=m,null===p&&(p=this.colGroup[u]._sx),null===f&&(f=this.xvar.scrollContentWidth-this.colGroup[m]._ex));null===p&&(p=0),null===f&&(f=0),this.$.panel["top-body-scroll"].css({"padding-left":p,"padding-right":f}),this.$.panel["body-scroll"].css({"padding-left":p,"padding-right":f}),this.$.panel["bottom-body-scroll"].css({"padding-left":p,"padding-right":f})}var x="undefined"==typeof this.xvar.paintStartRowIndex,v=this.headerColGroup,b=this.asideBodyRowData,y=this.leftBodyRowData,w=this.bodyRowData,_=this.leftFootSumData,I=this.footSumData,k=this.asideBodyGroupingData,C=this.leftBodyGroupingData,$=this.bodyGroupingData,S=n.body.align,T=void 0,E=void 0;if(this.config.virtualScrollY?(E=Math.ceil(this.xvar.bodyHeight/this.xvar.bodyTrHeight),T=E+(this.xvar.paintRowCountMargin||1)):E=T=a.length,this.xvar.paintRowCountTopMargin<o&&Math.abs(this.xvar.paintStartRowIndex-o)<=this.xvar.paintRowCountTopMargin&&(o=this.xvar.paintStartRowIndex),this.xvar.dataRowCount===a.length&&this.xvar.paintStartRowIndex===o&&this.xvar.paintRowCount===T&&this.xvar.paintStartColumnIndex===u&&this.xvar.paintEndColumnIndex===h)return this;(p||f)&&(v=[].concat(v).splice(u-this.xvar.frozenColumnIndex,h-u+1+this.xvar.frozenColumnIndex),w=t.util.getTableByStartEndColumnIndex(w,u,h),n.body.grouping&&($=t.util.getTableByStartEndColumnIndex($,u,h)),n.footSum&&(I=t.util.getTableByStartEndColumnIndex(I,u,h)),this.xvar.paintStartColumnIndex===u&&this.xvar.paintEndColumnIndex===h||(this.needToPaintSum=!0)),this.xvar.scrollContentHeight=this.xvar.bodyTrHeight*(a.length-this.xvar.frozenRowIndex),this.xvar.scrollContentHeight<0&&(this.xvar.scrollContentHeight=0),this.$.livePanelKeys=[];var z=function(t,i,a,o,l,s){var c=this.$.panel[t];if(!x&&!s)return this.$.livePanelKeys.push(t),!1;var u=[],h=void 0,p=void 0,f=void 0,g=void 0,m=void 0,v=void 0,b=void 0,y=void 0,w=void 0,_=void 0,I=void 0,k=function(){return"undefined"!=typeof s&&"undefined"!=typeof s.paintStartRowIndex||(s={paintStartRowIndex:0,paintRowCount:l.length},!1)}(),C="#fff 0px, #fff "+(n.body.columnHeight-n.body.columnBorderWidth)+"px, #eee "+(n.body.columnHeight-n.body.columnBorderWidth)+"px, #eee "+n.body.columnHeight+"px";for(k&&u.push('<div style="background:repeating-linear-gradient(to top, '+C+");font-size:0;line-height:0;height: "+(s.paintStartRowIndex-this.xvar.frozenRowIndex)*s.bodyTrHeight+'px;"></div>'),u.push('<table border="0" cellpadding="0" cellspacing="0">'),u.push("<colgroup>"),h=0,p=i.length;h<p;h++)u.push('<col style="width:'+i[h]._width+'px;"  />');for(u.push("<col  />"),u.push("</colgroup>"),f=s.paintStartRowIndex,g=function(){var t=void 0;return t=l.length,s.paintRowCount+s.paintStartRowIndex<t&&(t=s.paintRowCount+s.paintStartRowIndex),t}();f<g;f++)if(l[f]){var $=!1,T=void 0,E="undefined"!=typeof l[f].__origin_index__?l[f].__origin_index__:f;o&&"__isGrouping"in l[f]?(T=o,$=!0):T=a;for(m=0,v=T.rows.length;m<v;m++){for(u.push('<tr class="tr-'+f%4,n.body.trStyleClass?e.isFunction(n.body.trStyleClass)?" "+n.body.trStyleClass.call({item:l[f],index:f},l[f],f):" "+n.body.trStyleClass:"",'"',$?' data-ax5grid-grouping-tr="true"':"",' data-ax5grid-tr-data-index="'+f+'"',' data-ax5grid-tr-data-o-index="'+E+'"',' data-ax5grid-selected="'+(l[f][n.columnKeys.selected]||"false")+'"',' data-ax5grid-disable-selection="'+(l[f][n.columnKeys.disableSelection]||"false")+'"',">"),b=0,y=T.rows[m].cols.length;b<y;b++)w=T.rows[m].cols[b],_=n.body.columnHeight*w.rowspan-n.body.columnBorderWidth,I=w.align||S,u.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-data-o-index="'+E+'" ','data-ax5grid-column-row="'+m+'" ','data-ax5grid-column-col="'+b+'" ','data-ax5grid-column-rowIndex="'+w.rowIndex+'" ','data-ax5grid-column-colIndex="'+w.colIndex+'" ','data-ax5grid-column-attr="'+(w.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[f+"_"+w.colIndex+"_"+w.rowIndex],this.selectedColumn[f+"_"+w.colIndex+"_"+w.rowIndex]),'colspan="'+w.colspan+'" ','rowspan="'+w.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:l[f],index:f})+" ":t.styleClass+" "),n.body.columnBorderWidth&&(i+="hasBorder "),b==y-1&&(i+="isLastColumn "),i}.call(this,w)+'" ','style="height: '+_+'px;min-height: 1px;">'),u.push(function(t){return'<span data-ax5grid-cellHolder="'+(w.multiLine?"multiLine":"")+'" '+(I?'data-ax5grid-text-align="'+I+'"':"")+'" >'}(_),$?d.call(this,l[f],f,w):r.call(this,l,l[f],f,w),"</span>"),u.push("</td>");u.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-data-o-index="'+E+'" ','data-ax5grid-column-attr="default" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),u.push("</tr>")}}return u.push("</table>"),k&&l.length&&u.push('<div style="background:repeating-linear-gradient(to bottom, '+C+");font-size:0;line-height:0;height: "+(l.length-f)*s.bodyTrHeight+'px;"></div>'),c.empty(),u=u.join(""),c.get(0).innerHTML=u,this.$.livePanelKeys.push(t),!0},j=function(t,i,a,o,l){var s=this.$.panel[t];if(!x&&!l)return this.$.livePanelKeys.push(t),!1;var r=[],d=void 0,u=void 0,h=void 0,p=void 0,f=void 0,g=void 0,m=void 0,v=void 0,b=void 0;for(r.push('<table border="0" cellpadding="0" cellspacing="0">'),r.push("<colgroup>"),d=0,u=i.length;d<u;d++)r.push('<col style="width:'+i[d]._width+'px;"  />');for(r.push("<col  />"),r.push("</colgroup>"),h=0,p=a.rows.length;h<p;h++){for(r.push('<tr class="tr-sum">'),f=0,g=a.rows[h].cols.length;f<g;f++)m=a.rows[h].cols[f],v=n.body.columnHeight*m.rowspan-n.body.columnBorderWidth,b=m.align||S,r.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+h+'" ','data-ax5grid-column-colIndex="'+m.colIndex+'" ','data-ax5grid-column-attr="'+(m.columnAttr||"sum")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn["sum_"+m.colIndex+"_"+h],this.selectedColumn["sum_"+m.colIndex+"_"+h]),'colspan="'+m.colspan+'" ','rowspan="'+m.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),n.body.columnBorderWidth&&(i+="hasBorder "),f==g-1&&(i+="isLastColumn "),i}.call(this,m)+'" ','style="height: '+v+'px;min-height: 1px;">'),r.push(function(t){return'<span data-ax5grid-cellHolder="'+(m.multiLine?"multiLine":"")+'" '+(b?'data-ax5grid-text-align="'+b+'"':"")+'" >'}(v),c.call(this,o,m),"</span>"),r.push("</td>");r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),r.push("</tr>")}return r.push("</table>"),s.empty(),r=r.join(""),s.get(0).innerHTML=r,this.$.livePanelKeys.push(t),!0},P=function(t,i,a,o,l){for(var s=[],r=this.$.panel[t],d={},c=void 0,u=r.find("tr"),h=0,p=u.length;h<p;h++){var f=void 0,g=void 0;f=u[h].childNodes,g=[];for(var m=0,x=f.length;m<x;m++){var v={$:jQuery(f[m])};"null"!=v.$.attr("data-ax5grid-column-col")&&(v.dindex=v.$.attr("data-ax5grid-data-index"),v.tri=v.$.attr("data-ax5grid-column-row"),v.ci=v.$.attr("data-ax5grid-column-col"),v.rowIndex=v.$.attr("data-ax5grid-column-rowIndex"),v.colIndex=v.$.attr("data-ax5grid-column-colIndex"),v.rowspan=v.$.attr("rowspan"),v.text=v.$.text(),g.push(v)),v=null}s.push(g)}if(s.length>1){c=!1;for(var b=function(t,a){for(var o=[],l=function(a,l){!i[a].editor&&function(){return!e.isArray(n.body.mergeCells)||ax5.util.search(n.body.mergeCells,i[a].key)>-1}()&&(d[a]&&function(){if(o.length>0){var e=!0;return o.forEach(function(i){s[t-1][i].text!=s[t][i].text&&(e=!1)}),e}return!0}()&&d[a].text==s[t][a].text?(s[t][a].rowspan=0,s[d[a].ri][a].rowspan++,c=!0):d[a]={ri:t,ci:a,text:s[t][a].text},o.push(a))},r=0,u=s[t].length;r<u;r++)l(r,u)},y=0,w=s.length;y<w;y++)b(y,w);if(c)for(var _=0,I=s.length;_<I;_++)for(var k=0,C=s[_].length;k<C;k++)0==s[_][k].rowspan?s[_][k].$.remove():s[_][k].rowspan>1&&s[_][k].$.attr("rowspan",s[_][k].rowspan).addClass("merged")}},N={paintStartRowIndex:o,paintRowCount:T,paintStartColumnIndex:u,paintEndColumnIndex:h,nopaintLeftColumnsWidth:p,nopaintRightColumnsWidth:f,bodyTrHeight:this.xvar.bodyTrHeight,virtualScrollX:this.config.virtualScrollX,virtualScrollY:this.config.virtualScrollY},D=jQuery.extend({},N,{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex});n.asidePanelWidth>0&&(this.xvar.frozenRowIndex>0&&z.call(this,"top-aside-body",this.asideColGroup,b,k,a.slice(0,this.xvar.frozenRowIndex),D),z.call(this,"aside-body-scroll",this.asideColGroup,b,k,a,N),n.footSum&&j.call(this,"bottom-aside-body",this.asideColGroup,b,null,this.list)),this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&z.call(this,"top-left-body",this.leftHeaderColGroup,y,C,a.slice(0,this.xvar.frozenRowIndex),D),z.call(this,"left-body-scroll",this.leftHeaderColGroup,y,C,a,N),n.footSum&&this.needToPaintSum&&j.call(this,"bottom-left-body",this.leftHeaderColGroup,_,this.list)),this.xvar.frozenRowIndex>0&&z.call(this,"top-body-scroll",v,w,$,a.slice(0,this.xvar.frozenRowIndex),D),z.call(this,"body-scroll",v,w,$,a,N),n.footSum&&this.needToPaintSum&&j.call(this,"bottom-body-scroll",v,I,this.list,N),n.rightSum,n.body.mergeCells&&a.length&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&P.call(this,"top-left-body",this.leftHeaderColGroup,y,a.slice(0,this.xvar.frozenRowIndex)),P.call(this,"left-body-scroll",this.leftHeaderColGroup,y,a,N)),this.xvar.frozenRowIndex>0&&P.call(this,"top-body-scroll",this.headerColGroup,w,a.slice(0,this.xvar.frozenRowIndex)),P.call(this,"body-scroll",this.headerColGroup,w,a,N)),this.xvar.virtualPaintStartRowIndex=l,this.xvar.paintStartRowIndex=o,this.xvar.paintRowCount=T,this.xvar.virtualPaintRowCount=E,this.xvar.paintStartColumnIndex=u,this.xvar.paintEndColumnIndex=h,this.xvar.nopaintLeftColumnsWidth=p,this.xvar.nopaintRightColumnsWidth=f,this.xvar.dataRowCount=a.length,this.needToPaintSum=!1,t.page.statusUpdate.call(this)},h=function(i,n,a,o,l,s){var u=this,h=this.config,p=this.list,f=this.$.panel[i].find('[data-ax5grid-tr-data-index="'+n+'"]').find('[data-ax5grid-column-rowindex="'+o+'"][data-ax5grid-column-colindex="'+l+'"]').find("[data-ax5grid-cellholder]"),g=this.colGroup,m=g[l];f.html(r.call(this,p,p[n],n,m)),m.editor&&m.editor.updateWith&&m.editor.updateWith.forEach(function(e){g.forEach(function(i){if(i.key==e){var a=i.rowIndex,o=i.colIndex,l=t.util.findPanelByColumnIndex.call(u,n,o,a).panelName,s=u.$.panel[l].find('[data-ax5grid-tr-data-index="'+n+'"]').find('[data-ax5grid-column-rowindex="'+a+'"][data-ax5grid-column-colindex="'+o+'"]').find("[data-ax5grid-cellholder]");s.html(r.call(u,p,p[n],n,i))}})});var x=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,v=this.headerColGroup,b=this.leftFootSumData,y=this.footSumData,w=this.leftBodyGroupingData,_=this.bodyGroupingData,I=h.body.align,k=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,C={paintStartRowIndex:x,paintRowCount:k,bodyTrHeight:this.xvar.bodyTrHeight};(this.xvar.nopaintLeftColumnsWidth||this.xvar.nopaintRightColumnsWidth)&&(v=[].concat(v).splice(this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex-this.xvar.paintStartColumnIndex+1),h.body.grouping&&(_=t.util.getTableByStartEndColumnIndex(_,this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex)),h.footSum&&(y=t.util.getTableByStartEndColumnIndex(y,this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex)));var $=function(t,i,n,a,o){var l=this.$.panel[t],s=[],r=void 0,d=void 0,u=void 0,p=void 0,f=void 0,g=void 0,m=void 0,x=void 0,v=void 0;for(s.push('<table border="0" cellpadding="0" cellspacing="0">'),s.push("<colgroup>"),r=0,d=i.length;r<d;r++)s.push('<col style="width:'+i[r]._width+'px;"  />');for(s.push("<col  />"),s.push("</colgroup>"),u=0,p=n.rows.length;u<p;u++){for(s.push('<tr class="tr-sum">'),f=0,g=n.rows[u].cols.length;f<g;f++)m=n.rows[u].cols[f],x=h.body.columnHeight*m.rowspan-h.body.columnBorderWidth,v=m.align||I,s.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+u+'" ','data-ax5grid-column-colIndex="'+m.colIndex+'" ','data-ax5grid-column-attr="'+(m.columnAttr||"sum")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn["sum_"+m.colIndex+"_"+u],this.selectedColumn["sum_"+m.colIndex+"_"+u]),'colspan="'+m.colspan+'" ','rowspan="'+m.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),h.body.columnBorderWidth&&(i+="hasBorder "),f==g-1&&(i+="isLastColumn "),i}.call(this,m)+'" ','style="height: '+x+'px;min-height: 1px;">'),s.push(function(t){return'<span data-ax5grid-cellHolder="'+(m.multiLine?"multiLine":"")+'" '+(v?'data-ax5grid-text-align="'+v+'"':"")+'" >'}(x),c.call(this,a,m),"</span>"),s.push("</td>");s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+h.body.columnHeight+'px;min-height: 1px;" ',"></td>"),s.push("</tr>")}return s.push("</table>"),l.empty().get(0).innerHTML=s.join(""),!0},S=function(t,i,n,a,o){var l=this.$.panel[t],s=[],r=void 0,c=void 0,u=void 0,p=void 0,f=void 0,g=void 0,m=void 0,x=void 0,v=void 0;for(r=o.paintStartRowIndex,c=function(){var t=void 0;return t=a.length,o.paintRowCount+o.paintStartRowIndex<t&&(t=o.paintRowCount+o.paintStartRowIndex),t}();r<c;r++)if(a[r]&&n&&"__isGrouping"in a[r]){var b=n;for(s=[],u=0,p=b.rows.length;u<p;u++){for(f=0,g=b.rows[u].cols.length;f<g;f++)m=b.rows[u].cols[f],x=h.body.columnHeight*m.rowspan-h.body.columnBorderWidth,v=m.align||I,s.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+r+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+m.rowIndex+'" ','data-ax5grid-column-colIndex="'+m.colIndex+'" ','data-ax5grid-column-attr="'+(m.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[r+"_"+m.colIndex+"_"+m.rowIndex],this.selectedColumn[r+"_"+m.colIndex+"_"+m.rowIndex]),'colspan="'+m.colspan+'" ','rowspan="'+m.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:a[r],index:r})+" ":t.styleClass+" "),h.body.columnBorderWidth&&(i+="hasBorder "),f==g-1&&(i+="isLastColumn "),i}.call(this,m)+'" ','style="height: '+x+'px;min-height: 1px;">'),s.push(function(t){return'<span data-ax5grid-cellHolder="'+(m.multiLine?"multiLine":"")+'" '+(v?'data-ax5grid-text-align="'+v+'"':"")+'" >'}(x),d.call(this,a[r],r,m),"</span>"),s.push("</td>");s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+r+'" ','data-ax5grid-column-attr="default" ','style="height: '+h.body.columnHeight+'px;min-height: 1px;" ',"></td>")}l.find('tr[data-ax5grid-tr-data-index="'+r+'"]').empty().get(0).innerHTML=s.join("")}};h.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&S.call(this,"top-left-body",v,w,p.slice(0,this.xvar.frozenRowIndex),{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex,bodyTrHeight:this.xvar.bodyTrHeight}),S.call(this,"left-body-scroll",v,w,p,C)),this.xvar.frozenRowIndex>0&&S.call(this,"top-body-scroll",v,_,p.slice(0,this.xvar.frozenRowIndex),{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex,bodyTrHeight:this.xvar.bodyTrHeight}),S.call(this,"body-scroll",v,_,p,C)),this.xvar.frozenColumnIndex>0&&h.footSum&&this.needToPaintSum&&$.call(this,"bottom-left-body",v,b,p),h.footSum&&this.needToPaintSum&&$.call(this,"bottom-body-scroll",v,y,p,C)},p=function(t){var i=this.config,n=this.list,a=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,o=(this.asideBodyRowData,this.leftBodyRowData),l=this.bodyRowData,s=this.leftFootSumData,u=this.footSumData,h=(this.asideBodyGroupingData,this.leftBodyGroupingData),p=this.bodyGroupingData,f=i.body.align,g=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,m={paintStartRowIndex:a,paintRowCount:g,bodyTrHeight:this.xvar.bodyTrHeight},x=function(t,n,a,o){var l=this.$.panel[t],s=[],r=void 0,d=void 0,u=void 0,h=void 0,p=void 0,g=void 0,m=void 0,x=void 0,v=void 0;for(s.push('<table border="0" cellpadding="0" cellspacing="0">'),s.push("<colgroup>"),r=0,d=n.length;r<d;r++)s.push('<col style="width:'+n[r]._width+'px;"  />');for(s.push("<col  />"),s.push("</colgroup>"),u=0,h=a.rows.length;u<h;u++){for(s.push('<tr class="tr-sum">'),p=0,g=a.rows[u].cols.length;p<g;p++)m=a.rows[u].cols[p],x=i.body.columnHeight*m.rowspan-i.body.columnBorderWidth,v=m.align||f,s.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+p+'" ','data-ax5grid-column-rowIndex="'+u+'" ','data-ax5grid-column-colIndex="'+m.colIndex+'" ','data-ax5grid-column-attr="'+(m.columnAttr||"sum")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn["sum_"+m.colIndex+"_"+u],this.selectedColumn["sum_"+m.colIndex+"_"+u]),'colspan="'+m.colspan+'" ','rowspan="'+m.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),i.body.columnBorderWidth&&(n+="hasBorder "),p==g-1&&(n+="isLastColumn "),n}.call(this,m)+'" ','style="height: '+x+'px;min-height: 1px;">'),s.push(function(t){return'<span data-ax5grid-cellHolder="'+(m.multiLine?"multiLine":"")+'" '+(v?'data-ax5grid-text-align="'+v+'"':"")+'" >'}(x),c.call(this,o,m),"</span>"),s.push("</td>");s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>"),s.push("</tr>")}return s.push("</table>"),l.empty().get(0).innerHTML=s.join(""),!0},v=function(t,n,a,o,l){var s=this.$.panel[t],r=[],c=void 0,u=void 0,h=void 0,p=void 0,g=void 0,m=void 0,x=void 0,v=void 0,b=void 0;for("undefined"!=typeof l&&"undefined"!=typeof l.paintStartRowIndex||(l={paintStartRowIndex:0,paintRowCount:o.length}),c=l.paintStartRowIndex,u=function(){var t=void 0;return t=o.length,l.paintRowCount+l.paintStartRowIndex<t&&(t=l.paintRowCount+l.paintStartRowIndex),t}();c<u;c++)if(o[c]&&a&&"__isGrouping"in o[c]){var y=a;for(r=[],h=0,p=y.rows.length;h<p;h++){for(g=0,m=y.rows[h].cols.length;g<m;g++)x=y.rows[h].cols[g],v=i.body.columnHeight*x.rowspan-i.body.columnBorderWidth,b=x.align||f,r.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+c+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+g+'" ','data-ax5grid-column-rowIndex="'+x.rowIndex+'" ','data-ax5grid-column-colIndex="'+x.colIndex+'" ','data-ax5grid-column-attr="'+(x.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[c+"_"+x.colIndex+"_"+x.rowIndex],this.selectedColumn[c+"_"+x.colIndex+"_"+x.rowIndex]),'colspan="'+x.colspan+'" ','rowspan="'+x.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:o[c],index:c})+" ":t.styleClass+" "),i.body.columnBorderWidth&&(n+="hasBorder "),g==m-1&&(n+="isLastColumn "),n}.call(this,x)+'" ','style="height: '+v+'px;min-height: 1px;">'),r.push(function(t){return'<span data-ax5grid-cellHolder="'+(x.multiLine?"multiLine":"")+'" '+(b?'data-ax5grid-text-align="'+b+'"':"")+'" >'}(v),d.call(this,o[c],c,x),"</span>"),r.push("</td>");r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+c+'" ','data-ax5grid-column-attr="default" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>")}s.find('tr[data-ax5grid-tr-data-index="'+c+'"]').empty().get(0).innerHTML=r.join("")}},b=function(t,n,a,o,l){var s=this.$.panel[t],d=[],c=void 0,u=void 0,h=void 0,p=void 0,g=void 0,m=void 0,x=void 0,v=a,b="undefined"!=typeof o[l].__origin_index__?o[l].__origin_index__:l,y=s.find('tr[data-ax5grid-tr-data-index="'+l+'"]').empty().get(0);if(y){for(c=0,u=v.rows.length;c<u;c++){for(h=0,p=v.rows[c].cols.length;h<p;h++)g=v.rows[c].cols[h],m=i.body.columnHeight*g.rowspan-i.body.columnBorderWidth,x=g.align||f,d.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-data-o-index="'+b+'" ','data-ax5grid-column-row="'+c+'" ','data-ax5grid-column-col="'+h+'" ','data-ax5grid-column-rowIndex="'+g.rowIndex+'" ','data-ax5grid-column-colIndex="'+g.colIndex+'" ','data-ax5grid-column-attr="'+(g.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[l+"_"+g.colIndex+"_"+g.rowIndex],this.selectedColumn[l+"_"+g.colIndex+"_"+g.rowIndex]),'colspan="'+g.colspan+'" ','rowspan="'+g.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:o[l],index:l})+" ":t.styleClass+" "),i.body.columnBorderWidth&&(n+="hasBorder "),h==p-1&&(n+="isLastColumn "),n}.call(this,g)+'" ','style="height: '+m+'px;min-height: 1px;">'),d.push(function(t){return'<span data-ax5grid-cellHolder="'+(g.multiLine?"multiLine":"")+'" '+(x?'data-ax5grid-text-align="'+x+'"':"")+'" >'}(m),r.call(this,o,o[l],l,g),"</span>"),d.push("</td>");d.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-column-attr="default" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>")}y.innerHTML=d.join("")}};this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>t?b.call(this,"top-left-body",this.leftHeaderColGroup,o,n.slice(0,this.xvar.frozenRowIndex),t):b.call(this,"left-body-scroll",this.leftHeaderColGroup,o,n,t)),this.xvar.frozenRowIndex>t?b.call(this,"top-body-scroll",this.headerColGroup,l,n.slice(0,this.xvar.frozenRowIndex),t):b.call(this,"body-scroll",this.headerColGroup,l,n,t),i.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>t?v.call(this,"top-left-body",this.leftHeaderColGroup,h,n.slice(0,this.xvar.frozenRowIndex)):v.call(this,"left-body-scroll",this.leftHeaderColGroup,h,n,m)),this.xvar.frozenRowIndex>t?v.call(this,"top-body-scroll",this.headerColGroup,p,n.slice(0,this.xvar.frozenRowIndex)):v.call(this,"body-scroll",this.headerColGroup,p,n,m)),this.xvar.frozenColumnIndex>0&&i.footSum&&this.needToPaintSum&&x.call(this,"bottom-left-body",this.leftHeaderColGroup,s,n),i.footSum&&this.needToPaintSum&&x.call(this,"bottom-body-scroll",this.headerColGroup,u,n,m)},f=function(e,i){if("undefined"==typeof i&&(i={timeoutUnUse:!1}),this.isInlineEditing)for(var n in this.inlineEditing)t.body.inlineEdit.deActive.call(this,"ESC",n);this.config.asidePanelWidth>0&&"top"in e&&this.$.panel["aside-body-scroll"].css({top:e.top}),this.xvar.frozenColumnIndex>0&&"top"in e&&this.$.panel["left-body-scroll"].css({top:e.top}),this.xvar.frozenRowIndex>0&&"left"in e&&this.$.panel["top-body-scroll"].css({left:e.left}),this.$.panel["body-scroll"].css(e),this.config.footSum&&"left"in e&&this.$.panel["bottom-body-scroll"].css({left:e.left}),this.__throttledScroll?this.__throttledScroll(e,i):(this.config.virtualScrollY&&!i.noRepaint&&"top"in e?u.call(this):this.config.virtualScrollX&&!i.noRepaint&&"left"in e&&u.call(this),i.callback&&i.callback())},g=function(){i.focusClear.call(this),i.clear.call(this),this.isInlineEditing&&x.deActive.call(this)},m=function(e){var n={UD:function(e){var n=!0,a=void 0,o=void 0,l=void 0,s=void 0;for(var r in this.focusedColumn){a=jQuery.extend({},this.focusedColumn[r],!0);break}if(!a)return!1;for(o=this.bodyRowMap[a.rowIndex+"_"+a.colIndex],i.focusClear.call(this),i.clear.call(this),e>0?a.rowIndex+(o.rowspan-1)+e>this.bodyRowTable.rows.length-1?(a.dindex=a.dindex+e,a.doindex=a.doindex+e,a.rowIndex=0,a.dindex>this.list.length-1&&(a.dindex=a.doindex=this.list.length-1,n=!1)):a.rowIndex=a.rowIndex+e:a.rowIndex+e<0?(a.dindex=a.dindex+e,a.doindex=a.doindex+e,a.rowIndex=this.bodyRowTable.rows.length-1,a.dindex<0&&(a.dindex=a.doindex=0,n=!1)):a.rowIndex=a.rowIndex+e,l=0;"undefined"==typeof this.bodyRowMap[a.rowIndex+"_"+a.colIndex];){if(0==a.rowIndex||l%2==(e>0?0:1)?a.colIndex--:a.rowIndex--,a.rowIndex<=0&&a.colIndex<=0){n=!1;break}l++}if(s=t.util.findPanelByColumnIndex.call(this,a.dindex,a.colIndex),this.config.body.mergeCells&&this.list.length){for(;!(this.$.panel[s.panelName].find('[data-ax5grid-tr-data-index="'+a.dindex+'"]').find('[data-ax5grid-column-rowindex="'+a.rowIndex+'"][data-ax5grid-column-colindex="'+a.colIndex+'"]').get(0)||(e>0?a.dindex++:a.dindex--,a.dindex<0||a.dindex>this.list.length-1)););s=t.util.findPanelByColumnIndex.call(this,a.dindex,a.colIndex)}if(a.panelName=s.panelName,a.dindex+1>this.xvar.frozenRowIndex)if(a.dindex<=this.xvar.virtualPaintStartRowIndex){var d=(a.dindex-this.xvar.frozenRowIndex-1)*this.xvar.bodyTrHeight;d<0&&(d=0),f.call(this,{top:-d,timeoutUnUse:!1}),t.scroller.resize.call(this)}else a.dindex+1>this.xvar.virtualPaintStartRowIndex+(this.xvar.virtualPaintRowCount-2)&&(f.call(this,{top:(this.xvar.virtualPaintRowCount-2-a.dindex)*this.xvar.bodyTrHeight,timeoutUnUse:!1}),t.scroller.resize.call(this));return this.focusedColumn[a.dindex+"_"+a.colIndex+"_"+a.rowIndex]=a,this.$.panel[a.panelName].find('[data-ax5grid-tr-data-index="'+a.dindex+'"]').find('[data-ax5grid-column-rowindex="'+a.rowIndex+'"][data-ax5grid-column-colindex="'+a.colIndex+'"]').attr("data-ax5grid-column-focused","true"),n},LR:function(e){var n=!0,a=void 0,o=void 0,l=!1,s="",r=void 0;for(var d in this.focusedColumn){a=jQuery.extend({},this.focusedColumn[d],!0);break}if(!a)return!1;if(o=this.bodyRowMap[a.rowIndex+"_"+a.colIndex],i.focusClear.call(this),i.clear.call(this),e<0?(a.colIndex=a.colIndex+e,a.colIndex<0&&(a.colIndex=0,n=!1)):(a.colIndex=a.colIndex+e,a.colIndex>this.colGroup.length-1&&(a.colIndex=this.colGroup.length-1,n=!1)),"undefined"==typeof this.bodyRowMap[a.rowIndex+"_"+a.colIndex]&&(a.rowIndex=0),this.list[a.dindex]&&this.list[a.dindex].__isGrouping){if(e<0){for(;"undefined"==typeof this.bodyGroupingMap[a.rowIndex+"_"+a.colIndex];)if(a.colIndex--,a.colIndex<=0){n=!1;break}}else for(;"undefined"==typeof this.bodyGroupingMap[a.rowIndex+"_"+a.colIndex];)if(a.colIndex++,a.colIndex>=this.colGroup.length){n=!1;break}}else if(e<0){for(;"undefined"==typeof this.bodyRowMap[a.rowIndex+"_"+a.colIndex];)if(a.colIndex--,a.colIndex<=0){n=!1;break}}else for(;"undefined"==typeof this.bodyRowMap[a.rowIndex+"_"+a.colIndex];)if(a.colIndex++,a.colIndex>=this.colGroup.length){n=!1;break}if(r=t.util.findPanelByColumnIndex.call(this,a.dindex,a.colIndex),this.config.body.mergeCells&&this.list.length&&a.dindex>=1){for(;!(this.$.panel[r.panelName].find('[data-ax5grid-tr-data-index="'+a.dindex+'"]').find('[data-ax5grid-column-rowindex="'+a.rowIndex+'"][data-ax5grid-column-colindex="'+a.colIndex+'"]').get(0)||(a.dindex--,a.dindex<0||a.dindex>this.list.length-1)););r=t.util.findPanelByColumnIndex.call(this,a.dindex,a.colIndex)}a.panelName=r.panelName;var c=function(){if(!this.config.virtualScrollX)return!1;var e=0;if(a.colIndex+1>this.xvar.frozenColumnIndex){if(a.colIndex<=this.xvar.paintStartColumnIndex&&this.colGroup[a.colIndex])return e=-this.colGroup[Number(a.colIndex)]._sx,f.call(this,{left:e}),t.header.scrollTo.call(this,{left:e}),t.scroller.resize.call(this),!0;if(a.colIndex>=this.xvar.paintEndColumnIndex&&this.colGroup[Number(a.colIndex)])return this.colGroup[Number(a.colIndex)]._ex>this.xvar.bodyWidth&&(e=this.colGroup[Number(a.colIndex)]._ex-this.xvar.bodyWidth,f.call(this,{left:-e}),t.header.scrollTo.call(this,{left:-e}),t.scroller.resize.call(this)),!0}return e=null,!1}.call(this);s=r.containerPanelName,l=r.isScrollPanel,this.focusedColumn[a.dindex+"_"+a.colIndex+"_"+a.rowIndex]=a;var u=this.$.panel[a.panelName].find('[data-ax5grid-tr-data-index="'+a.dindex+'"]').find('[data-ax5grid-column-rowindex="'+a.rowIndex+'"][data-ax5grid-column-colindex="'+a.colIndex+'"]').attr("data-ax5grid-column-focused","true");if(!c&&u&&l){var h=function(){return u.position().left+u.outerWidth()>Math.abs(this.$.panel[a.panelName].position().left)+this.$.panel[s].width()?u.position().left+u.outerWidth()-this.$.panel[s].width():Math.abs(this.$.panel[a.panelName].position().left)>u.position().left?u.position().left:void 0}.call(this);"undefined"!=typeof h&&(t.header.scrollTo.call(this,{left:-h}),f.call(this,{left:-h}),t.scroller.resize.call(this))}return n},INDEX:function(e){var n=!0,a=void 0,o=void 0,l=void 0;for(var s in this.focusedColumn){a=jQuery.extend({},this.focusedColumn[s],!0);break}for(a||(a={rowIndex:0,colIndex:0}),o=this.bodyRowMap[a.rowIndex+"_"+a.colIndex],i.focusClear.call(this),i.clear.call(this),"end"==e&&(e=this.list.length-1),a.dindex=e,a.rowIndex=0,l=0;"undefined"==typeof this.bodyRowMap[a.rowIndex+"_"+a.colIndex]&&(0==a.rowIndex||l%2==(_dy>0?0:1)?a.colIndex--:a.rowIndex--,!(a.rowIndex<=0&&a.colIndex<=0));)l++;var r=t.util.findPanelByColumnIndex.call(this,a.dindex,a.colIndex);if(a.panelName=r.panelName,a.dindex+1>this.xvar.frozenRowIndex){var d=this.xvar.virtualPaintStartRowIndex||0;if(a.dindex<d)f.call(this,{top:-(a.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this);else if(a.dindex+1>d+(this.xvar.virtualPaintRowCount-2)){var c=this.config.virtualScrollY?a.dindex-this.xvar.frozenRowIndex-this.xvar.virtualPaintRowCount+3:a.dindex-this.xvar.frozenRowIndex;f.call(this,{top:-c*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)}}return this.focusedColumn[a.dindex+"_"+a.colIndex+"_"+a.rowIndex]=a,
this.$.panel[a.panelName].find('[data-ax5grid-tr-data-index="'+a.dindex+'"]').find('[data-ax5grid-column-rowindex="'+a.rowIndex+'"][data-ax5grid-column-colindex="'+a.colIndex+'"]').attr("data-ax5grid-column-focused","true"),n}},a={UP:function(){return n.UD.call(this,-1)},DOWN:function(){return n.UD.call(this,1)},LEFT:function(){return n.LR.call(this,-1)},RIGHT:function(){return n.LR.call(this,1)},HOME:function(){return n.INDEX.call(this,0)},END:function(){return n.INDEX.call(this,"end")},position:function(t){return n.INDEX.call(this,t)}};return e in a?a[e].call(this):a.position.call(this,e)},x={active:function(i,n,o){var l=this,s=void 0,r=void 0,d=void 0,c=void 0,u=void 0,h=void 0,p=void 0,f=void 0;for(var g in i){if(u=i[g].panelName,s=i[g].dindex,r=i[g].doindex,d=i[g].colIndex,c=i[g].rowIndex,h=i[g].colspan,p=this.colGroup[d],!(f=p.editor))return this;if(e.isFunction(f.disabled)&&f.disabled.call({list:this.list,dindex:s,item:this.list[s],key:p.key,value:o}))return this;if(!function(e,i){if(e.type in t.inlineEditor)return"popup"==t.inlineEditor[e.type].editMode}(f)){if("checkbox"==f.type){var m=void 0,x=void 0;x=f.config&&f.config.trueValue?(m=!(o==f.config.trueValue))?f.config.trueValue:f.config.falseValue:m=0==o||"false"==o||o<"1"?"true":"false",t.data.setValue.call(l,s,r,p.key,x),a.call(l,["cellChecked"],s,r,{key:p.key,rowIndex:c,colIndex:d,editorConfig:p.editor.config,checked:m})}return this}if(this.list[s].__isGrouping)return!1;if(g in this.inlineEditing)return!1;this.inlineEditing[g]={editor:f,panelName:u,columnKey:g,column:i[g],useReturnToSave:t.inlineEditor[f.type].useReturnToSave},this.isInlineEditing=!0}if(this.isInlineEditing){var v=t.data.getValue.call(l,s,r,p.key),b=function(t,i){return e.isNothing(t)&&(t=e.isNothing(v)?"":v),"money"==i.type?e.number(t,{money:!0}):t}.call(this,o,f);return this.inlineEditing[g].$inlineEditorCell=this.$.panel[u].find('[data-ax5grid-tr-data-index="'+s+'"]').find('[data-ax5grid-column-rowindex="'+c+'"][data-ax5grid-column-colindex="'+d+'"]').find("[data-ax5grid-cellholder]"),this.inlineEditing[g].$inlineEditor=t.inlineEditor[f.type].init(this,g,f,this.inlineEditing[g].$inlineEditorCell,b),!0}},deActive:function(i,n,a){if(!this.inlineEditing[n])return this;var o=this.inlineEditing[n].panelName,l=this.inlineEditing[n].column.dindex,s=this.inlineEditing[n].column.doindex,r=this.inlineEditing[n].column.rowIndex,d=this.inlineEditing[n].column.colIndex,c=this.bodyRowMap[this.inlineEditing[n].column.rowIndex+"_"+this.inlineEditing[n].column.colIndex],u=function(t){return"undefined"==typeof a?"SELECT"==t.get(0).tagName||"INPUT"==t.get(0).tagName||"TEXTAREA"==t.get(0).tagName?t.val():(i="CANCEL",!1):a}(this.inlineEditing[n].$inlineEditor),h=function(t,i){return"money"==i.type?e.number(t):t}.call(this,u,c.editor),p={CANCEL:function(t,e,i){p.__clear.call(this)},RETURN:function(e,i,n,a){t.data.setValue.call(this,e,i,n.key,a)?(p.__clear.call(this),t.body.repaintCell.call(this,o,e,i,r,d,a)):p.__clear.call(this)},__clear:function(){if(this.isInlineEditing=!1,this.inlineEditing[n]&&this.inlineEditing[n].$inlineEditor){var t=this.inlineEditing[n].$inlineEditor.data("binded-ax5ui");"ax5picker"==t?this.inlineEditing[n].$inlineEditor.ax5picker("close"):"ax5select"==t&&this.inlineEditing[n].$inlineEditor.ax5select("close"),this.inlineEditing[n].$inlineEditor.remove(),this.inlineEditing[n].$inlineEditor=null,this.inlineEditing[n].$inlineEditorCell=null}this.inlineEditing[n]=void 0,delete this.inlineEditing[n]}};i in p?p[i||"RETURN"].call(this,l,s,c,h):p.__clear.call(this)},keydown:function(e,i,n){var o={ESC:function(){for(var t in this.inlineEditing)x.deActive.call(this,"CANCEL",t)},RETURN:function(){if(this.isInlineEditing){if(!this.inlineEditing[i]||!this.inlineEditing[i].useReturnToSave)return!1;x.deActive.call(this,"RETURN",i)}else for(var e in this.focusedColumn){var o=this.focusedColumn[e],l=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],s=o.dindex,r=o.doindex,d="",c=this.colGroup[o.colIndex];if(l&&(this.list[s].__isGrouping||(d=t.data.getValue.call(this,s,r,l.key))),c.editor&&"inline"===t.inlineEditor[c.editor.type].editMode){if(n&&n.moveFocus);else if(l.editor&&"checkbox"==l.editor.type){d=t.data.getValue.call(this,s,r,l.key);var u=void 0,h=void 0;l.editor.config&&l.editor.config.trueValue?d!=l.editor.config.trueValue?(h=l.editor.config.trueValue,u=!0):(h=l.editor.config.falseValue,u=!1):h=u=0==d||"false"==d||d<"1"?"true":"false",t.data.setValue.call(this,s,r,l.key,h),a.call(this,["cellChecked"],s,r,{key:l.key,rowIndex:o.rowIndex,colIndex:o.colIndex,editorConfig:l.editor.config,checked:u})}}else t.body.inlineEdit.active.call(this,this.focusedColumn,null,d)}return!0}};e in o&&o[e].call(this,e,i,n)}},v=function(){var t=this.config,e=this.list,i=this.bodyRowTable,n=this.footSumTable,a=this.bodyGroupingTable,o=function(t,e,i,n){var a=[],o=void 0,l=void 0,s=void 0,c=void 0,u=void 0,h=void 0,p=void 0,f=void 0;for(o=0,l=n.length;o<l;o++){var g=!1,m=void 0;i&&"__isGrouping"in n[o]?(m=i,g=!0):m=e;for(s=0,c=m.rows.length;s<c;s++){for(a.push("\n<tr>"),u=0,h=m.rows[s].cols.length;u<h;u++)p=m.rows[s].cols[u],a.push("<td ",'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ',">",(g?d.call(this,n[o],o,p):r.call(this,n,n[o],o,p,f,"text"))||"&nbsp;","</td>");a.push("\n</tr>")}}return a.join("")},l=function(t,e,i){var n=[],a=void 0,o=void 0,l=void 0,s=void 0,r=void 0;for(a=0,o=e.rows.length;a<o;a++){for(n.push("\n<tr>"),l=0,s=e.rows[a].cols.length;l<s;l++)r=e.rows[a].cols[l],n.push("<td ",'colspan="'+r.colspan+'" ','rowspan="'+r.rowspan+'" ',">",c.call(this,i,r),"</td>");n.push("\n</tr>")}return n.join("")},s=[];return s.push(o.call(this,this.headerColGroup,i,a,e)),t.footSum&&s.push(l.call(this,this.headerColGroup,n,e)),t.rightSum,s.join("")},b=function(e,i,n){t.data.toggleCollapse.call(this,e,i,n)&&(this.proxyList=t.data.getProxyList.call(this,this.list),this.align())},y=function(t,e){var i={self:this,page:this.page,list:this.list,item:this.list[t],dindex:t};m.call(this,t),this.config.body.onClick&&this.config.body.onClick.call(i,i),i=null},w=function(t,e){var i={self:this,page:this.page,list:this.list,item:this.list[t],dindex:t};m.call(this,t),this.config.body.onDBLClick&&this.config.body.onDBLClick.call(i),i=null};t.body={init:l,repaint:u,repaintCell:h,repaintRow:p,updateRowState:a,updateRowStateAll:o,scrollTo:f,blur:g,moveFocus:m,inlineEdit:x,getExcelString:v,toggleCollapse:b,click:y,dblClick:w}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){for(var t=0,i=this.list.length;i--;)"__groupingList"in this.list[i]||(t+=e.number(this.list[i][this.key]));return t},n=function(){for(var t=0,i=this.list.length,n=0;i--;)"__groupingList"in this.list[i]||(t+=e.number(this.list[i][this.key]),n++);return e.number(t/(n||1),{round:2})};t.collector={sum:i,avg:n}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){},n=function(t){for(var e=0,i=t.length,n=[];e<i;e++)t[e]&&!t[e].__isGrouping&&(t[e][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(e),n.push(jQuery.extend({},t[e])));return n},a=function(t){this.selectedDataIndexs=[];var i=0,n=t.length,a=[],o=0,l=0,s=0;if(this.config.body.grouping)for(var r=e.map(this.bodyGrouping.by,function(){return{key:this,compareString:"",grouping:!1,list:[]}}),d=0,c=r.length,u=void 0,h=[],p=void 0;i<n+1;i++)if(d=0,t[i]&&t[i][this.config.columnKeys.deleted])this.deletedList.push(t[i]);else{for(u="",h=[];d<c;d++){if(t[i]&&(u+="$|$"+t[i][r[d].key]),o>0&&u!=r[d].compareString){for(var f={keys:[],labels:[],list:r[d].list},g=0;g<d+1;g++)f.keys.push(r[g].key),f.labels.push(t[i-1][r[g].key]);h.push(f),r[d].list=[]}r[d].list.push(t[i]),r[d].compareString=u}for(p=h.length;p--;)a.push({__isGrouping:!0,__groupingList:h[p].list,__groupingBy:{keys:h[p].keys,labels:h[p].labels}});t[i]&&(t[i][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(i),t[i].__original_index=t[i].__index=s,a.push(t[i]),l++,o++,s++)}else for(;i<n;i++)t[i]&&(t[i][this.config.columnKeys.deleted]?this.deletedList.push(t[i]):(t[i][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(i),"undefined"==typeof t[i].__original_index&&(t[i].__original_index=s),t[i].__index=s,l++,s++,a.push(t[i])));return this.xvar.dataRealRowCount=l,a},o=function(t){this.selectedDataIndexs=[],this.deletedList=[];for(var i=0,n=0,a=0,o=0,l=t.length,s=this.config.tree.columnKeys,r=this.config.tree.hashDigit,d={};l--;)delete t[l][s.parentHash],delete t[l][s.selfHash];for(i=0,n=0,l=t.length;i<l;i++)t[i]&&(d[t[i][s.selfKey]]=i,(e.isNothing(t[i][s.parentKey])||"top"===t[i][s.parentKey])&&(t[i][s.parentKey]="top",t[i][s.children]=[],t[i][s.parentHash]=e.setDigit("0",r),t[i][s.selfHash]=e.setDigit("0",r)+"."+e.setDigit(n,r),t[i][s.depth]=0,t[i][s.hidden]=!1,n++));for(i=0,o=0;i<l;i++){var c=void 0,u=void 0;t[i]&&"top"!==t[i][s.parentKey]&&"undefined"==typeof t[i][s.parentHash]&&((c=t[d[t[i][s.parentKey]]])?(u=c[s.selfHash],t[i][s.children]=[],t[i][s.parentHash]=u,t[i][s.selfHash]=u+"."+e.setDigit(c[s.children].length,r),t[i][s.depth]=c[s.depth]+1,(c[s.collapse]||c[s.hidden])&&(t[i][s.hidden]=!0),c[s.children].push(t[i][s.selfKey])):(t[i][s.parentKey]="top",t[i][s.children]=[],t[i][s.parentHash]=e.setDigit("0",r),t[i][s.selfHash]=e.setDigit("0",r)+"."+e.setDigit(n,r),t[i][s.hidden]=!1,n++)),t[i]&&(t[i][this.config.columnKeys.deleted]?(this.deletedList.push(t[i]),t[i][s.hidden]=!0):t[i][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(i),t[i].__index=o,a++,o++)}return this.listIndexMap=d,this.xvar.dataRealRowCount=a,t},l=function(t){for(var e=0,i=t.length,n=[];e<i;e++)t[e]&&!t[e][this.config.tree.columnKeys.hidden]&&(t[e].__origin_index__=e,n.push(t[e]));return n},s=function(i){var n=void 0;return e.isArray(i)?(this.page=null,n=i):"page"in i&&(this.page=jQuery.extend({},i.page),n=i.list),this.config.tree.use?(this.list=o.call(this,n),this.proxyList=l.call(this,y.call(this,this.sortInfo,this.list))):(this.proxyList=null,this.list=a.call(this,!this.config.remoteSort&&Object.keys(this.sortInfo).length?y.call(this,this.sortInfo,n):n)),this.selectedDataIndexs=[],this.deletedList=[],this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this.config.body.grouping,this},r=function(t){return{list:this.list,page:this.page}},d=function(e){var i=[],n=this.list,a=0,o=n.length;switch(e){case"modified":for(;a<o;a++)n[a]&&!n[a].__isGrouping&&n[a][this.config.columnKeys.modified]&&i.push(jQuery.extend({},n[a]));break;case"selected":for(;a<o;a++)n[a]&&!n[a].__isGrouping&&n[a][this.config.columnKeys.selected]&&i.push(jQuery.extend({},n[a]));break;case"deleted":i=[].concat(this.deletedList);break;default:i=t.data.clearGroupingData.call(this,n)}return i},c=function(i,s,r){var d=this.config.body.grouping?n.call(this,this.list):this.list,c={first:function(){d=[].concat(i).concat(d)},last:function(){d=d.concat([].concat(i))}};if(this.config.tree.use){var u=this.list.concat([].concat(i));this.list=o.call(this,u),this.proxyList=l.call(this,y.call(this,this.sortInfo,this.list))}else{if("undefined"==typeof s&&(s="last"),s in c)i[this.config.columnKeys.modified]=!0,c[s].call(this,i);else{if(!e.isNumber(s))throw"invalid argument _dindex";if(e.isArray(i))for(var h=0,p=i.length;h<p;h++)d.splice(s+h,0,i[h]);else d.splice(s,0,i)}d=this.config.body.grouping?a.call(this,y.call(this,this.sortInfo,d)):r&&r.sort&&Object.keys(this.sortInfo).length?a.call(this,y.call(this,this.sortInfo,d)):a.call(this,d),this.list=d}return this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},u=function(i){var s=this.config.body.grouping?n.call(this,this.list):this.list,r={first:function(){this.config.tree.use?r.tree.call(this,0):s.splice(0,1)},last:function(){this.config.tree.use?r.tree.call(this,s.length-1):s.splice(s.length-1,1)},index:function(t){this.config.tree.use?r.tree.call(this,t):s.splice(t,1)},selected:function(){if(this.config.tree.use)r.tree.call(this,"selected");else{var t=[],e=void 0,i=void 0;for(e=0,i=s.length;e<i;e++)s[e][this.config.columnKeys.selected]||t.push(s[e]);s=t,t=null,e=null}},tree:function(t){var i=this.config.tree.columnKeys,n=s[t][this.config.tree.columnKeys.selfHash];s=e.filter(s,function(){return this[i.selfHash].substr(0,n.length)!=n}),i=null,n=null}};if("undefined"==typeof i&&(i="last"),i in r)r[i].call(this,i);else{if(!e.isNumber(i))throw"invalid argument _dindex";r.index.call(this,i)}return this.config.tree.use?(this.list=o.call(this,s),this.proxyList=l.call(this,y.call(this,this.sortInfo,this.list))):(s=this.config.body.grouping?a.call(this,y.call(this,this.sortInfo,s)):Object.keys(this.sortInfo).length?a.call(this,y.call(this,this.sortInfo,s)):a.call(this,s),this.list=s),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},h=function(i){var s=this.config.body.grouping?n.call(this,this.list):this.list,r={first:function(){this.config.tree.use?r.tree.call(this,0):s[0][this.config.columnKeys.deleted]=!0},last:function(){this.config.tree.use?r.tree.call(this,s.length-1):s[s.length-1][this.config.columnKeys.deleted]=!0},selected:function(){if(this.config.tree.use)r.tree.call(this,"selected");else{for(var t=s.length;t--;)s[t][this.config.columnKeys.selected]&&(s[t][this.config.columnKeys.deleted]=!0);t=null}},tree:function(t){var e=this.config.columnKeys,i=this.config.tree.columnKeys;if("selected"===t){for(var n=s.length;n--;)if(s[n][this.config.columnKeys.selected]){s[n][this.config.columnKeys.deleted]=!0;for(var a=s[n][i.selfHash],o=s.length;o--;)s[o][i.selfHash].substr(0,a.length)===a&&(s[o][e.deleted]=!0);a=null,o=null}n=null}else{for(var l=s[t][i.selfHash],r=s.length;r--;)s[r][i.selfHash].substr(0,l.length)!==l&&(s[r][e.deleted]=!0);l=null,r=null}e=null,i=null}};if("undefined"==typeof i&&(i="last"),i in r)r[i].call(this,i);else{if(!e.isNumber(i))throw"invalid argument _dindex";s[i][this.config.columnKeys.deleted]=!0}return this.config.tree.use?(this.list=o.call(this,s),this.proxyList=l.call(this,y.call(this,this.sortInfo,this.list))):(s=this.config.body.grouping?a.call(this,y.call(this,this.sortInfo,s)):Object.keys(this.sortInfo).length?a.call(this,y.call(this,this.sortInfo,s)):a.call(this,s),this.list=s),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},p=function(t,i){if(!e.isNumber(i))throw"invalid argument _dindex";this.needToPaintSum=!0,this.list.splice(i,1,t),this.config.body.grouping&&(this.list=a.call(this,n.call(this,this.list)))},f=function(t,e,i){var n=this.config.tree.columnKeys,a=void 0,o=void 0;if("undefined"==typeof t)return!1;if(o=this.proxyList[t].__origin_index__,this.list[o][n.children]){if(this.proxyList=[],i&&i.filter){if(i.filter.call({item:this.list[o],dindex:o},this.list[o]))for(var l in e)this.list[o][l]=e[l]}else for(var s in e)this.list[o][s]=e[s];a=this.list[o][n.selfHash];for(var r=0,d=this.list.length;r<d;r++)if(this.list[r]){if(this.list[r][n.parentHash].substr(0,a.length)===a)if(i&&i.filter){if(i.filter.call({item:this.list[r],dindex:r},this.list[r]))for(var c in e)this.list[r][c]=e[c]}else for(var u in e)this.list[r][u]=e[u];this.list[r][n.hidden]||this.proxyList.push(this.list[r])}return!0}return!1},g=function(e,i,n,a){var o=m.call(this,e,i,n),l=this.list,s="undefined"==typeof i?e:i;if(this.needToPaintSum=!0,o!==a){if(/[\.\[\]]/.test(n))try{l[s][this.config.columnKeys.modified]=!0,Function("val","this"+t.util.getRealPathForDataItem(n)+" = val;").call(l[s],a)}catch(r){}else l[s][this.config.columnKeys.modified]=!0,l[s][n]=a;this.onDataChanged&&this.onDataChanged.call({self:this,list:this.list,dindex:e,doindex:i,item:this.list[e],key:n,value:a})}return!0},m=function(e,i,n,a){var o=this.list,l="undefined"==typeof i?e:i;if(/[\.\[\]]/.test(n))try{a=Function("","return this"+t.util.getRealPathForDataItem(n)+";").call(o[l])}catch(s){}else a=o[l][n];return a},x=function(){this.selectedDataIndexs=[]},v=function(t,i,n,a){var o=this.config;return"undefined"==typeof i&&(i=t),!!this.list[i]&&(!this.list[i].__isGrouping&&(!this.list[i][o.columnKeys.disableSelection]&&("undefined"==typeof n?(this.list[i][o.columnKeys.selected]=!this.list[i][o.columnKeys.selected])?this.selectedDataIndexs.push(i):this.selectedDataIndexs.splice(e.search(this.selectedDataIndexs,function(){return this==i}),1):(this.list[i][o.columnKeys.selected]=n)?this.selectedDataIndexs.push(i):this.selectedDataIndexs.splice(e.search(this.selectedDataIndexs,function(){return this==i}),1),this.onDataChanged&&a&&a.internalCall&&this.onDataChanged.call({self:this,list:this.list,dindex:t,doindex:i,item:this.list[i],key:o.columnKeys.selected,value:this.list[i][o.columnKeys.selected]}),this.list[i][o.columnKeys.selected])))},b=function(t,e){var i=this.config,n=this.list.length;if(this.selectedDataIndexs=[],"undefined"==typeof t)for(;n--;)this.list[n].__isGrouping||e&&e.filter&&e.filter.call(this.list[n])!==!0||this.list[n][i.columnKeys.disableSelection]||(this.list[n][i.columnKeys.selected]=!this.list[n][i.columnKeys.selected])&&this.selectedDataIndexs.push(n);else for(;n--;)this.list[n].__isGrouping||e&&e.filter&&e.filter.call(this.list[n])!==!0||this.list[n][i.columnKeys.disableSelection]||(this.list[n][i.columnKeys.selected]=t)&&this.selectedDataIndexs.push(n);return this.onDataChanged&&e&&e.internalCall&&this.onDataChanged.call({self:this,list:this.list}),this.list},y=function(i,n,a){var o=n||this.list,l=[],s=0,r=function(e,i,n){if(/[\.\[\]]/.test(i))try{n=Function("","return this"+t.util.getRealPathForDataItem(i)+";").call(e)}catch(a){}else n=e[i];return n};for(var d in i)l[i[d].seq]={key:d,order:i[d].orderBy};l=e.filter(l,function(){return"undefined"!=typeof this}),a&&a.resetLineNumber&&0===l.length&&(l[0]={key:"__original_index",order:"asc"});var c=0,u=l.length,h=void 0,p=void 0;if(o.sort(function(t,e){for(c=0;c<u;c++){if(h=r(t,l[c].key),p=r(e,l[c].key),("undefined"==typeof h?"undefined":_typeof(h))!==("undefined"==typeof p?"undefined":_typeof(p))&&(h=""+h,p=""+p),h<p)return"asc"===l[c].order?-1:1;if(h>p)return"asc"===l[c].order?1:-1}}),a&&a.resetLineNumber)for(c=0,u=o.length,s=0;c<u;c++)n[c]&&!n[c].__isGrouping&&(n[c].__index=s++);return n?o:(this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this)},w=function(e,i){var n=this;if(this.config.tree.use){var a=this.list.concat([].concat(e));this.list=o.call(this,a),this.proxyList=l.call(this,y.call(this,this.sortInfo,this.list)),a=null}else this.list=this.list.concat([].concat(e));if(this.appendProgress=!0,t.page.statusUpdate.call(this),this.appendDebouncer){if(!(n.appendDebounceTimes<this.config.debounceTime/10))return n.appendDebounceTimes=0,_.call(n),i(),!1;clearTimeout(this.appendDebouncer),n.appendDebounceTimes++}this.appendDebouncer=setTimeout(function(){n.appendDebounceTimes=0,_.call(n),i()},this.config.debounceTime)},_=function(){this.appendProgress=!1,this.config.body.grouping?this.list=a.call(this,y.call(this,this.sortInfo,this.list)):this.list=a.call(this,this.list),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0,t.page.navigationUpdate.call(this)},I=function(t,e,i){var n=this.config.tree.columnKeys,a=void 0,o=void 0;if("undefined"==typeof t)return!1;if(o=this.proxyList[t].__origin_index__,this.list[o][n.children]){this.proxyList=[],"undefined"==typeof i&&(i=!this.list[o][n.collapse]),this.list[o][n.collapse]=i,a=this.list[o][n.selfHash];for(var l=this.list.length;l--;)this.list[l]&&(this.list[l][n.parentHash].substr(0,a.length)===a&&(this.list[l][n.hidden]=i),this.list[l][n.hidden]||this.proxyList.push(this.list[l]));return!0}return!1};t.data={init:i,set:s,get:r,getList:d,getProxyList:l,setValue:g,getValue:m,clearSelect:x,select:v,selectAll:b,add:c,remove:u,deleteRow:h,update:p,updateChild:f,sort:y,initData:a,clearGroupingData:n,append:w,toggleCollapse:I}}(),function(){var t=ax5.ui.grid,e=(ax5.util,function(){return"\ufeff\n{{#tables}}{{{body}}}{{/tables}}\n"}),i=function(t,i){var n=void 0,a=[].concat(t);n=ax5.mustache.render(e(),{worksheet:function(){var t=[];return a.forEach(function(e,i){t.push({name:"Sheet"+(i+1)})}),t}(),tables:function(){var t=[];return a.forEach(function(e,i){t.push({body:e})}),t}()});var o=navigator.userAgent.indexOf("Chrome")>-1,l=!o&&navigator.userAgent.indexOf("Safari")>-1,s=!!document.documentMode,r=void 0,d=void 0,c=void 0,u=void 0,h=void 0;return navigator.msSaveOrOpenBlob?(r=new Blob([n],{type:"text/html"}),window.navigator.msSaveOrOpenBlob(r,i)):l?(d=window.open("about:blank",this.id+"-excel-export","width=600,height=400"),d.document.write(n),d=null):s&&"undefined"==typeof Blob?(c=jQuery('<iframe id="'+this.id+'-excel-export" style="display:none"></iframe>'),jQuery(document.body).append(c),u=window[this.id+"-excel-export"],u.document.open("text/html","replace"),u.document.write(n),u.document.close(),u.focus(),u.document.execCommand("SaveAs",!0,i),c.remove()):(h=document.body.appendChild(document.createElement("a")),"download"in h&&(h.download=i,h.href=URL.createObjectURL(new Blob([n],{type:"text/csv"})),h.click(),document.body.removeChild(h))),!0};t.excel={"export":i}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){if("undefined"!=typeof this.value){var t=(""+this.value).replace(/[^0-9^\.^\-]/g,""),i=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),n=t.split(".");n[0]+=".";do n[0]=n[0].replace(i,"$1,$2");while(i.test(n[0]));return n.length>1?n[0]+e.left(n[1],2):n[0].split(".")[0]}return""};t.formatter={money:i}}(),function(){var t=ax5.ui.grid,e=ax5.util,i={on:function(n,a){var o=this,l=$(n),s=l.offset().left,r=o.$.container.root.offset().left;o.xvar.columnResizerIndex=a;var d={min:-o.colGroup[a]._width+2,max:o.$.container.root.width()-o.colGroup[a]._width};jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(e){var i=t.util.getMousePosition(e);o.xvar.__da=i.clientX-o.xvar.mousePosition.clientX,d.min>o.xvar.__da?o.xvar.__da=d.min:d.max<o.xvar.__da&&(o.xvar.__da=d.max),o.xvar.columnResizerLived||o.$.resizer.horizontal.addClass("live"),o.xvar.columnResizerLived=!0,o.$.resizer.horizontal.css({left:s+o.xvar.__da-r})}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){i.off.call(o),e.stopEvent(t)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){i.off.call(o),e.stopEvent(t)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){this.$.resizer.horizontal.removeClass("live"),this.xvar.columnResizerLived=!1,"undefined"==typeof this.xvar.__da||this.setColumnWidth(this.colGroup[this.xvar.columnResizerIndex]._width+this.xvar.__da,this.xvar.columnResizerIndex),jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},n=function(){var n=this;this.$.container.header.on("click","[data-ax5grid-column-attr]",function(i){var a=this.getAttribute("data-ax5grid-column-key"),o=this.getAttribute("data-ax5grid-column-colindex"),l=n.colGroup[o];if("__checkbox_header__"===a&&n.config.header.selector){var s=this.getAttribute("data-ax5grid-selected");s=!!e.isNothing(s)||"true"!==s,$(this).attr("data-ax5grid-selected",s),n.selectAll({selected:s}),s=null}else a&&l&&l.sortable!==!1&&!l.sortFixed&&(l.sortable!==!0&&n.config.sortable!==!0||r.call(n,l.key));t.body.blur.call(n),a=null,o=null,l=null}),this.$.container.header.on("mousedown","[data-ax5grid-column-resizer]",function(a){var o=this.getAttribute("data-ax5grid-column-resizer");n.xvar.mousePosition=t.util.getMousePosition(a),i.on.call(n,this,Number(o)),e.stopEvent(a),o=null}).on("dragstart",function(t){return e.stopEvent(t),!1}),a.call(this)},a=function(){var e=this.config,i=t.util.divideTableByFrozenColumnIndex(this.headerTable,this.xvar.frozenColumnIndex);this.asideHeaderData=function(t){for(var i=[],n={rows:[]},a=0,o=t.rows.length;a<o;a++)if(n.rows[a]={cols:[]},0===a){var l={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},s={};e.showLineNumber&&(s=jQuery.extend({},l,{width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth,columnAttr:"lineNumber",key:"__index_header__",label:"&nbsp;"}),i.push(s),n.rows[a].cols.push(s)),e.showRowSelector&&(s=jQuery.extend({},l,{width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth,columnAttr:"rowSelector",key:"__checkbox_header__",label:""}),i.push(s),n.rows[a].cols.push(s)),l=null}return this.asideColGroup=i,n}.call(this,this.headerTable),this.leftHeaderData=i.leftData,this.headerData=i.rightData},o=function(t){return"__checkbox_header__"===t.key?this.config.header.selector?'<div class="checkBox" style="max-height: '+(t.width-10)+"px;min-height: "+(t.width-10)+'px;"></div>':"&nbsp;":t.label||"&nbsp;"},l=function(t){var i=this.config,n=this.colGroup;t&&(a.call(this),this.xvar.paintStartRowIndex=void 0,this.xvar.virtualPaintStartRowIndex=void 0);var l=this.asideHeaderData,s=this.leftHeaderData,r=this.headerData,d=i.header.align;this.leftHeaderColGroup=n.slice(0,this.config.frozenColumnIndex),this.headerColGroup=n.slice(this.config.frozenColumnIndex);var c=function(t,a,l){var s=0,r=[];r.push('<table border="0" cellpadding="0" cellspacing="0">'),r.push("<colgroup>");for(var c=0,u=a.length;c<u;c++)r.push('<col style="width:'+a[c]._width+'px;"  />'),s+=a[c]._width;r.push("<col  />"),r.push("</colgroup>");for(var h=0,p=l.rows.length;h<p;h++){var f="";r.push('<tr class="'+f+'">');for(var g=0,m=l.rows[h].cols.length;g<m;g++){var x=l.rows[h].cols[g],v=i.header.columnHeight*x.rowspan-i.header.columnBorderWidth,b=d||x.align;r.push("<td ",'data-ax5grid-column-attr="'+(x.columnAttr||"default")+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+g+'" ',function(){return"undefined"!=typeof x.key?'data-ax5grid-column-key="'+x.key+'" ':""}(),'data-ax5grid-column-colindex="'+x.colIndex+'" ','data-ax5grid-column-rowindex="'+x.rowIndex+'" ','colspan="'+x.colspan+'" ','rowspan="'+x.rowspan+'" ','class="'+function(t){var n="";return t.headerStyleClass&&(n+=e.isFunction(t.headerStyleClass)?t.headerStyleClass.call({column:t,key:t.key})+" ":t.headerStyleClass+" "),i.header.columnBorderWidth&&(n+="hasBorder "),g==m-1&&(n+="isLastColumn "),n}.call(this,x)+'" ','style="height: '+v+'px;min-height: 1px;">'),r.push(function(){return'<span data-ax5grid-cellHolder="" '+(b?'data-ax5grid-text-align="'+b+'"':"")+" >"}(),function(){var t="";return e.isNothing(x.key)||e.isNothing(x.colIndex)||i.sortable!==!0&&x.sortable!==!0||x.sortable===!1||(t+='<span data-ax5grid-column-sort="'+x.colIndex+'" data-ax5grid-column-sort-order="'+(n[x.colIndex].sort||"")+'" />'),t}(),o.call(this,x),"</span>"),e.isNothing(x.colIndex)||i.enableFilter&&r.push('<span data-ax5grid-column-filter="'+x.colIndex+'" data-ax5grid-column-filter-value=""  />'),r.push("</td>")}r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','style="height: '+i.header.columnHeight+'px;min-height: 1px;" ',"></td>"),r.push("</tr>")}return r.push("</table>"),t.html(r.join("")),function(){for(var n=i.header.columnHeight*l.rows.length-i.header.columnBorderWidth,o=0,s=[],r=0,d=a.length;r<d;r++){var c=a[r];e.isNothing(c.colIndex)||(o+=c._width,s.push('<div data-ax5grid-column-resizer="'+c.colIndex+'" style="height:'+n+"px;left: "+(o-4)+'px;"  />'))}t.append(s)}.call(this),s};i.asidePanelWidth>0&&c.call(this,this.$.panel["aside-header"],this.asideColGroup,l),i.frozenColumnIndex>0&&c.call(this,this.$.panel["left-header"],this.leftHeaderColGroup,s),this.xvar.scrollContentWidth=c.call(this,this.$.panel["header-scroll"],this.headerColGroup,r),i.rightSum},s=function(t){return this.$.panel["header-scroll"].css(t),this},r=function(t){var e="",i={},n=0;for(var a in this.sortInfo)this.sortInfo[a].fixed&&(i[a]=this.sortInfo[a],n++);for(var o=0,l=this.colGroup.length;o<l;o++)this.colGroup[o].key==t?(""==e&&(e="undefined"==typeof this.colGroup[o].sort?"desc":"desc"===this.colGroup[o].sort?"asc":void 0),this.colGroup[o].sort=e):this.config.multiSort||(this.colGroup[o].sort=void 0),"undefined"!=typeof this.colGroup[o].sort&&(i[this.colGroup[o].key]||(i[this.colGroup[o].key]={seq:n++,orderBy:this.colGroup[o].sort}));return this.setColumnSort(i),this},d=function(t){for(var e=0,i=this.colGroup.length;e<i;e++)for(var n in t)this.colGroup[e].key==n&&(this.colGroup[e].sort=t[n].orderBy);return this},c=function(){var t=(this.config,this.colGroup),e=this.headerTable,i=function(t,e){for(var i=[],n=0,a=e.rows.length;n<a;n++){i.push("<tr>");for(var l=0,s=e.rows[n].cols.length;l<s;l++){var r=e.rows[n].cols[l];i.push("<td ",'colspan="'+r.colspan+'" ','rowspan="'+r.rowspan+'" ',">",o.call(this,r),"</td>")}i.push("</tr>")}return i.join("")};return i.call(this,t,e)};t.header={init:n,repaint:l,scrollTo:s,toggleSort:r,applySortStatus:d,getExcelString:c}}(),function(){var t=ax5.ui.grid,e={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){if("undefined"!=typeof i.attributes){var a="";for(var o in i.attributes)a+=" "+o+"='"+i.attributes[o]+"'"}return'<input type="text" data-ax5grid-editor="text" value="'+n+'" '+a+">"},init:function(e,i,n,a,o){var l;return a.append(l=jQuery(this.getHtml(e,i,n,o))),this.bindUI(e,i,l,n,a,o),l.on("blur",function(){t.body.inlineEdit.deActive.call(e,"RETURN",i)}),l},bindUI:function(t,e,i,n,a,o){i.focus().select()}},i={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){var a="";if("undefined"!=typeof i.attributes)for(var o in i.attributes)a+=" "+o+"='"+i.attributes[o]+"'";return'<input type="text" data-ax5grid-editor="money" value="'+n+'" '+a+'" />'},init:function(e,i,n,a,o){var l=void 0;return a.append(l=jQuery(this.getHtml(e,i,n,o))),this.bindUI(e,i,l,n,a,o),l.on("blur",function(){t.body.inlineEdit.deActive.call(e,"RETURN",i)}),l},bindUI:function(t,e,i,n,a,o){i.data("binded-ax5ui","ax5formater"),i.ax5formatter($.extend(!0,{pattern:"money"},n.config)),i.focus().select()}},n={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){var a="";if("undefined"!=typeof i.attributes)for(var o in i.attributes)a+=" "+o+"='"+i.attributes[o]+"'";return'<input type="text" data-ax5grid-editor="number" value="'+n+'" '+a+'" />'},init:function(e,i,n,a,o){var l;return a.append(l=jQuery(this.getHtml(e,i,n,o))),this.bindUI(e,i,l,n,a,o),l.on("blur",function(){t.body.inlineEdit.deActive.call(e,"RETURN",i)}),l},bindUI:function(t,e,i,n,a,o){i.data("binded-ax5ui","ax5formater"),i.ax5formatter($.extend(!0,{pattern:"number"},n.config)),i.focus().select()}},a={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="calendar" value="'+n+'" >'},init:function(t,e,i,n,a){var o;return n.append(o=jQuery(this.getHtml(t,e,i,a))),this.bindUI(t,e,o,i,n,a),o},bindUI:function(e,i,n,a,o,l){var s=e;n.data("binded-ax5ui","ax5picker"),n.ax5picker($.extend(!0,{direction:"auto",content:{type:"date",formatter:{pattern:"date"}},onStateChanged:function(){"open"==this.state?this.self.activePicker.attr("data-ax5grid-inline-edit-picker","date"):"close"==this.state&&t.body.inlineEdit.deActive.call(s,"RETURN",i);
}},a.config)),n.focus().select()}},o={useReturnToSave:!1,editMode:"popup",getHtml:function(t,e,i,n){var a=[];return a.push('<div data-ax5select="ax5grid-editor" data-ax5select-config="{}">'),a.push("</div>"),a.join("")},init:function(t,e,i,n,a){var o;return n.append(o=jQuery(this.getHtml(t,e,i,a))),this.bindUI(t,e,o,i,n,a),o},bindUI:function(e,i,n,a,o,l){var s={columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}};jQuery.extend(!0,s,a.config),s.options.forEach(function(t){t[s.columnKeys.optionValue]==l&&(t[s.columnKeys.optionSelected]=!0)});var r=e;n.data("binded-ax5ui","ax5select"),n.ax5select($.extend(!0,{tabIndex:1,direction:"auto",columnKeys:s.columnKeys,options:s.options,onStateChanged:function(){"open"==this.state?this.self.activeSelectOptionGroup.attr("data-ax5grid-inline-edit-picker","select"):"changeValue"==this.state?t.body.inlineEdit.deActive.call(r,"RETURN",i,this.value[0][s.columnKeys.optionValue]):"close"==this.state&&t.body.inlineEdit.deActive.call(r,"ESC",i)}},a.config)),n.ax5select("open"),n.ax5select("setValue",l),n.find("a").focus()}},l={editMode:"inline",getHtml:function(t,e,i){var n,a=t.config.body.columnHeight-2*t.config.body.columnPadding-t.config.body.columnBorderWidth;n=e.config&&e.config.trueValue?i==e.config.trueValue?"true":"false":0==i||"false"==i||i<"1"?"false":"true";var o={marginTop:2,height:a-4};return jQuery.extend(!0,o,e.config),o.marginTop=(a-o.height)/2,'<div data-ax5grid-editor="checkbox" data-ax5grid-checked="'+n+'" style="height:'+o.height+"px;width:"+o.height+'px;"></div>'}},s={useReturnToSave:!1,editMode:"popup",_getHtml:function(t,e,i,n){return'<div data-ax5grid-editor="textarea"></div>'},_bindUI:function(e,i,n,a,o,l){var s=n.offset(),r={width:n.width()},d=150,c=30,u=jQuery('<div data-ax5grid-popup="textarea" style="z-index: 9999;">\n    <textarea style="width:100%;height:'+(d-c)+'px;" class="form-control">'+l+'</textarea>\n    <div style="height:'+c+'px;padding:5px;text-align: right;">\n        <button class="btn btn-default">OK</button>\n    </div>\n</div>'),h=u.find("textarea");u.css({position:"absolute",left:s.left,top:s.top,width:r.width,height:d}),u.find("textarea"),jQuery(document.body).append(u),h.focus().select(),h.on("blur",function(n){t.body.inlineEdit.deActive.call(e,"RETURN",i,this.value),u.remove(),ax5.util.stopEvent(n.originalEvent)}),h.on("keydown",function(n){n.which==ax5.info.eventKeys.ESC&&(t.body.inlineEdit.deActive.call(e,"ESC",i),u.remove(),ax5.util.stopEvent(n.originalEvent))})},init:function(t,e,i,n,a){var o=void 0;return n.append(o=jQuery(this._getHtml(t,e,i,a))),this._bindUI(t,e,o,i,n,a),o}};t.inlineEditor={text:e,money:i,number:n,date:a,select:o,checkbox:l,textarea:s}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(t){var e=function(t){this.page.currentPage!=t&&(this.page.selectPage=t,this.config.page.onChange&&this.config.page.onChange.call({self:this,page:this.page,data:this.data}))},i={first:function(){e.call(this,0)},prev:function(){var t=this.page.currentPage-1;t<0&&(t=0),e.call(this,t)},next:function(){var t=this.page.currentPage+1;t>this.page.totalPages-1&&(t=this.page.totalPages-1),e.call(this,t)},last:function(){e.call(this,this.page.totalPages-1)}};t in i?i[t].call(this):e.call(this,t-1)},n=function(){var e=this;if(this.page){var n={hasPage:!1,currentPage:this.page.currentPage,pageSize:this.page.pageSize,totalElements:this.page.totalElements,totalPages:this.page.totalPages,firstIcon:this.config.page.firstIcon,prevIcon:this.config.page.prevIcon||"«",nextIcon:this.config.page.nextIcon||"»",lastIcon:this.config.page.lastIcon},a=this.config.page.navigationItemCount;n["@paging"]=function(){var t=[],e=void 0,i=void 0;e=n.currentPage-Math.floor(a/2),e<0&&(e=0),i=n.currentPage+a,i>n.totalPages&&(i=n.totalPages),i-e>a&&(i=e+a),i-e<a&&(e=i-a),e<0&&(e=0);for(var o=e,l=i;o<l;o++)t.push({pageNo:o+1,selected:n.currentPage==o});return t}(),n["@paging"].length>0&&(n.hasPage=!0),this.$.page.navigation.html(t.tmpl.get("page_navigation",n)),this.$.page.navigation.find("[data-ax5grid-page-move]").on("click",function(){i.call(e,this.getAttribute("data-ax5grid-page-move"))})}else this.$.page.navigation.empty()},a=function(){if(this.config.page.statusDisplay){var i=void 0,n=Math.min(this.xvar.dataRowCount,this.xvar.virtualPaintRowCount),a={};i=this.xvar.virtualPaintStartRowIndex+n,i>this.xvar.dataRowCount&&(i=this.xvar.dataRowCount),a.fromRowIndex=e.number(this.xvar.virtualPaintStartRowIndex+1,{money:!0}),a.toRowIndex=e.number(i,{money:!0}),a.totalElements=!1,a.dataRealRowCount=this.xvar.dataRowCount!==this.xvar.dataRealRowCount&&e.number(this.xvar.dataRealRowCount,{money:!0}),a.dataRowCount=e.number(this.xvar.dataRowCount,{money:!0}),a.progress=this.appendProgress?this.config.appendProgressIcon:"",this.page&&(a.fromRowIndex_page=e.number(this.xvar.virtualPaintStartRowIndex+this.page.currentPage*this.page.pageSize+1,{money:!0}),a.toRowIndex_page=e.number(this.xvar.virtualPaintStartRowIndex+n+this.page.currentPage*this.page.pageSize,{money:!0}),a.totalElements=e.number(this.page.totalElements,{money:!0}),a.toRowIndex_page>this.page.totalElements&&(a.toRowIndex_page=this.page.totalElements)),this.$.page.status.html(t.tmpl.get("page_status",a))}};t.page={navigationUpdate:n,statusUpdate:a}}(),function(){var t=ax5.ui.grid,e=ax5.util,i={vertical:function(t,e){var i=e._content_height-e._panel_height,n=e._vertical_scroller_height-e.verticalScrollBarHeight,a=i*t.top/n;return a<0?a=0:i<a&&(a=i),{top:-a}},horizontal:function(t,e){var i=e._content_width-e._panel_width,n=e._horizontal_scroller_width-e.horizontalScrollBarWidth,a=i*t.left/n;return a<0?a=0:i<a&&(a=i),{left:-a}}},n={vertical:function(e,n){var a=this,o="vertical",l=n._content_height-n._panel_height,s=n._vertical_scroller_height-n.verticalScrollBarHeight,r=s*e/l,d=void 0;return-r>s&&(r=-s,d=i[o].call(this,{top:-r},{_content_width:n._content_width,_content_height:n._content_height,_panel_width:n._panel_width,_panel_height:n._panel_height,_horizontal_scroller_width:n._horizontal_scroller_width,_vertical_scroller_height:n._vertical_scroller_height,verticalScrollBarHeight:n.verticalScrollBarHeight,horizontalScrollBarWidth:n.horizontalScrollBarWidth}),t.body.scrollTo.call(a,d)),-r},horizontal:function(e,n){var a=this,o="horizontal",l=n._content_width-n._panel_width,s=n._horizontal_scroller_width-n.horizontalScrollBarWidth,r=s*e/l,d=void 0;return-r>s&&(r=-s,d=i[o].call(this,{left:-r},{_content_width:n._content_width,_content_height:n._content_height,_panel_width:n._panel_width,_panel_height:n._panel_height,_horizontal_scroller_width:n._horizontal_scroller_width,_vertical_scroller_height:n._vertical_scroller_height,verticalScrollBarHeight:n.verticalScrollBarHeight,horizontalScrollBarWidth:n.horizontalScrollBarWidth}),t.header.scrollTo.call(a,d),t.body.scrollTo.call(a,d)),-r}},a={click:function(e,n,a,o){if((new Date).getTime()-t.scroller.moveout_timer<20)return!1;var l=this,s=e.offset(),r={width:n.outerWidth(),height:n.outerHeight()},d={width:e.innerWidth(),height:e.innerHeight()},c=l.$.scroller.vertical.innerHeight(),u=l.$.panel.body.height(),h=l.$.scroller.horizontal.innerWidth(),p=l.$.panel.body.width(),f=l.xvar.scrollContentHeight,g=l.xvar.scrollContentWidth,m=l.$.scroller["vertical-bar"].outerHeight(),x=l.$.scroller["horizontal-bar"].outerWidth(),v={vertical:function(e){var i=t.util.getMousePosition(e),n=i.clientY-s.top;return n<0?n=0:n+r.height>d.height&&(n=d.height-r.height),{top:n}},horizontal:function(e){var i=t.util.getMousePosition(e),n=i.clientX-s.left;return n<0?n=0:n+r.width>d.width&&(n=d.width-r.width),{left:n}}},b=v[a](o);n.css(b);var y=i[a].call(l,b,{_content_width:g,_content_height:f,_panel_width:p,_panel_height:u,_horizontal_scroller_width:h,_vertical_scroller_height:c,verticalScrollBarHeight:m,horizontalScrollBarWidth:x});"horizontal"===a&&t.header.scrollTo.call(l,y),t.body.scrollTo.call(l,y),y=null},on:function(e,n,o,l){var s=this,r=n.position(),d={width:n.outerWidth(),height:n.outerHeight()},c={width:e.innerWidth(),height:e.innerHeight()},u=s.$.scroller.vertical.innerHeight(),h=s.$.panel.body.height(),p=s.$.scroller.horizontal.innerWidth(),f=s.$.panel.body.width(),g=s.xvar.scrollContentHeight,m=s.xvar.scrollContentWidth,x=s.$.scroller["vertical-bar"].outerHeight(),v=s.$.scroller["horizontal-bar"].outerWidth(),b={vertical:function(e){var i=t.util.getMousePosition(e);s.xvar.__da=i.clientY-s.xvar.mousePosition.clientY;var n=r.top+s.xvar.__da;return n<0?n=0:n+d.height>c.height&&(n=c.height-d.height),{top:n}},horizontal:function(e){var i=t.util.getMousePosition(e);s.xvar.__da=i.clientX-s.xvar.mousePosition.clientX;var n=r.left+s.xvar.__da;return n<0?n=0:n+d.width>c.width&&(n=c.width-d.width),{left:n}}};s.xvar.__da=0,jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(e){var a=b[o](e);n.css(a);var l=i[o].call(s,a,{_content_width:m,_content_height:g,_panel_width:f,_panel_height:h,_horizontal_scroller_width:p,_vertical_scroller_height:u,verticalScrollBarHeight:x,horizontalScrollBarWidth:v});"horizontal"===o&&t.header.scrollTo.call(s,l),t.body.scrollTo.call(s,l)}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){a.off.call(s,t)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){a.off.call(s,t)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(e){ax5.util.stopEvent(e.originalEvent),t.scroller.moveout_timer=(new Date).getTime(),jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},o={wheel:function(e){var i=this,n=i.$.panel["body-scroll"].position(),a=i.xvar.body_panel_height,o=i.xvar.body_panel_width,l=i.xvar.scrollContentHeight,r=i.xvar.scrollContentWidth;if(isNaN(l)||isNaN(r))return!1;var d=void 0,c=void 0,u=!1,h=!1;return d=n.left-e.x,c=n.top-e.y,c>=0?(c=0,u=!0):c<=a-l?(c=a-l,c>=0&&(c=0),u=!0):0==e.y&&(u=!0),d>=0?(d=0,h=!0):d<=o-r?(d=o-r,d>=0&&(d=0),h=!0):0==e.x&&(h=!0),t.header.scrollTo.call(i,{left:d}),t.body.scrollTo.call(i,{left:d,top:c},{callback:function(){s.call(i)}}),!u||!h},on:function(){var i=this,n=i.$.panel["body-scroll"].position(),a=i.xvar.body_panel_height,l=i.xvar.body_panel_width,r=i.xvar.scrollContentHeight,d=i.xvar.scrollContentWidth,c=function(e){var o=t.util.getMousePosition(e),s=void 0,c=void 0;return i.xvar.__x_da=o.clientX-i.xvar.mousePosition.clientX,i.xvar.__y_da=o.clientY-i.xvar.mousePosition.clientY,s=n.left+i.xvar.__x_da,c=n.top+i.xvar.__y_da,c>=0?c=0:c<=a-r&&(c=a-r,c>=0&&(c=0)),s>=0?s=0:s<=l-d&&(s=l-d,s>=0&&(s=0)),{left:s,top:c}};this.xvar.__x_da=0,this.xvar.__y_da=0,this.xvar.touchmoved=!1,jQuery(document.body).on("touchmove.ax5grid-"+this.instanceId,function(n){var a=c(n);s.call(i),t.header.scrollTo.call(i,{left:a.left}),t.body.scrollTo.call(i,a,{noRepaint:"noRepaint"}),e.stopEvent(n.originalEvent),i.xvar.touchmoved=!0}).on("touchend.ax5grid-"+this.instanceId,function(n){if(i.xvar.touchmoved){var a=c(n);s.call(i),t.header.scrollTo.call(i,{left:a.left}),t.body.scrollTo.call(i,a),e.stopEvent(n.originalEvent),o.off.call(i)}}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).off("touchmove.ax5grid-"+this.instanceId).off("touchend.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},l=function(){var i=this,n=this.config.scroller.trackPadding;0==n?(this.$.scroller["vertical-bar"].css({width:this.config.scroller.size,left:-1}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size,top:-1})):(this.$.scroller["vertical-bar"].css({width:this.config.scroller.size-(n+1),left:n/2}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size-(n+1),top:n/2})),this.$.scroller["vertical-bar"].on(t.util.ENM.mousedown,function(e){this.xvar.mousePosition=t.util.getMousePosition(e),a.on.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",e)}.bind(this)).on("dragstart",function(t){return e.stopEvent(t),!1}),this.$.scroller.vertical.on("click",function(t){"vertical"==t.target.getAttribute("data-ax5grid-scroller")&&a.click.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",t)}.bind(this)),this.$.scroller["horizontal-bar"].on(t.util.ENM.mousedown,function(e){this.xvar.mousePosition=t.util.getMousePosition(e),a.on.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",e)}.bind(this)).on("dragstart",function(t){return e.stopEvent(t),!1}),this.$.scroller.horizontal.on("click",function(t){"horizontal"==t.target.getAttribute("data-ax5grid-scroller")&&a.click.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",t)}.bind(this)),this.$.container.body.on("mousewheel DOMMouseScroll",function(t){var i=t.originalEvent,n={x:0,y:0};i.detail?n.y=10*i.detail:"undefined"==typeof i.deltaY?(n.y=-i.wheelDelta,n.x=0):(n.y=i.deltaY,n.x=i.deltaX),o.wheel.call(this,n)&&e.stopEvent(t)}.bind(this)),ax5.info.supportTouch&&this.$.container.body.on("touchstart","[data-ax5grid-panel]",function(e){i.xvar.mousePosition=t.util.getMousePosition(e),o.on.call(i)}),this.xvar.body_panel_height=this.$.panel.body.height(),this.xvar.body_panel_width=this.$.panel.body.width()},s=function(){var t=this.$.scroller.vertical.height(),e=this.$.scroller.horizontal.width(),i=this.$.panel.body.height(),a=this.$.panel.body.width(),o=this.xvar.scrollContentHeight,l=this.xvar.scrollContentWidth,s=i*t/o,r=a*e/l;s<this.config.scroller.barMinSize&&(s=this.config.scroller.barMinSize),r<this.config.scroller.barMinSize&&(r=this.config.scroller.barMinSize),this.$.scroller["vertical-bar"].css({top:n.vertical.call(this,this.$.panel["body-scroll"].position().top,{_content_width:l,_content_height:o,_panel_width:a,_panel_height:i,_horizontal_scroller_width:e,_vertical_scroller_height:t,verticalScrollBarHeight:s,horizontalScrollBarWidth:r}),height:s}),this.$.scroller["horizontal-bar"].css({left:n.horizontal.call(this,this.$.panel["body-scroll"].position().left,{_content_width:l,_content_height:o,_panel_width:a,_panel_height:i,_horizontal_scroller_width:e,_vertical_scroller_height:t,verticalScrollBarHeight:s,horizontalScrollBarWidth:r}),width:r}),this.xvar.body_panel_height=i,this.xvar.body_panel_width=a,t=null,e=null,i=null,a=null,o=null,l=null,s=null,r=null};t.scroller={moveout_timer:(new Date).getTime(),init:l,resize:s}}(),function(){var t=ax5.ui.grid,e=function(){return'<div data-ax5grid-container="root" data-ax5grid-instance="{{instanceId}}">\n            <div data-ax5grid-container="hidden">\n                <textarea data-ax5grid-form="clipboard"></textarea>\n            </div>\n            <div data-ax5grid-container="header">\n                <div data-ax5grid-panel="aside-header"></div>\n                <div data-ax5grid-panel="left-header"></div>\n                <div data-ax5grid-panel="header">\n                    <div data-ax5grid-panel-scroll="header"></div>\n                </div>\n                <div data-ax5grid-panel="right-header"></div>\n            </div>\n            <div data-ax5grid-container="body">\n                <div data-ax5grid-panel="top-aside-body"></div>\n                <div data-ax5grid-panel="top-left-body"></div>\n                <div data-ax5grid-panel="top-body">\n                    <div data-ax5grid-panel-scroll="top-body"></div>\n                </div>\n                <div data-ax5grid-panel="top-right-body"></div>\n                <div data-ax5grid-panel="aside-body">\n                    <div data-ax5grid-panel-scroll="aside-body"></div>\n                </div>\n                <div data-ax5grid-panel="left-body">\n                    <div data-ax5grid-panel-scroll="left-body"></div>\n                </div>\n                <div data-ax5grid-panel="body">\n                    <div data-ax5grid-panel-scroll="body"></div>\n                </div>\n                <div data-ax5grid-panel="right-body">\n                  <div data-ax5grid-panel-scroll="right-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-aside-body"></div>\n                <div data-ax5grid-panel="bottom-left-body"></div>\n                <div data-ax5grid-panel="bottom-body">\n                    <div data-ax5grid-panel-scroll="bottom-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-right-body"></div>\n            </div>\n            <div data-ax5grid-container="page">\n                <div data-ax5grid-page="holder">\n                    <div data-ax5grid-page="navigation"></div>\n                    <div data-ax5grid-page="status"></div>\n                </div>\n            </div>\n            <div data-ax5grid-container="scroller">\n                <div data-ax5grid-scroller="vertical">\n                    <div data-ax5grid-scroller="vertical-bar"></div>    \n                </div>\n                <div data-ax5grid-scroller="horizontal">\n                    <div data-ax5grid-scroller="horizontal-bar"></div>\n                </div>\n                <div data-ax5grid-scroller="corner"></div>\n            </div>\n            <div data-ax5grid-resizer="vertical"></div>\n            <div data-ax5grid-resizer="horizontal"></div>\n        </div>'},i=function(){return'<div data-ax5grid-page-navigation="holder">\n            {{#hasPage}}\n            <div data-ax5grid-page-navigation="cell">    \n                {{#firstIcon}}<button type="button" data-ax5grid-page-move="first">{{{firstIcon}}}</button>{{/firstIcon}}\n                <button type="button" data-ax5grid-page-move="prev">{{{prevIcon}}}</button>\n            </div>\n            <div data-ax5grid-page-navigation="cell-paging">\n                {{#@paging}}\n                <button type="button" data-ax5grid-page-move="{{pageNo}}" data-ax5grid-page-selected="{{selected}}">{{pageNo}}</button>\n                {{/@paging}}\n            </div>\n            <div data-ax5grid-page-navigation="cell">\n                <button type="button" data-ax5grid-page-move="next">{{{nextIcon}}}</button>\n                {{#lastIcon}}<button type="button" data-ax5grid-page-move="last">{{{lastIcon}}}</button>{{/lastIcon}}\n            </div>\n            {{/hasPage}}\n        </div>'},n=function(){return"<span>{{{progress}}} {{fromRowIndex}} - {{toRowIndex}} of {{dataRowCount}} {{#totalElements}}&nbsp; Total {{.}}{{/totalElements}}</span>"};t.tmpl={main:e,page_navigation:i,page_status:n,get:function(e,i,n){var a=t.tmpl[e].call(this,n);return ax5.mustache.parse(a),ax5.mustache.render(a,i)}}}(),function(){var t=ax5.ui.grid,e=(ax5.util,function(t,e){for(var i={rows:[]},n={rows:[]},a=0,o=t.rows.length;a<o;a++){var l=t.rows[a];i.rows[a]={cols:[]},n.rows[a]={cols:[]};for(var s=0,r=l.cols.length;s<r;s++){var d=jQuery.extend({},l.cols[s]),c=d.colIndex,u=d.colIndex+d.colspan;if(c<e)if(u<=e)i.rows[a].cols.push(d);else{var h=jQuery.extend({},d),p=jQuery.extend({},h);h.colspan=e-h.colIndex,p.colIndex=e,p.colspan=d.colspan-h.colspan,i.rows[a].cols.push(h),p.colspan&&n.rows[a].cols.push(p)}else n.rows[a].cols.push(d);d=null,c=null,u=null}l=null}return{leftData:i,rightData:n}}),i=function(t,e,i){for(var n={rows:[]},a=0,o=t.rows.length;a<o;a++){var l=t.rows[a];n.rows[a]={cols:[]};for(var s=0,r=l.cols.length;s<r;s++){var d=jQuery.extend({},l.cols[s]),c=d.colIndex,u=d.colIndex+d.colspan;(e<=c||u<=i)&&(e<=c&&u<=i?n.rows[a].cols.push(d):e>c&&u>e?(d.colspan=u-e,n.rows[a].cols.push(d)):u>i&&c<=i&&n.rows[a].cols.push(d))}}return n},n=function(t){var e=void 0,i=t.originalEvent?t.originalEvent:t;return e="changedTouches"in i&&i.changedTouches?i.changedTouches[0]:i,{clientX:e.pageX,clientY:e.pageY}},a={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},o=function(t){var e=t,i=this.config,n={rows:[]},a=0,o=function c(t,e,o){for(var l={cols:[]},s=0,r=t.length,d=1,u=0;s<r;s++){var h=jQuery.extend({},t[s]);d=1,h.hidden||(h.colspan=1,h.rowspan=1,h.rowIndex=e,h.colIndex=function(){return o&&0==s?(a=o.colIndex+s+1,o.colIndex+s):a++}(),l.cols.push(h),"columns"in h?d=c(h.columns,e+1,h):h.width="width"in h?h.width:i.columnMinWidth,h.colspan=d,u+=d)}return l.cols.length>0?(n.rows[e]||(n.rows[e]={cols:[]}),n.rows[e].cols=n.rows[e].cols.concat(l.cols),u):d};o(e,0);for(var l=0,s=n.rows.length;l<s;l++)for(var r=0,d=n.rows[l].cols.length;r<d;r++)"columns"in n.rows[l].cols[r]||(n.rows[l].cols[r].rowspan=s-l);return n},l=function(t){var e=t,i={rows:[]},n=0,a=function o(t,e,a){for(var l={cols:[]},s=0,r=t.length,d=1,c=(function h(t){for(var i=0,s=t.length;i<s;i++){var r=jQuery.extend({},t[i]),d=1;r.hidden||("key"in r?(r.colspan=1,r.rowspan=1,r.rowIndex=e,r.colIndex=function(){return a?(n=a.colIndex+i+1,a.colIndex+i):n++}(),l.cols.push(r),"columns"in r&&(d=o(r.columns,e+1,r)),r.colspan=d):"columns"in r&&h(r.columns,e))}});s<r;s++){var u=jQuery.extend({},t[s]);d=1,u.hidden||("key"in u?(u.colspan=1,u.rowspan=1,u.rowIndex=e,u.colIndex=function(){return a?(n=a.colIndex+s+1,a.colIndex+s):n++}(),l.cols.push(u),"columns"in u&&(d=o(u.columns,e+1,u)),u.colspan=d):"columns"in u&&c(u.columns,e)),u=null}return l.cols.length>0?(i.rows[e]||(i.rows[e]={cols:[]}),i.rows[e].cols=i.rows[e].cols.concat(l.cols),l.cols.length-1+d):d};return a(e,0),function(t){for(var e=0,i=t.rows.length;e<i;e++){for(var n=t.rows[e],a=0,o=n.cols.length;a<o;a++){var l=n.cols[a];"columns"in l||(l.rowspan=i-e),l=null}n=null}}(i),i},s=function(t){var e={};return t.rows.forEach(function(t){t.cols.forEach(function(t){e[t.rowIndex+"_"+t.colIndex]=jQuery.extend({},t)})}),e},r=function(t){for(var e={rows:[]},i=0,n=t.length;i<n;i++){var a=t[i],o=0;e.rows[i]={cols:[]};for(var l=0,s=a.length;l<s&&!(o>this.colGroup.length);l++){var r=a[l].colspan||1;a[l].label||a[l].key?e.rows[i].cols.push({colspan:r,rowspan:1,colIndex:o,columnAttr:"sum",align:a[l].align,label:a[l].label,key:a[l].key,collector:a[l].collector,formatter:a[l].formatter}):e.rows[i].cols.push({colIndex:o,colspan:r,rowspan:1,label:"&nbsp;"}),o+=r,r=null}if(o<this.colGroup.length)for(var d=o;d<this.colGroup.length;d++)e.rows[i].cols.push({colIndex:d,colspan:1,rowspan:1,label:"&nbsp;"});a=null,o=null}return e},d=function(t){var e={rows:[]},i=0,n=0;e.rows[i]={cols:[]};for(var a=0,o=t.length;a<o&&!(n>this.colGroup.length);a++){var l=t[a].colspan||1;t[a].label||t[a].key?e.rows[i].cols.push({colspan:l,rowspan:1,rowIndex:0,colIndex:n,columnAttr:"default",align:t[a].align,label:t[a].label,key:t[a].key,collector:t[a].collector,formatter:t[a].formatter}):e.rows[i].cols.push({rowIndex:0,colIndex:n,colspan:l,rowspan:1,label:"&nbsp;"}),n+=l}if(n<this.colGroup.length)for(var s=n;s<this.colGroup.length;s++)e.rows[i].cols.push({rowIndex:0,colIndex:s,colspan:1,rowspan:1,label:"&nbsp;"});return e},c=function(t,e,i){var n=void 0,a=!1,o=[];return this.xvar.frozenRowIndex>t&&o.push("top"),this.xvar.frozenColumnIndex>e&&o.push("left"),o.push("body"),(this.xvar.frozenColumnIndex<=e||this.xvar.frozenRowIndex<=t)&&(n=o.join("-"),o.push("scroll"),a=!0),{panelName:o.join("-"),containerPanelName:n,isScrollPanel:a}},u=function(t){var e=[],i=[].concat(t.split(/[\.\[\]]/g));return i.forEach(function(t){""!==t&&e.push('["'+t.replace(/['\"]/g,"")+'"]')}),i=null,e.join("")};t.util={divideTableByFrozenColumnIndex:e,getTableByStartEndColumnIndex:i,getMousePosition:n,ENM:a,makeHeaderTable:o,makeBodyRowTable:l,makeBodyRowMap:s,makeFootSumTable:r,makeBodyGroupingTable:d,findPanelByColumnIndex:c,getRealPathForDataItem:u}}(),function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"mediaViewer"},function(){var n=function(){var n,a=this,o={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},l=function(t){var e="changedTouches"in t.originalEvent&&t.changedTouches?t.originalEvent.changedTouches[0]:t;return{clientX:e.clientX,clientY:e.clientY,time:(new Date).getTime()}};this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",animateTime:500,columnKeys:{src:"src",poster:"poster",html:"html"},loading:{icon:"",text:"Now Loading"},viewer:{prevHandle:!1,nextHandle:!1,ratio:16/9},hideMediaList:!1,media:{prevHandle:"<",nextHandle:">",width:36,height:36,list:[]}},this.queue=[],this.openTimer=null,this.closeTimer=null,this.selectedIndex=0,this.mousePosition={},n=this.config;var s=function(){var e=jQuery.extend(!0,{id:this.id},n);try{return t.tmpl.get.call(this,"frame",e,n.columnKeys)}finally{e=null}},r=function(t,e){var o,l="",s={thumbnail:function(t){this.select(t.getAttribute("data-media-thumbnail"))},prev:function(t){this.selectedIndex>0?this.select(this.selectedIndex-1):this.select(n.media.list.length-1)},next:function(t){this.selectedIndex<n.media.list.length-1?this.select(this.selectedIndex+1):this.select(0)},viewer:function(t){a.onClick&&a.onClick.call({media:n.media.list[this.selectedIndex]})}};if(e=i.findParentNode(t.target,function(t){return t.getAttribute("data-media-thumbnail")?(l="thumbnail",!0):"media-list-prev-handle"==t.getAttribute("data-media-viewer-els")?(l="prev",!0):"media-list-next-handle"==t.getAttribute("data-media-viewer-els")?(l="next",!0):"viewer"==t.getAttribute("data-media-viewer-els")?(l="viewer",!0):a.target.get(0)==t||void 0})){for(var r in s)if(r==l){o=s[r].call(this,e);break}return this}return this},d=function(){if(n.media&&n.media.list&&n.media.list.length>0){for(var t=n.media.list.length,e=0;t--;)if(n.media.list[t].selected){e=t;break}0==e&&(n.media.list[0].selected=!0);try{return e}finally{t=null,e=null}}},c=function(){var t=this.$.list.find("[data-media-thumbnail="+this.selectedIndex+"]"),e=t.position(),i=t.outerWidth(),n=this.$.list.outerWidth(),a=this.$["list-table"].position().left,o=this.$["list-table"].outerWidth(),l=0;e.left+i+a>n?(l=n-(e.left+i),a!=l&&this.$["list-table"].css({left:a=l})):e.left+a<0&&(l=e.left,l>0&&(l=0),a!=l&&this.$["list-table"].css({left:a=l})),a!=l&&a+o<n&&(l=n-o,l>0&&(l=0),this.$["list-table"].css({left:l})),t=null,e=null,i=null,n=null,a=null,l=null},u={on:function(t){var e=function(e){var i=e;return"changedTouches"in e.originalEvent&&e.changedTouches&&(i=e.originalEvent.changedTouches[0]),t.__dx=i.clientX-t.clientX,t.__dy=i.clientY-t.clientY,t.__time=(new Date).getTime(),Math.abs(t.__dx)>Math.abs(t.__dy)?{left:t.__dx}:{top:t.__dy}},l=this.$.viewer.width();jQuery(document.body).bind(o.mousemove+".ax5media-viewer-"+this.instanceId,function(t){var o=e(t);if("left"in o){if(a.$["viewer-holder"].css(o),Math.abs(a.mousePosition.__dx)>l/3){var s=0;a.mousePosition.__dx>0?s=a.selectedIndex>0?a.selectedIndex-1:n.media.list.length-1:a.selectedIndex<n.media.list.length-1&&(s=a.selectedIndex+1),a.select(s),u.off.call(a)}i.stopEvent(t)}}).bind(o.mouseup+".ax5media-viewer-"+this.instanceId,function(t){u.off.call(a)}).bind("mouseleave.ax5media-viewer-"+this.instanceId,function(t){u.off.call(a)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){a.$["viewer-holder"].css({left:0}),jQuery(document.body).unbind(o.mousemove+".ax5media-viewer-"+this.instanceId).unbind(o.mouseup+".ax5media-viewer-"+this.instanceId).unbind("mouseleave.ax5media-viewer-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}};this.init=function(){this.onStateChanged=n.onStateChanged,this.onClick=n.onClick,this.id="ax5-media-viewer-"+ax5.getGuid(),n.target&&n.media&&n.media.list&&n.media.list.length>0&&this.attach(n.target)},this.attach=function(t,e){return t||console.log(ax5.info.getError("ax5mediaViewer","401","setConfig")),"undefined"!=typeof e&&this.setConfig(e,!1),this.target=jQuery(t),this.target.html(s.call(this)),this.$={root:this.target.find("[data-ax5-ui-media-viewer]"),"viewer-holder":this.target.find('[data-media-viewer-els="viewer-holder"]'),viewer:this.target.find('[data-media-viewer-els="viewer"]'),"viewer-prev":this.target.find('[data-media-viewer-els="viewer-prev"]'),"viewer-loading":this.target.find('[data-media-viewer-els="viewer-loading"]'),"list-holder":this.target.find('[data-media-viewer-els="media-list-holder"]'),"list-prev-handle":this.target.find('[data-media-viewer-els="media-list-prev-handle"]'),list:this.target.find('[data-media-viewer-els="media-list"]'),"list-table":this.target.find('[data-media-viewer-els="media-list-table"]'),"list-next-handle":this.target.find('[data-media-viewer-els="media-list-next-handle"]')},this.align(),jQuery(window).unbind("resize.ax5media-viewer-"+this.id).bind("resize.ax5media-viewer-"+this.id,function(){this.align(),c.call(this)}.bind(this)),this.target.unbind("click").bind("click",function(t){t=t||window.event,r.call(this,t),i.stopEvent(t)}.bind(this)),this.$.viewer.unbind(o.mousedown).bind(o.mousedown,function(t){this.mousePosition=l(t),u.on.call(this,this.mousePosition)}.bind(this)).unbind("dragstart").bind("dragstart",function(t){return i.stopEvent(t),!1}),this.select(d.call(this)),this},this.align=function(){if(this.$["viewer-holder"].css({height:this.$.viewer.width()/n.viewer.ratio}),this.$.viewer.css({height:this.$.viewer.width()/n.viewer.ratio}),"image"==this.$.viewer.data("media-type")){var t=this.$.viewer.find("img");t.css({width:this.$.viewer.height()*this.$.viewer.data("img-ratio"),height:this.$.viewer.height()}),setTimeout(function(t){t.css({left:(this.$.viewer.width()-t.width())/2})}.bind(this,t),1)}else"video"==this.$.viewer.data("media-type")&&this.$.viewer.find("iframe").css({width:this.$.viewer.height()*this.$.viewer.data("img-ratio"),height:this.$.viewer.height()});this.$["viewer-loading"].css({height:this.$.viewer.height()});var e="%"==i.right(n.media.width,1)?i.number(n.media.width)/100*this.$.viewer.width():i.number(n.media.width),a="%"==i.right(n.media.height,1)?i.number(n.media.height)/100*this.$.viewer.width():i.number(n.media.height);return e=Math.floor(e),a=Math.floor(a),this.$["list-prev-handle"].css({width:1.5*e}),this.$["list-next-handle"].css({width:1.5*e}),this.$.list.css({height:a}),this.$["list-table"].find("[data-media-thumbnail]").css({width:e,height:a}),this.$["list-table"].find("[data-media-thumbnail-video]").css({width:e,height:a}),this},this.select=function(){var t={image:function(t,e){if(n.loading){a.$["viewer-loading"].show();var i=[this.$.viewer.width(),this.$.viewer.height()],o=new Image;return o.src=t.image[n.columnKeys.src],o.onload=function(){a.$["viewer-loading"].fadeOut();var t=i[1],n=t*o.width/o.height;e(o,Math.floor(n),t)},o}var i=[this.$.viewer.width(),this.$.viewer.height()],o=new Image;return o.src=t.image[n.columnKeys.src],this.$.viewer.find("img").get(0)?(a.$["viewer-prev"].html(this.$.viewer.html()).addClass("slide-out"),o.onload=function(){var t=i[1],l=t*o.width/o.height;e(o,Math.floor(l),t),setTimeout(function(){a.$["viewer-prev"].removeClass("slide-out")},n.animateTime)},o):(o.onload=function(){var t=i[1],n=t*o.width/o.height;e(o,Math.floor(n),t)},o)},video:function(t,e){a.$["viewer-loading"].show();var i=[this.$.viewer.width(),this.$.viewer.height()],o=jQuery(t.video[n.columnKeys.html]);e(o,i[0],i[1]),a.$["viewer-loading"].fadeOut()}},e={image:function(t,e,i){t.width=e,t.height=i;var n=$(t);this.$.viewer.html(n),n.css({left:(this.$.viewer.width()-e)/2}),this.$.viewer.data("media-type","image"),this.$.viewer.data("img-ratio",e/i)},video:function(t,e,i){t.css({width:e,height:i}),this.$.viewer.html(t),this.$.viewer.data("media-type","video"),this.$.viewer.data("img-ratio",e/i)}},i=function(t){this.$.list.find("[data-media-thumbnail]").removeClass("selected"),this.$.list.find("[data-media-thumbnail="+t+"]").addClass("selected"),c.call(this)};return function(a){if("undefined"==typeof a)return this;this.selectedIndex=Number(a);var o=n.media.list[a];
i.call(this,a);for(var l in t)if(o[l]){t[l].call(this,o,e[l].bind(this));break}return this}}(),this.setMediaList=function(t){return n.media.list=[].concat(t),this.attach(n.target),this},this.move=function(t){var e={prev:function(){this.selectedIndex>0?this.select(this.selectedIndex-1):this.select(n.media.list.length-1)},next:function(){this.selectedIndex<n.media.list.length-1?this.select(this.selectedIndex+1):this.select(0)}};t||(t="next"),t in e&&e[t].call(this)},this.play=function(t){var e=jQuery.extend({interval:5e3},t);this.playTimer&&clearTimeout(this.playTimer),this.playTimer=setTimeout(function(){a.move("next"),a.play(e)},e.interval)},this.stop=function(){this.playTimer&&clearTimeout(this.playTimer)},this.main=function(){e.mediaViewer_instance=e.mediaViewer_instance||[],e.mediaViewer_instance.push(this),arguments&&i.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return n}()),t=ax5.ui.mediaViewer}(),function(){var t=ax5.ui.mediaViewer,e=function(t){return'\n<div data-ax5-ui-media-viewer="{{id}}" class="{{theme}}">\n    <div data-media-viewer-els="viewer-holder">\n        <div data-media-viewer-els="viewer"></div>\n    </div>\n    {{#loading}}\n    <div data-media-viewer-els="viewer-loading">\n        <div class="ax5-ui-media-viewer-loading-holder">\n            <div class="ax5-ui-media-viewer-loading-cell">\n            {{{loading.icon}}}\n            {{{loading.text}}}\n            </div>\n        </div>\n    </div>\n    {{/loading}}\n    {{^loading}}\n    <div data-media-viewer-els="viewer-prev"></div>\n    {{/loading}}\n    \n    {{#media}}\n    <div data-media-viewer-els="media-list-holder" {{#hideMediaList}}style="display:none;"{{/hideMediaList}}>\n        <div data-media-viewer-els="media-list-prev-handle">{{{prevHandle}}}</div>\n        <div data-media-viewer-els="media-list">\n            <div data-media-viewer-els="media-list-table">\n            {{#list}}\n                <div data-media-viewer-els="media-list-table-td">\n                {{#image}}\n                <div data-media-thumbnail="{{@i}}">\n                <img src="{{'+t.poster+'}}" data-media-thumbnail-image="{{@i}}" />\n                </div>\n                {{/image}}\n                {{#video}}\n                <div data-media-thumbnail="{{@i}}">{{#'+t.poster+'}}<img src="{{.}}" data-media-thumbnail-video="{{@i}}" />>{{/'+t.poster+"}}{{^"+t.poster+'}}<a data-media-thumbnail-video="{{@i}}">{{{media.'+t.poster+"}}}</a>{{/"+t.poster+'}}</div>\n                {{/video}}\n                </div>\n            {{/list}}\n            </div>\n        </div>\n        <div data-media-viewer-els="media-list-next-handle">{{{nextHandle}}}</div>\n    </div>\n    {{/media}}\n    \n</div>'};t.tmpl={frame:e,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"uploader"},function(){var n=function(){var n=this,a=void 0;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",lang:{upload:"Upload",abort:"Abort"},uploadedBox:{columnKeys:{name:"name",type:"type",size:"size",uploadedName:"uploadedName",uploadedPath:"uploadedPath",downloadPath:"downloadPath",previewPath:"previewPath",thumbnail:"thumbnail"}},animateTime:100,accept:"*/*",multiple:!1,manualUpload:!1,progressBox:!0},this.defaultBtns={upload:{label:this.config.lang.upload,theme:"btn-primary"},abort:{label:this.config.lang.abort,theme:this.config.theme}},this.uploadedFiles=[],this.$target=null,this.$inputContainer=null,this.$inputFile=null,this.$inputFileForm=null,this.$fileSelector=null,this.$dropZone=null,this.$uploadedBox=null,this.__uploading=!1,this.selectedFiles=[],this.selectedFilesTotal=0,this.__loaded=0,a=this.config;var o=function(t){return a.onStateChanged?a.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),t=null,!0}.bind(this),l=function(t){var i=void 0;return ax5.info.supportFileApi?"dataTransfer"in t?i=t.dataTransfer.files:"target"in t?i=t.target.files:t&&(i=t):i={path:t.target.value},!!i&&(length in i?1==i.length?this.selectedFiles=[i[0]]:this.selectedFiles=e.toArray(i):this.selectedFiles=[i],a.progressBox&&c(),a.manualUpload||this.send(),void(ax5.info.supportFileApi||r(!1)))}.bind(this),s=function(){this.$fileSelector.off("click.ax5uploader").on("click.ax5uploader",function(){this.$inputFile.trigger("click")}.bind(this)),ax5.info.supportFileApi||(this.$fileSelector.off("mouseover.ax5uploader").on("mouseover.ax5uploader",function(){r(!0)}.bind(this)),this.$inputFile.off("mouseover.ax5uploader").on("mouseover.ax5uploader",function(){this.$fileSelector.addClass("active")}.bind(this)),this.$inputFile.off("mouseout.ax5uploader").on("mouseout.ax5uploader",function(){this.$fileSelector.removeClass("active"),r(!1)}.bind(this))),function(){return!(!this.$uploadedBox||!this.$uploadedBox.get(0))&&(this.$uploadedBox.on("click","[data-uploaded-item-cell]",function(){var t=jQuery(this),e=t.attr("data-uploaded-item-cell"),i=Number(t.parents("[data-ax5uploader-uploaded-item]").attr("data-ax5uploader-uploaded-item")),o={};a.uploadedBox&&a.uploadedBox.onclick&&(o={self:n,cellType:e,uploadedFiles:n.uploadedFiles,fileIndex:i},a.uploadedBox.onclick.call(o,o)),t=null,e=null,i=null,o=null}),void this.$uploadedBox.on("dragstart",function(t){return e.stopEvent(t),!1}))}.call(this),function(){if(!ax5.info.supportFileApi)return!1;if(!this.$dropZone||!this.$dropZone.get(0))return!1;this.$dropZone.parent().on("click","[data-ax5uploader-dropzone]",function(t){var i=jQuery(t.target);0!=i.parents("[data-ax5uploader-uploaded-item]").length||i.attr("data-ax5uploader-uploaded-item")||(this==t.target||$.contains(this,t.target))&&(e.isFunction(a.dropZone.onclick)?a.dropZone.onclick.call({self:n}):n.$inputFile.trigger("click"))}),this.$dropZone.get(0).addEventListener("dragover",function(t){e.stopEvent(t),e.isFunction(a.dropZone.ondragover)?a.dropZone.ondragover.call({self:n}):n.$dropZone.addClass("dragover")},!1),this.$dropZone.get(0).addEventListener("dragleave",function(t){e.stopEvent(t),e.isFunction(a.dropZone.ondragover)?a.dropZone.ondragout.call({self:n}):n.$dropZone.removeClass("dragover")},!1),this.$dropZone.get(0).addEventListener("drop",function(t){e.stopEvent(t),e.isFunction(a.dropZone.ondrop)?a.dropZone.ondrop.call({self:n}):n.$dropZone.removeClass("dragover"),l(t||window.event)},!1)}.call(this)}.bind(this),r=function(t){if(t){if(!ax5.info.supportFileApi){var e=this.$fileSelector.offset();e.width=this.$fileSelector.outerWidth(),e.height=this.$fileSelector.outerHeight(),this.$inputFile.css(e)}}else this.$inputFile.css({left:-1e3,top:-1e3})}.bind(this),d=function(t){var e=function(){var e=jQuery(window),i=jQuery(document.body),n={},o=6,l={},s={},r=void 0;n=this.$progressBox.parent().get(0)==this.$target.get(0)?this.$fileSelector.position():this.$fileSelector.offset(),l={width:this.$fileSelector.outerWidth(),height:this.$fileSelector.outerHeight()},s={winWidth:Math.max(e.width(),i.width()),winHeight:Math.max(e.height(),i.height()),width:this.$progressBox.outerWidth(),height:this.$progressBox.outerHeight()},a.progressBoxDirection&&""!==a.progressBoxDirection&&"auto"!==a.progressBoxDirection?r=a.progressBoxDirection:(r="top",n.top-s.height-o<0?r="top":n.top+l.height+s.height+o>s.winHeight&&(r="bottom")),t&&this.$progressBox.addClass("direction-"+r);var d=function(){var t={left:0,top:0};switch(r){case"top":t.left=n.left+l.width/2-s.width/2,t.top=n.top+l.height+o;break;case"bottom":t.left=n.left+l.width/2-s.width/2,t.top=n.top-s.height-o;break;case"left":t.left=n.left+l.width+o,t.top=n.top-s.height/2+l.height/2;break;case"right":t.left=n.left-s.width-o,t.top=n.top-s.height/2+l.height/2}return t}();(function(){"top"!=r&&"bottom"!=r||(d.left<0?(d.left=o,this.$progressBoxArrow.css({left:n.left+l.width/2-d.left})):d.left+s.width>s.winWidth&&(d.left=s.winWidth-s.width-o,this.$progressBoxArrow.css({left:n.left+l.width/2-d.left})))}).call(this),this.$progressBox.css(d)};this.$progressBox.css({top:-999}),t&&(function(){return a.viewport?jQuery(a.viewport.selector):this.$target}.call(this).append(this.$progressBox),this.$progressBox.off("click.ax5uploader").on("click.ax5uploader","button",function(t){var e=t.target.getAttribute("data-pregressbox-btn"),i={upload:function(){this.send()},abort:function(){this.abort()}};i[e]&&i[e].call(this)}.bind(this))),setTimeout(function(){e.call(this)}.bind(this))}.bind(this),c=function(){this.$progressBox.removeClass("destroy"),this.$progressUpload.removeAttr("disabled"),this.$progressAbort.removeAttr("disabled"),d("append"),o({self:this,state:"open"})}.bind(this),u=function(){this.$progressBox.addClass("destroy"),setTimeout(function(){this.$progressBox.remove()}.bind(this),a.animateTime)}.bind(this),h=function(){var t={html5:function(){var t=this.selectedFiles.shift();if(!t)return g(),this;t[0]&&(t=t[0]);var i=new FormData;this.$target.find("input").each(function(){i.append(this.name,this.value)}),i.append(a.form.fileName,t),this.xhr=new XMLHttpRequest,this.xhr.open("post",e.isString(a.form.action)?a.form.action:a.form.action(),!0),this.xhr.onload=function(t){var i=t.target.response;try{"string"==typeof i&&(i=e.parseJson(i))}catch(t){return!1}return a.debug&&console.log(i),i.error?(a.debug&&console.log(i.error),e.isFunction(a.onuploaderror)&&a.onuploaderror.call({self:this,error:i.error},i),n.send(),!1):(f(i),void n.send())},this.xhr.upload.onprogress=function(t){p(t),e.isFunction(a.onprogress)&&a.onprogress.call({loaded:t.loaded,total:t.total},t)},this.xhr.send(i)},form:function(){this.__uploading=!0;var t=jQuery('<iframe src="javascript:false;" name="ax5uploader-'+this.instanceId+'-iframe" style="display:none;"></iframe>');jQuery(document.body).append(t),t.load(function(){var e=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,i=e.documentElement?e.documentElement:e.body,n=i.textContent?i.textContent:i.innerText,o=void 0;try{o=JSON.parse(n)}catch(l){o={error:"Syntax error",body:n}}a.debug&&console.log(o),o.error?console.log(o):(f(o),t.remove(),setTimeout(function(){g()},300))}),this.$inputFileForm.attr("target","ax5uploader-"+this.instanceId+"-iframe").attr("action",a.form.action).submit(),this.selectedFilesTotal=1,p({loaded:1,total:1})}};if(this.__uploading===!1){var i=0;this.selectedFiles.forEach(function(t){i+=t.size}),this.selectedFilesTotal=i,this.__loaded=0,this.__uploading=!0,this.$progressUpload.attr("disabled","disabled"),this.$progressAbort.removeAttr("disabled")}t[ax5.info.supportFileApi?"html5":"form"].call(this)}.bind(this),p=function(t){this.__loaded+=t.loaded,this.$progressBar.css({width:e.number(this.__loaded/this.selectedFilesTotal*100,{round:2})+"%"}),t.lengthComputable&&t.loaded>=t.total}.bind(this),f=function(t){a.debug&&console.log(t),this.uploadedFiles=this.uploadedFiles.concat(t),x(),e.isFunction(a.onuploaded)&&a.onuploaded.call({self:this},t)}.bind(this),g=function(){this.__uploading=!1,this.$progressUpload.removeAttr("disabled"),this.$progressAbort.attr("disabled","disabled"),a.progressBox&&u(),e.isFunction(a.onuploadComplete)&&a.onuploadComplete.call({self:this}),v()}.bind(this),m=function(){var t={html5:function(){this.xhr&&this.xhr.abort()},form:function(){}};this.__uploading=!1,this.$progressUpload.removeAttr("disabled"),this.$progressAbort.attr("disabled","disabled"),t[ax5.info.supportFileApi?"html5":"form"].call(this),a.progressBox&&u(),v(),a.debug&&console.log("cancelUpload")}.bind(this),x=function(){return null===this.$uploadedBox?this:(this.$uploadedBox.html(i.tmpl.get("upoadedBox",{uploadedFiles:this.uploadedFiles,icon:a.uploadedBox.icon,lang:a.uploadedBox.lang,supportFileApi:!!ax5.info.supportFileApi},a.uploadedBox.columnKeys)),void this.$uploadedBox.find("img").on("error",function(){$(this).parent().addClass("no-image")}))}.bind(this),v=function(){this.$inputFile&&this.$inputFile.get(0)&&this.$inputFile.remove(),this.$inputFileForm&&this.$inputFileForm.get(0)&&this.$inputFileForm.remove(),this.$inputFile=jQuery(i.tmpl.get.call(this,"inputFile",{instanceId:this.instanceId,multiple:a.multiple,accept:a.accept,name:a.form.fileName})),ax5.info.supportFileApi?jQuery(document.body).append(this.$inputFile):(this.$fileSelector.attr("tabindex",-1),this.$inputFileForm=jQuery(i.tmpl.get.call(this,"inputFileForm",{instanceId:this.instanceId})),this.$inputFileForm.append(this.$inputFile),jQuery(document.body).append(this.$inputFileForm)),this.$inputFile.off("change.ax5uploader").on("change.ax5uploader",function(t){l(t)}.bind(this))}.bind(this);this.init=function(t){return a=jQuery.extend(!0,{},a,t),a.target?(this.$target=jQuery(a.target),a.dropZone&&a.dropZone.target&&ax5.info.supportFileApi&&(this.$dropZone=jQuery(a.dropZone.target),this.$dropZone.attr("data-ax5uploader-dropzone",this.instanceId)),a.uploadedBox&&a.uploadedBox.target&&(this.$uploadedBox=jQuery(a.uploadedBox.target)),function(t){e.isObject(t)&&!t.error&&(a=jQuery.extend(!0,a,t))}.call(this,e.parseJson(this.$target.attr("data-ax5uploader-config"),!0)),this.$fileSelector=this.$target.find('[data-ax5uploader-button="selector"]'),0===this.$fileSelector.length?(console.log(ax5.info.getError("ax5uploader","402","can not find file selector")),this):(v(),a.btns=jQuery.extend({},this.defaultBtns,a.btns),this.$progressBox=jQuery(i.tmpl.get.call(this,"progressBox",{instanceId:this.instanceId,btns:a.btns})),this.$progressBar=this.$progressBox.find('[role="progressbar"]'),this.$progressBoxArrow=this.$progressBox.find(".ax-progressbox-arrow"),this.$progressUpload=this.$progressBox.find('[data-pregressbox-btn="upload"]'),this.$progressAbort=this.$progressBox.find('[data-pregressbox-btn="abort"]'),ax5.info.supportFileApi||this.$progressAbort.hide(),s(),x(),this)):(console.log(ax5.info.getError("ax5uploader","401","init")),this)},this.send=function(){return function(){if(this.selectedFiles.length&&e.isFunction(a.validateSelectedFiles)){var t={self:this,uploadedFiles:this.uploadedFiles,selectedFiles:this.selectedFiles};if(!a.validateSelectedFiles.call(t,t))return m(),!1}return h(),this}}(),this.abort=function(){return function(){return ax5.info.supportFileApi?(m(),this):(alert("This browser not supported abort method"),this)}}(),this.setUploadedFiles=function(t){if(e.isArray(t)&&(this.uploadedFiles=t),e.isString(t))try{this.uploadedFiles=JSON.parse(t)}catch(i){}return x(),this},this.clear=function(){return this.setUploadedFiles([]),this},this.removeFile=function(t){return isNaN(Number(t))||this.uploadedFiles.splice(t,1),x(),this},this.removeFileAll=function(){return this.uploadedFiles=[],x(),this},this.selectFile=function(){return!!ax5.info.supportFileApi&&(this.$inputFile.trigger("click"),!0)},this.main=function(){t.uploader_instance=t.uploader_instance||[],t.uploader_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),i=ax5.ui.uploader}(),function(){var t=ax5.ui.uploader,e=function(t){return"\n        "},i=function(t){return'<input type="file" data-ax5uploader-input="{{instanceId}}" name="{{name}}" {{#multiple}}multiple{{/multiple}} accept="{{accept}}" />'},n=function(t){return'<form data-ax5uploader-form="{{instanceId}}" name="ax5uploader-{{instanceId}}-form" method="post" enctype="multipart/form-data"></form>'},a=function(t){return'\n<div data-ax5uploader-progressbox="{{instanceId}}" class="{{theme}}">\n    <div class="ax-progressbox-body">\n        <div class="ax-pregressbox-content">\n            <div class="progress">\n              <div class="progress-bar progress-bar-striped active" role="progressbar" style="width: 0">\n                <span class="sr-only">0% Complete</span>\n              </div>\n            </div>\n        </div>\n        {{#btns}}\n            <div class="ax-progressbox-buttons">\n            {{#btns}}\n                {{#@each}}\n                <button data-pregressbox-btn="{{@key}}" class="btn btn-default {{@value.theme}}">{{@value.label}}</button>\n                {{/@each}}\n            {{/btns}}\n            </div>\n        {{/btns}}\n    </div>\n    <div class="ax-progressbox-arrow"></div>\n</div>\n'},o=function(t){return'\n{{#uploadedFiles}}<div data-ax5uploader-uploaded-item="{{@i}}">\n    <div class="uploaded-item-preview">\n        {{#'+t.thumbnail+'}}<img src="'+t.apiServerUrl+"{{"+t.thumbnail+'}}">{{/'+t.thumbnail+'}}\n    </div>\n    <div class="uploaded-item-holder">\n        <div class="uploaded-item-cell" data-uploaded-item-cell="download">{{{icon.download}}}</div>\n        <div class="uploaded-item-cell" data-uploaded-item-cell="filename">{{'+t.name+'}}</div>\n        <div class="uploaded-item-cell" data-uploaded-item-cell="filesize">({{#@fn_get_byte}}{{'+t.size+'}}{{/@fn_get_byte}})</div>\n        <div class="uploaded-item-cell" data-uploaded-item-cell="delete">{{{icon.delete}}}</div>\n    </div>\n</div>{{/uploadedFiles}}\n{{^uploadedFiles}}\n{{#supportFileApi}}{{{lang.supportedHTML5_emptyListMsg}}}{{/supportFileApi}}\n{{^supportFileApi}}{{{lang.emptyListMsg}}}{{/supportFileApi}}\n{{/uploadedFiles}}\n'};t.tmpl={uploadProgress:e,inputFile:i,inputFileForm:n,progressBox:a,upoadedBox:o,get:function(e,i,n){return i["@fn_get_byte"]=function(){return function(t,e){return ax5.util.number(e(t),{round:2,"byte":!0})}},ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"combobox"},function(){return function(){var t,n=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,removeIcon:"X",lang:{noSelected:"",noOptions:"no options",loading:"now loading.."},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activecomboboxOptionGroup=null,this.activecomboboxQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,t=this.config;var a=jQuery(window),o=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),"changeValue"==e.state&&(t&&t.onChange?t.onChange.call(e,e):this.onChange&&this.onChange.call(e,e)),t=null,e=null,!0},l=function(){for(var t,i=this.queue.length;i--;){var n=this.queue[i];if(n.$display&&(t=Math.max(n.$select.outerWidth(),e.number(n.minWidth)),n.$display.css({"min-width":t}),n.reset&&n.$display.find(".addon-icon-reset").css({"line-height":this.queue[i].$display.height()+"px"}),n.multiple)){var a=function(){return e.number(n.$display.css("border-top-width"))+e.number(n.$display.css("border-bottom-width"))}.call(this);n.$target.height(""),n.$display.height("");var o=n.$displayTable.outerHeight();Math.abs(o-n.$target.height())>a&&(n.$target.css({height:o+a+4}),n.$display.css({height:o+a+4}))}}return i=null,t=null,this},s=function(t){if(!this.activecomboboxOptionGroup)return this;var e,i=this.queue[this.activecomboboxQueueIndex],n={},o=0,l={},s={};t&&jQuery(document.body).append(this.activecomboboxOptionGroup),n=i.$target.offset(),l={width:i.$target.outerWidth(),height:i.$target.outerHeight()},s={winWidth:Math.max(a.width(),jQuery(document.body).width()),winHeight:Math.max(a.height(),jQuery(document.body).height()),width:this.activecomboboxOptionGroup.outerWidth(),height:this.activecomboboxOptionGroup.outerHeight()},i.direction&&""!==i.direction&&"auto"!==i.direction?e=i.direction:(e="top",n.top-s.height-o<0?e="top":n.top+l.height+s.height+o>s.winHeight&&(e="bottom")),t&&this.activecomboboxOptionGroup.addClass("direction-"+e),this.activecomboboxOptionGroup.css(function(){if("top"==e){if(n.top+l.height+s.height+o>s.winHeight){var t=n.top+l.height/2-s.height/2;return t+s.height+o>s.winHeight&&(t=0),t<0&&(t=0),{left:n.left,top:t,width:l.width}}return{left:n.left,top:n.top+l.height+1,width:l.width}}if("bottom"==e)return{left:n.left,top:n.top-s.height-1,width:l.width}}.call(this))},r=function(t,i){if(!this.activecomboboxOptionGroup)return this;var n=this.queue[this.activecomboboxQueueIndex],a="display";return(i=e.findParentNode(t.target,function(t){return t.getAttribute("data-option-value")?(a="optionItem",!0):n.$target.get(0)==t?(a="display",!0):void 0}))?("optionItem"===a&&(_.call(this,n.id,{index:{gindex:i.getAttribute("data-option-group-index"),index:i.getAttribute("data-option-index")}},void 0,!0),l.call(this),s.call(this),n.multiple||this.close()),this):(this.close(),this)},d=function(t){var e=this.queue[t],n={};return n.id=e.id,n.theme=e.theme,n.size="ax5combobox-option-group-"+e.size,n.multiple=e.multiple,n.lang=e.lang,n.options=e.options,n.selected=e.selected,n.hasSelected=n.selected&&n.selected.length>0,n.removeIcon=e.removeIcon,i.tmpl.get.call(this,"label",n,e.columnKeys)},c=function(t){var e=this.queue[t];e.$displayLabel.find("[data-ax5combobox-selected-label]").remove(),e.$displayLabelInput.before(d.call(this,t))},u=function(t){return this.queue[t].disabled?this:(this.queue[t].$displayLabel.trigger("focus"),void this.queue[t].$displayLabelInput.focus())},h=function(t){this.queue[t].$displayLabelInput.val("")},p=function(t){this.queue[t].$displayLabel.trigger("blur"),this.queue[t].$displayLabelInput.trigger("blur")},f=function(t,n){this.queue[t].waitOptions=!0,this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(i.tmpl.get.call(this,"option",this.queue[t],this.queue[t].columnKeys))),this.queue[t].onSearch.call({self:this,item:this.queue[t],searchWord:n},function(t){var n={},a=this.queue[this.activecomboboxQueueIndex];return!!a&&(function(t,i){var n={};i.options.forEach(function(e,i){e["@index"]=i,n[e[t.columnKeys.optionValue]]=e}),e.isArray(t.selected)&&t.selected.forEach(function(e){n[e[t.columnKeys.optionValue]]&&(i.options[n[e[t.columnKeys.optionValue]]["@index"]][t.columnKeys.optionSelected]=!0)})}(a,t),a.options=v.call(this,this.activecomboboxQueueIndex,t.options),l.call(this),n.id=a.id,n.theme=a.theme,n.size="ax5combobox-option-group-"+a.size,n.multiple=a.multiple,n.lang=a.lang,n.options=a.options,void this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(i.tmpl.get.call(this,"options",n,a.columnKeys))))}.bind(this))},g=function(t,e){if(this.activecomboboxQueueIndex==-1)return this;var i,n=[],a=-1,o=this.queue[t].indexedOptions.length-1;if(""!=e){var l=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;if(e=e.replace(l,""),this.queue[t].onSearch){f.call(this,t,e);try{return n}finally{n=null,a=null,o=null,i=null}}for(;o-a++;){if(i=this.queue[t].indexedOptions[a],(""+i.text).toLowerCase()==e.toLowerCase()){n=[{"@findex":i["@findex"],optionsSort:0}];break}var s=(""+i.text).toLowerCase().search(e.toLowerCase());if(s>-1&&(n.push({"@findex":i["@findex"],optionsSort:s}),n.length>2))break;s=null}n.sort(function(t,e){return t.optionsSort-e.optionsSort})}n&&n.length>0?x.call(this,t,void 0,n[0]["@findex"]):m.call(this,t);try{return n}finally{n=null,a=null,o=null,i=null}},m=function(t){this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.find("[data-option-focus-index]").removeClass("hover").removeAttr("data-option-selected"),this.queue[t].optionFocusIndex=-1},x=function(t,e,i){var n,a,o,l,s=this.queue[t];if(this.activecomboboxOptionGroup&&s.options&&s.options.length>0){if("undefined"!=typeof i?n=i:(a=s.optionFocusIndex==-1?s.optionSelectedIndex||-1:s.optionFocusIndex,a==-1?n=0:(n=a+e,n<0?n=0:n>s.optionItemLength-1&&(n=s.optionItemLength-1))),s.optionFocusIndex=n,s.options[n]&&s.options[n].hide){if("undefined"==typeof e)return this;for(;s.options[n].hide;){if(n+=e,n<0){n=0;break}if(n>s.optionItemLength-1){n=s.optionItemLength-1;break}}}if("undefined"!=typeof n&&(this.activecomboboxOptionGroup.find("[data-option-focus-index]").removeClass("hover"),o=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+n+'"]').addClass("hover"),l=this.activecomboboxOptionGroup.find('[data-els="content"]'),o.get(0))){var r=o.outerHeight(),d=l.innerHeight(),c=l.scrollTop(),u=o.position().top+l.scrollTop();d+c<u+r?l.scrollTop(u+r-d):c>u&&l.scrollTop(u),"undefined"!=typeof e&&s.$displayLabelInput.val(s.options[n].text)}}},v=function(){var t=function(t,e){e?this.queue[t].selected.push(jQuery.extend({},e)):this.queue[t].selected=[]};return function(i,a){var o,l,s,r=this.queue[i],d=0;return t.call(this,i,!1),a?(r.options=a,r.indexedOptions=[],o=[],o.push('<option value=""></option>'),r.options.forEach(function(e,a){e.optgroup?(e["@gindex"]=a,e.options.forEach(function(e,l){e["@index"]=l,e["@findex"]=d,o.push('<option value="'+e[r.columnKeys.optionValue]+'" '+(e[r.columnKeys.optionSelected]?' selected="selected"':"")+">"+e[r.columnKeys.optionText]+"</option>"),e[r.columnKeys.optionSelected]&&t.call(n,i,e),r.indexedOptions.push({"@gindex":a,"@index":l,"@findex":d,value:e[r.columnKeys.optionValue],text:e[r.columnKeys.optionText]}),d++})):(e["@index"]=a,e["@findex"]=d,o.push('<option value="'+e[r.columnKeys.optionValue]+'" '+(e[r.columnKeys.optionSelected]?' selected="selected"':"")+">"+e[r.columnKeys.optionText]+"</option>"),e[r.columnKeys.optionSelected]&&t.call(n,i,e),r.indexedOptions.push({"@index":a,"@findex":d,value:e[r.columnKeys.optionValue],text:e[r.columnKeys.optionText]}),d++)}),r.optionItemLength=d,r.$select.html(o.join(""))):(r.$select.get(0).options&&r.$select.get(0).options.length&&(r.$select.get(0).options[0].selected=!1),l=e.toArray(r.$select.get(0).options),s=[],l.forEach(function(e,a){var o={};o[r.columnKeys.optionValue]=e.value,o[r.columnKeys.optionText]=e.text,o[r.columnKeys.optionSelected]=e.selected,o["@index"]=a,o["@findex"]=d,e.selected&&t.call(n,i,o),s.push(o),d++,o=null}),r.options=s,r.indexedOptions=s,r.$select.prepend('<option value=""></option>'),r.$select.get(0).options[0].selected=!0),o=null,l=null,s=null,r.options}}(),b=function(t){return t instanceof jQuery?t=t.data("data-ax5combobox-id"):e.isString(t)||(t=jQuery(t).data("data-ax5combobox-id")),e.isString(t)?e.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5combobox","402","getQueIdx"))},y=function(t,e,i){return"undefined"==typeof i?!t.multiple||!e:i},w=function(t){this.queue[t].options.forEach(function(t){t.optgroup?t.options.forEach(function(t){t.selected=!1}):t.selected=!1})},_=function(){var t={index:function(t,i,a,o){var l=this.queue[t];e.isString(i.index.gindex)?"undefined"!=typeof l.options[i.index.gindex]&&(l.options[i.index.gindex].options[i.index.index][l.columnKeys.optionSelected]=y(l,l.options[i.index.gindex].options[i.index.index][l.columnKeys.optionSelected],a),n.activecomboboxOptionGroup&&n.activecomboboxOptionGroup.find('[data-option-group-index="'+i.index.gindex+'"][data-option-index="'+i.index.index+'"]').attr("data-option-Selected",l.options[i.index.gindex].options[i.index.index][l.columnKeys.optionSelected].toString())):"undefined"!=typeof l.options[i.index.index]&&(l.options[i.index.index][l.columnKeys.optionSelected]=y(l,l.options[i.index.index][l.columnKeys.optionSelected],a),n.activecomboboxOptionGroup&&n.activecomboboxOptionGroup.find('[data-option-index="'+i.index.index+'"]').attr("data-option-Selected",l.options[i.index.index][l.columnKeys.optionSelected].toString())),"undefined"!=typeof o&&"justSetValue"===o||(v.call(this,t,l.options),s.call(this))},arr:function(i,a,o,l){a.forEach(function(a){if(e.isString(a)||e.isNumber(a))t.text.call(n,i,a,o,"justSetValue");else for(var l in t)if(a[l]){t[l].call(n,i,a,o,"justSetValue");break}}),v.call(this,i,this.queue[i].options),s.call(this)},value:function(t,i,n,a){var o,l=this.queue[t],r=e.search(l.options,function(){return this[l.columnKeys.optionValue]==i[l.columnKeys.optionValue]});r>-1?l.options[r][l.columnKeys.optionSelected]=y(l,l.options[r][l.columnKeys.optionSelected],n):(r=l.options.length,o={"@index":r,hide:!0,addedOption:!0},o[l.columnKeys.optionValue]=i,o[l.columnKeys.optionText]=i,l.options.push(o),l.options[r][l.columnKeys.optionSelected]=y(l,l.options[r][l.columnKeys.optionSelected],n)),"undefined"!=typeof a&&"justSetValue"===a||(v.call(this,t,this.queue[t].options),s.call(this))},text:function(t,i,n,a){var o,l=this.queue[t],r=e.search(l.options,function(){return this[l.columnKeys.optionText]==i});r>-1?l.options[r][l.columnKeys.optionSelected]=y(l,l.options[r][l.columnKeys.optionSelected],n):(r=l.options.length,o={"@index":r,hide:!0,addedOption:!0},o[l.columnKeys.optionValue]=i,o[l.columnKeys.optionText]=i,l.options.push(o),l.options[r][l.columnKeys.optionSelected]=y(l,l.options[r][l.columnKeys.optionSelected],n)),"undefined"!=typeof a&&"justSetValue"===a||(v.call(this,t,this.queue[t].options),s.call(this))},clear:function(t){w.call(this,t),v.call(this,t,this.queue[t].options),m.call(this,t),this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.find("[data-option-index]").attr("data-option-Selected","false"),this.queue[t].optionSelectedIndex=-1}};return function(i,n,a,l){var s=e.isNumber(i)?i:b.call(this,i);if(s===-1)return void console.log(ax5.info.getError("ax5combobox","402","val"));if("undefined"==typeof n)throw"error not found value";if(e.isArray(n))t.clear.call(this,s),t.arr.call(this,s,this.queue[s].multiple||0==n.length?n:[n[n.length-1]],a);else if(e.isString(n)||e.isNumber(n))"undefined"==typeof n||null===n||this.queue[s].multiple||w.call(this,s),t.text.call(this,s,n,a,"justSetValue");else if(null===n)t.clear.call(this,s);else{this.queue[s].multiple||w.call(this,s);for(var r in t)if(n[r]){t[r].call(this,s,n,a,"justSetValue");break}}return v.call(this,s,this.queue[s].options),c.call(this,s),"undefined"!=typeof n&&l&&!l.noStateChange&&o.call(this,this.queue[s],{self:this,item:this.queue[s],state:"changeValue",value:this.queue[s].selected}),i=null,this}}();this.init=function(){this.onStateChanged=t.onStateChanged,this.onChange=t.onChange,jQuery(window).on("resize.ax5combobox-display-"+this.instanceId,function(){l.call(this)}.bind(this))},this.bind=function(a){var o,r=function(){var t=e.debounce(function(t){return this.activecomboboxQueueIndex==-1?this:void g.call(n,t,this.queue[t].$displayLabelInput.val())},150),o=function(t){h.call(this,t)},r={click:function(t,i){var a,o=e.findParentNode(i.target,function(t){return t.getAttribute("data-ax5combobox-remove")?(a="optionItemRemove",!0):t.getAttribute("data-selected-clear")?(a="clear",!0):void 0});if(o){if("optionItemRemove"===a){var r=o.getAttribute("data-ax5combobox-remove-index"),d=this.queue[t].selected[r];return _.call(this,t,{index:{gindex:d["@gindex"],index:d["@index"]}},!1,!0),l.call(this),s.call(this),u.call(this,t),e.stopEvent(i),this}"clear"===a&&(_.call(this,t,{clear:!0}),l.call(this),s.call(this),u.call(this,t))}else n.activecomboboxQueueIndex==t?this.queue[t].optionFocusIndex==-1&&n.close():(n.open(t),u.call(this,t))},keyUp:function(i,a){if(a.which==ax5.info.eventKeys.ESC&&n.activecomboboxQueueIndex===-1)return e.stopEvent(a),this;n.activecomboboxQueueIndex!=i&&(n.open(i),e.stopEvent(a));var o={40:"KEY_DOWN",38:"KEY_UP"};if(!o[a.which])if(a.which==ax5.info.eventKeys.BACKSPACE&&""==this.queue[i].$displayLabelInput.val()){if(this.queue[i].selected.length>0){var r=this.queue[i].selected[this.queue[i].selected.length-1];_.call(this,i,{index:{gindex:r["@gindex"],index:r["@index"]}},!1,!0)}l.call(this),s.call(this),e.stopEvent(a)}else t.call(this,i)},keyDown:function(t,i){i.which==ax5.info.eventKeys.ESC?(h.call(this,t),this.close(),e.stopEvent(i)):i.which==ax5.info.eventKeys.RETURN?(_.call(this,a.id,{index:{gindex:a.indexedOptions[a.optionFocusIndex]["@gindex"],index:a.indexedOptions[a.optionFocusIndex]["@index"]}},void 0,!0),h.call(this,t),l.call(this),this.close(),e.stopEvent(i)):i.which==ax5.info.eventKeys.DOWN?(x.call(this,t,1),e.stopEvent(i)):i.which==ax5.info.eventKeys.UP&&(x.call(this,t,-1),e.stopEvent(i))},focus:function(t,e){},blur:function(t,i){o.call(this,t),e.stopEvent(i)},selectChange:function(t,e){_.call(this,t,{value:this.queue[t].$select.val()},!0)}};return function(t){var e=this.queue[t],n={};return e.selected=[],e.$display?(e.$displayLabel.html(d.call(this,t)),e.options=v.call(this,t,e.options)):(n.instanceId=this.instanceId,n.id=e.id,n.name=e.name,n.theme=e.theme,n.tabIndex=e.tabIndex,
n.multiple=e.multiple,n.reset=e.reset,n.label=d.call(this,t),n.formSize=function(){return e.size?"input-"+e.size:""}(),e.$display=jQuery(i.tmpl.get.call(this,"comboboxDisplay",n,e.columnKeys)),e.$displayTable=e.$display.find('[data-els="display-table"]'),e.$displayLabel=e.$display.find('[data-ax5combobox-display="label"]'),e.$displayLabelInput=e.$display.find('[data-ax5combobox-display="input"]'),e.$target.find("select").get(0)?(e.$select=e.$target.find("select"),e.$select.attr("tabindex","-1").attr("class","form-control "+n.formSize),n.name&&e.$select.attr("name","name"),n.multiple&&e.$select.attr("multiple","multiple")):(e.$select=jQuery(i.tmpl.get.call(this,"formSelect",n,e.columnKeys)),e.$target.append(e.$select)),e.$target.append(e.$display),e.options=v.call(this,t,e.options)),l.call(this),e.$display.off("click.ax5combobox").on("click.ax5combobox",r.click.bind(this,t)),e.$displayLabelInput.off("focus.ax5combobox").on("focus.ax5combobox",r.focus.bind(this,t)).off("blur.ax5combobox").on("blur.ax5combobox",r.blur.bind(this,t)).off("keyup.ax5combobox").on("keyup.ax5combobox",r.keyUp.bind(this,t)).off("keydown.ax5combobox").on("keydown.ax5combobox",r.keyDown.bind(this,t)),e.$select.off("change.ax5combobox").on("change.ax5combobox",r.selectChange.bind(this,t)),n=null,e=null,t=null,this}}(),c={};return a=jQuery.extend(!0,c,t,a),a.target?(a.$target=jQuery(a.target),a.id||(a.id=a.$target.data("data-ax5combobox-id")),a.id||(a.id="ax5combobox-"+ax5.getGuid(),a.$target.data("data-ax5combobox-id",a.id)),a.name=a.$target.attr("data-ax5combobox"),a.options&&(a.options=JSON.parse(JSON.stringify(a.options))),function(t){e.isObject(t)&&!t.error&&(a=jQuery.extend(!0,a,t))}(e.parseJson(a.$target.attr("data-ax5combobox-config"),!0)),o=e.search(this.queue,function(){return this.id==a.id}),o===-1?(this.queue.push(a),r.call(this,this.queue.length-1)):(this.queue[o]=jQuery.extend(!0,{},this.queue[o],a),r.call(this,o)),c=null,o=null,this):(console.log(ax5.info.getError("ax5combobox","401","bind")),this)},this.open=function(){var n=function(t){t.onExpand.call({self:this,item:t},function(t){if(this.waitOptionsCallback){var n={},a=this.queue[this.activecomboboxQueueIndex];!function(t,i){var n={};i.options.forEach(function(e,i){e["@index"]=i,n[e[t.columnKeys.optionValue]]=e}),e.isArray(t.selected)&&t.selected.forEach(function(e){n[e[t.columnKeys.optionValue]]&&(i.options[n[e[t.columnKeys.optionValue]]["@index"]][t.columnKeys.optionSelected]=!0)})}(a,t),a.options=v.call(this,this.activecomboboxQueueIndex,t.options),c.call(this,this.activecomboboxQueueIndex),l.call(this),n.id=a.id,n.theme=a.theme,n.size="ax5combobox-option-group-"+a.size,n.multiple=a.multiple,n.lang=a.lang,n.options=a.options,this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(i.tmpl.get.call(this,"options",n,a.columnKeys)))}}.bind(this))};return function(a,l){this.waitOptionsCallback=null;var d,c,u=e.isNumber(a)?a:b.call(this,a),h=this.queue[u],p={};return h.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activecomboboxOptionGroup?this.activecomboboxQueueIndex==u?this:l>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(u,(l||0)+1)}.bind(this),t.animateTime),this):(h.optionFocusIndex=-1,h.selected&&h.selected.length>0&&(h.optionSelectedIndex=h.selected[0]["@findex"]),p.id=h.id,p.theme=h.theme,p.size="ax5combobox-option-group-"+h.size,p.multiple=h.multiple,p.lang=h.lang,h.$display.attr("data-combobox-option-group-opened","true"),h.onExpand&&(p.waitOptions=!0),p.options=e.filter(h.options,function(){return!this.hide}),this.activecomboboxOptionGroup=jQuery(i.tmpl.get.call(this,"optionGroup",p,h.columnKeys)),this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(i.tmpl.get.call(this,"options",p,h.columnKeys))),this.activecomboboxQueueIndex=u,s.call(this,"append"),jQuery(window).on("resize.ax5combobox-"+this.instanceId,function(){s.call(this)}.bind(this)),h.selected&&h.selected.length>0&&(c=this.activecomboboxOptionGroup.find('[data-option-index="'+h.selected[0]["@index"]+'"]'),c.get(0)&&(d=c.position().top-this.activecomboboxOptionGroup.height()/3,this.activecomboboxOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:d},h.animateTime,"swing",function(){}))),jQuery(window).on("click.ax5combobox-"+this.instanceId,function(t){t=t||window.event,r.call(this,t),e.stopEvent(t)}.bind(this)),o.call(this,h,{self:this,state:"open",item:h}),h.onExpand&&(this.waitOptionsCallback=!0,n.call(this,h)),p=null,d=null,c=null,this))}}(),this.update=function(t){return this.bind(t),this},this.setValue=function(t,i,n){var a=e.isNumber(t)?t:b.call(this,t);if(a===-1)return void console.log(ax5.info.getError("ax5combobox","402","val"));if(w.call(this,a),e.isArray(i)){var o=e.map(i,function(){return{value:this}});_.call(this,a,o,n||!0,{noStateChange:!0})}else e.isString(i)||e.isNumber(i)?_.call(this,a,{value:i},n||!0,{noStateChange:!0}):c.call(this,a);return p.call(this,a),l.call(this),this},this.setText=function(t,i,n){var a=e.isNumber(t)?t:b.call(this,t);return a===-1?void console.log(ax5.info.getError("ax5combobox","402","val")):(w.call(this,a),_.call(this,a,i,!0,{noStateChange:!0}),p.call(this,a),l.call(this),this)},this.getSelectedOption=function(t){var i=e.isNumber(t)?t:b.call(this,t);return i===-1?void console.log(ax5.info.getError("ax5combobox","402","val")):e.deepCopy(this.queue[i].selected)},this.close=function(e){return this.closeTimer&&clearTimeout(this.closeTimer),this.activecomboboxOptionGroup?(e=this.queue[this.activecomboboxQueueIndex],e.optionFocusIndex=-1,e.$display.removeAttr("data-combobox-option-group-opened").trigger("focus"),e.$displayLabel.attr("contentEditable","false"),this.activecomboboxOptionGroup.addClass("destroy"),jQuery(window).off("resize.ax5combobox-"+this.instanceId).off("click.ax5combobox-"+this.instanceId).off("keyup.ax5combobox-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.remove(),this.activecomboboxOptionGroup=null,this.activecomboboxQueueIndex=-1,o.call(this,e,{self:this,state:"close"})}.bind(this),t.animateTime),this.waitOptionsCallback=null,this):this},this.blur=function(t){var i=e.isNumber(t)?t:b.call(this,t);return i===-1?void console.log(ax5.info.getError("ax5combobox","402","val")):(p.call(this,i),this)},this.enable=function(t){var e=b.call(this,t);return"undefined"!=typeof e&&(this.queue[e].disabled=!1,this.queue[e].$display[0]&&(this.queue[e].$display.removeAttr("disabled"),this.queue[e].$displayLabelInput.removeAttr("disabled")),this.queue[e].$select[0]&&this.queue[e].$select.removeAttr("disabled"),o.call(this,this.queue[e],{self:this,state:"enable"})),this},this.disable=function(t){var e=b.call(this,t);return"undefined"!=typeof e&&(this.queue[e].disabled=!0,this.queue[e].$display[0]&&(this.queue[e].$display.attr("disabled","disabled"),this.queue[e].$displayLabelInput.attr("disabled","disabled")),this.queue[e].$select[0]&&this.queue[e].$select.attr("disabled","disabled"),o.call(this,this.queue[e],{self:this,state:"disable"})),this},this.align=function(){return l.call(this),this},this.clear=function(t){var i=e.isNumber(t)?t:b.call(this,t);return i===-1?void console.log(ax5.info.getError("ax5combobox","402","clear")):(w.call(this,i),_.call(this,i,[],!1,{noStateChange:!1}),c.call(this,i),p.call(this,i),l.call(this),this)},this.main=function(){arguments&&e.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)}}()),i=ax5.ui.combobox}(),function(){var t=ax5.ui.combobox,e=(ax5.util,function(t){return'\n            <div class="ax5combobox-option-group {{theme}} {{size}}" data-ax5combobox-option-group="{{id}}">\n                <div class="ax-combobox-body">\n                    <div class="ax-combobox-option-group-content" data-els="content"></div>\n                </div>\n                <div class="ax-combobox-arrow"></div> \n            </div>\n        '}),i=function(t){return'\n<div class="form-control {{formSize}} ax5combobox-display {{theme}}" \ndata-ax5combobox-display="{{id}}" data-ax5combobox-instance="{{instanceId}}">\n    <div class="ax5combobox-display-table" data-els="display-table">\n        <div data-ax5combobox-display="label-holder"> \n            <a {{^tabIndex}}{{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}\n            data-ax5combobox-display="label"\n            spellcheck="false"><input type="text"data-ax5combobox-display="input" style="border:0 none;" /></a>\n        </div>\n        <div data-ax5combobox-display="addon"> \n            {{#multiple}}{{#reset}}\n            <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n            {{/reset}}{{/multiple}}\n            {{#icons}}\n            <span class="addon-icon-closed">{{clesed}}</span>\n            <span class="addon-icon-opened">{{opened}}</span>\n            {{/icons}}\n            {{^icons}}\n            <span class="addon-icon-closed"><span class="addon-icon-arrow"></span></span>\n            <span class="addon-icon-opened"><span class="addon-icon-arrow"></span></span>\n            {{/icons}}\n        </div>\n    </div>\n</div>\n        '},n=function(t){return'\n            <select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" {{#multiple}}multiple="multiple"{{/multiple}}></select>\n        '},a=function(t){return'\n{{#selected}}\n<option value="{{'+t.optionValue+'}}" selected="true">{{'+t.optionText+"}}</option>\n{{/selected}}\n"},o=function(t){return'\n            {{#waitOptions}}\n                <div class="ax-combobox-option-item">\n                        <div class="ax-combobox-option-item-holder">\n                            <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">\n                                {{{lang.loading}}}\n                            </span>\n                        </div>\n                    </div>\n            {{/waitOptions}}\n            {{^waitOptions}}\n                {{#options}}\n                    {{#optgroup}}\n                        <div class="ax-combobox-option-group">\n                            <div class="ax-combobox-option-item-holder">\n                                <span class="ax-combobox-option-group-label">\n                                    {{{.}}}\n                                </span>\n                            </div>\n                            {{#options}}\n                            {{^hide}}\n                            <div class="ax-combobox-option-item" data-option-focus-index="{{@findex}}" data-option-group-index="{{@gindex}}" data-option-index="{{@index}}" \n                            data-option-value="{{'+t.optionValue+'}}" \n                            {{#'+t.optionSelected+'}}data-option-selected="true"{{/'+t.optionSelected+'}}>\n                                <div class="ax-combobox-option-item-holder">\n                                    {{#multiple}}\n                                    <span class="ax-combobox-option-item-cell ax-combobox-option-item-checkbox">\n                                        <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                                    </span>\n                                    {{/multiple}}\n                                    <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">{{'+t.optionText+'}}</span>\n                                </div>\n                            </div>\n                            {{/hide}}\n                            {{/options}}\n                        </div>                            \n                    {{/optgroup}}\n                    {{^optgroup}}\n                    {{^hide}}\n                    <div class="ax-combobox-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+t.optionValue+'}}" {{#'+t.optionSelected+'}}data-option-selected="true"{{/'+t.optionSelected+'}}>\n                        <div class="ax-combobox-option-item-holder">\n                            {{#multiple}}\n                            <span class="ax-combobox-option-item-cell ax-combobox-option-item-checkbox">\n                                <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                            </span>\n                            {{/multiple}}\n                            <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">{{'+t.optionText+'}}</span>\n                        </div>\n                    </div>\n                    {{/hide}}\n                    {{/optgroup}}\n                {{/options}}\n                {{^options}}\n                    <div class="ax-combobox-option-item">\n                        <div class="ax-combobox-option-item-holder">\n                            <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">\n                                {{{lang.noOptions}}}\n                            </span>\n                        </div>\n                    </div>\n                {{/options}}\n            {{/waitOptions}}\n        '},l=function(t){return'{{#selected}}<div tabindex="-1" data-ax5combobox-selected-label="{{@i}}" data-ax5combobox-selected-text="{{text}}"><div data-ax5combobox-remove="true" \ndata-ax5combobox-remove-index="{{@i}}">{{{removeIcon}}}</div><span>{{'+t.optionText+"}}</span></div>{{/selected}}"};t.tmpl={comboboxDisplay:i,formSelect:n,formSelectOptions:a,optionGroup:e,options:o,label:l,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui.combobox,e=(ax5.util,{1:function(t,e,i){var n=this.config,a=e;$(e).find("span").get(0)&&(a=$(e).find("span").get(0));var o,l,s=(a.textContent||a.innerText).replace(/^[\s\r\n\t]*|[\s\r\n\t]*$/g,""),r=this.queue[t];if(r.selected&&r.selected.length>0&&e.getAttribute("data-ax5combobox-selected-text")==s)return o=e.getAttribute("data-ax5combobox-selected-label"),l=r.selected[o],{index:{gindex:l["@gindex"],index:l["@index"],value:l[n.columnKeys.optionValue]}};if(e.getAttribute("data-ax5combobox-selected-text"))return s;if(""!=s){if(i)return s;var d;return r.optionFocusIndex>-1&&(d=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+r.optionFocusIndex+'"]')),r.optionFocusIndex>-1&&d.get(0)&&d.attr("data-option-value")?{index:{gindex:d.attr("data-option-group-index"),index:d.attr("data-option-index")}}:r.editable?s:void 0}},3:function(t,e,i){var n=(this.config,(e.textContent||e.innerText).replace(/^[\s\r\n\t]*|[\s\r\n\t]*$/g,"")),a=this.queue[t];if(""!=n){if(i)return n;var o;return a.optionFocusIndex>-1&&(o=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+a.optionFocusIndex+'"]')),a.optionFocusIndex>-1&&o.get(0)&&o.attr("data-option-value")?{index:{gindex:o.attr("data-option-group-index"),index:o.attr("data-option-index")}}:a.editable?n:void 0}}});t.util={nodeTypeProcessor:e}}(),ax5.ui.combobox_instance=new ax5.ui.combobox,jQuery.fn.ax5combobox=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"open":return ax5.ui.combobox_instance.open(this);case"close":return ax5.ui.combobox_instance.close(this);case"setValue":return ax5.ui.combobox_instance.setValue(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"setText":return ax5.ui.combobox_instance.setText(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"getSelectedOption":return ax5.ui.combobox_instance.getSelectedOption(this);case"enable":return ax5.ui.combobox_instance.enable(this);case"disable":return ax5.ui.combobox_instance.disable(this);case"blur":return ax5.ui.combobox_instance.blur(this);case"clear":return ax5.ui.combobox_instance.clear(this);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.combobox_instance.bind(t)});return this}}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"layout"},function(){var t=function(){var t,i=this,n={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},a=function(t){var e="changedTouches"in t.originalEvent&&t.changedTouches?t.originalEvent.changedTouches[0]:t;return{clientX:e.clientX,clientY:e.clientY}};this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,splitter:{size:1},autoResize:!0},this.queue=[],this.openTimer=null,this.closeTimer=null,this.resizer=null,t=this.config;var o=function(){for(var t=this.queue.length;t--;)"undefined"==typeof this.queue[t].parentQueIdx&&this.queue[t].autoResize&&r.call(this,t,null,"windowResize")},l={width:function(t,e){return e?e.__width+(e.split?t.splitter.size:0):0},height:function(t,e){return e?e.__height+(e.split?t.splitter.size:0):0}},s=function(t,i){return"*"==t?void 0:"%"==e.right(t,1)?i*e.number(t)/100:Number(t)},r=function(){var t={split:{horizontal:function(t,e,i){e.splitter?e.__height=t.splitter.size:i==t.splitPanel.length-1&&0==t.splitPanel.asteriskLength?(e.height="*",e.__height=void 0,t.splitPanel.asteriskLength++):"*"==e.height&&t.splitPanel.asteriskLength++},vertical:function(t,e,i){e.splitter?e.__width=t.splitter.size:i==t.splitPanel.length-1&&0==t.splitPanel.asteriskLength?(e.width="*",e.__width=void 0,t.splitPanel.asteriskLength++):"*"==e.width&&t.splitPanel.asteriskLength++}}},i={top:function(t,e){e.$target.css({height:e.__height||0}),e.split&&e.$splitter.css({height:t.splitter.size,top:e.__height||0})},bottom:function(t,e){e.$target.css({height:e.__height||0}),e.split&&e.$splitter.css({height:t.splitter.size,bottom:e.__height||0})},left:function(t,e){var i={width:e.__width||0,height:t.targetDimension.height};t.dockPanel.top&&(i.height-=t.dockPanel.top.__height,i.top=t.dockPanel.top.__height,t.dockPanel.top.split&&(i.height-=t.splitter.size,i.top+=t.splitter.size)),t.dockPanel.bottom&&(i.height-=t.dockPanel.bottom.__height,t.dockPanel.bottom.split&&(i.height-=t.splitter.size)),e.$target.css(i),e.split&&e.$splitter.css({width:t.splitter.size,height:i.height,top:i.top,left:i.width})},right:function(t,e){var i={width:e.__width||0,height:t.targetDimension.height};t.dockPanel.top&&(i.height-=t.dockPanel.top.__height,i.top=t.dockPanel.top.__height,t.dockPanel.top.split&&(i.height-=t.splitter.size,i.top+=t.splitter.size)),t.dockPanel.bottom&&(i.height-=t.dockPanel.bottom.__height,t.dockPanel.bottom.split&&(i.height-=t.splitter.size)),e.$target.css(i),e.split&&e.$splitter.css({width:t.splitter.size,height:i.height,top:i.top,right:i.width})},center:function(t,e){var i={width:t.targetDimension.width,height:t.targetDimension.height};t.dockPanel.top&&(i.height-=t.dockPanel.top.__height||0,i.top=t.dockPanel.top.__height||0,t.dockPanel.top.split&&(i.height-=t.splitter.size,i.top+=t.splitter.size)),t.dockPanel.bottom&&(i.height-=t.dockPanel.bottom.__height||0,t.dockPanel.bottom.split&&(i.height-=t.splitter.size)),t.dockPanel.left&&(i.width-=t.dockPanel.left.__width||0,i.left=t.dockPanel.left.__width||0,t.dockPanel.left.split&&(i.width-=t.splitter.size,i.left+=t.splitter.size)),t.dockPanel.right&&(i.width-=t.dockPanel.right.__width||0,t.dockPanel.right.split&&(i.width-=t.splitter.size));var n=e.minWidth||0,a=e.minHeight||0;i.width<n&&(i.width=n,t.$target.css({minWidth:n+l.width(t.dockPanel.left,t.splitter.size)+l.width(t.dockPanel.right,t.splitter.size)})),i.height<a&&(i.height=a,t.$target.css({minHeight:a+l.height(t.dockPanel.top,t.splitter.size)+l.height(t.dockPanel.bottom,t.splitter.size)})),e.$target.css(i)},split:{horizontal:function(t,e,i,n,a){var o={display:"block"},l=i?Number(t.splitPanel[i-1].offsetEnd):0;e.splitter?o.height=t.splitter.size:"*"!=e.height||"undefined"!=typeof e.__height&&!a?o.height=e.__height||0:o.height=e.__height=(t.targetDimension.height-n)/t.splitPanel.asteriskLength,o.top=l,e.offsetStart=l,e.offsetEnd=Number(l)+Number(o.height),e.$target.css(o)},vertical:function(t,e,i,n,a){var o={display:"block"},l=i?Number(t.splitPanel[i-1].offsetEnd):0;e.splitter?o.width=t.splitter.size:"*"!=e.width||"undefined"!=typeof e.__width&&!a?o.width=e.__width||0:o.width=e.__width=(t.targetDimension.width-n)/t.splitPanel.asteriskLength,o.left=l,e.offsetStart=l,e.offsetEnd=Number(l)+Number(o.width),e.$target.css(o)}}},n={"dock-panel":function(t){for(var e in t.dockPanel)t.dockPanel[e].$target&&t.dockPanel[e].$target.get(0)&&e in i&&i[e].call(this,t,t.dockPanel[e])},"split-panel":function(n,a){var o;n.splitPanel.asteriskLength=0,n.splitPanel.forEach(function(e,i){t.split[n.orientation].call(this,n,e,i)}),o="horizontal"==n.orientation?e.sum(n.splitPanel,function(t){if("*"!=t.height)return e.number(t.__height)}):e.sum(n.splitPanel,function(t){if("*"!=t.width)return e.number(t.__width)}),n.splitPanel.forEach(function(t,e){i.split[n.orientation].call(this,n,t,e,o,a)})}},a=function(t,e,i){for(var n=t.childQueIdxs.length;n--;)r.call(this,t.childQueIdxs[n],e,i)};return function(t,e,i){var o=this.queue[t];o.targetDimension={height:o.$target.innerHeight(),width:o.$target.innerWidth()},o.layout in n&&n[o.layout].call(this,o,i),o.childQueIdxs&&a.call(this,o,e,i),o.onResize&&setTimeout(function(){this.onResize.call(this,this)}.bind(o),1),e&&e.call(o,o)}}(),d={on:function(t,e,a){var o=this.queue[t],s=a.position(),r={width:a.width(),height:a.height()},c={left:function(t){var i="changedTouches"in t.originalEvent&&t.changedTouches?t.originalEvent.changedTouches[0]:t;e.__da=i.clientX-e.mousePosition.clientX;var n=e.minWidth||0,a=e.maxWidth||o.targetDimension.width-l.width(o,o.dockPanel.left)-l.width(o,o.dockPanel.right);return e.__width+e.__da<n?e.__da=-e.__width+n:a<e.__width+e.__da&&(e.__da=a-e.__width),{left:e.$splitter.position().left+e.__da}},right:function(t){var i="changedTouches"in t.originalEvent&&t.changedTouches?t.originalEvent.changedTouches[0]:t;e.__da=i.clientX-e.mousePosition.clientX;var n=e.minWidth||0,a=e.maxWidth||o.targetDimension.width-l.width(o,o.dockPanel.left)-l.width(o,o.dockPanel.right);return e.__width-e.__da<n?e.__da=e.__width-n:a<e.__width-e.__da&&(e.__da=-a+e.__width),{left:e.$splitter.position().left+e.__da}},top:function(t){var i="changedTouches"in t.originalEvent&&t.changedTouches?t.originalEvent.changedTouches[0]:t;e.__da=i.clientY-e.mousePosition.clientY;var n=e.minHeight||0,a=e.maxHeight||o.targetDimension.height-l.height(o,o.dockPanel.top)-l.height(o,o.dockPanel.bottom);return e.__height+e.__da<n?e.__da=-e.__height+n:a<e.__height+e.__da&&(e.__da=a-e.__height),{top:e.$splitter.position().top+e.__da}},bottom:function(t){var i="changedTouches"in t.originalEvent&&t.changedTouches?t.originalEvent.changedTouches[0]:t;e.__da=i.clientY-e.mousePosition.clientY;var n=e.minHeight||0,a=e.maxHeight||o.targetDimension.height-l.height(o,o.dockPanel.top)-l.height(o,o.dockPanel.bottom);return e.__height-e.__da<n?e.__da=e.__height-n:a<e.__height-e.__da&&(e.__da=-a+e.__height),{top:e.$splitter.position().top+e.__da}},split:function(t){var i="changedTouches"in t.originalEvent&&t.changedTouches?t.originalEvent.changedTouches[0]:t;if("horizontal"==o.orientation){e.__da=i.clientY-e.mousePosition.clientY;var n=o.splitPanel[e.panelIndex-1],a=o.splitPanel[e.panelIndex+1],l=n.minHeight||0,s=a.minHeight||0;return e.offsetStart+e.__da<n.offsetStart+l?e.__da=n.offsetStart-e.offsetStart+l:e.offsetStart+e.__da>a.offsetEnd-s&&(e.__da=a.offsetEnd-e.offsetEnd-s),{top:e.$target.position().top+e.__da}}e.__da=i.clientX-e.mousePosition.clientX;var n=o.splitPanel[e.panelIndex-1],a=o.splitPanel[e.panelIndex+1],r=n.minWidth||0,d=a.minWidth||0;return e.offsetStart+e.__da<n.offsetStart+r?e.__da=n.offsetStart-e.offsetStart+r:e.offsetStart+e.__da>a.offsetEnd-d&&(e.__da=a.offsetEnd-e.offsetEnd-d),{left:Number(e.$target.position().left)+Number(e.__da)}}};e.__da=0,jQuery(document.body).bind(n.mousemove+".ax5layout-"+this.instanceId,function(t){i.resizer||(i.resizer=jQuery('<div class="ax5layout-resizer panel-'+e.resizerType+'" ondragstart="return false;"></div>'),i.resizer.css({left:s.left,top:s.top,width:r.width,height:r.height}),o.$target.append(i.resizer)),i.resizer.css(c[e.resizerType](t))}).bind(n.mouseup+".ax5layout-"+this.instanceId,function(n){d.off.call(i,t,e,a)}).bind("mouseleave.ax5layout-"+this.instanceId,function(n){d.off.call(i,t,e,a)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(t,e,a){var o=this.queue[t],l={"dock-panel":{left:function(t,e){e.__width+=e.__da},right:function(){e.__width-=e.__da},top:function(){e.__height+=e.__da},bottom:function(){e.__height-=e.__da}},"split-panel":{split:function(){"horizontal"==o.orientation?(o.splitPanel[e.panelIndex-1].__height+=e.__da,o.splitPanel[e.panelIndex+1].__height-=e.__da):(o.splitPanel[e.panelIndex-1].__width+=e.__da,o.splitPanel[e.panelIndex+1].__width-=e.__da)}},"tab-panel":{}};i.resizer&&(i.resizer.remove(),i.resizer=null,l[this.queue[t].layout][e.resizerType].call(this,t,e),r.call(this,t)),jQuery(document.body).unbind(n.mousemove+".ax5layout-"+this.instanceId).unbind(n.mouseup+".ax5layout-"+this.instanceId).unbind("mouseleave.ax5layout-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},c={open:function(t,e,i){if(e.activePanelIndex!=i&&(e.tabPanel[i].active=!0,e.tabPanel[e.activePanelIndex].active=!1,e.$target.find('[data-tab-panel-label="'+i+'"]').attr("data-tab-active","true"),e.$target.find('[data-tab-panel-label="'+e.activePanelIndex+'"]').removeAttr("data-tab-active"),e.tabPanel[i].$target.attr("data-tab-active","true"),e.tabPanel[e.activePanelIndex].$target.removeAttr("data-tab-active"),e.activePanelIndex=i,e.onOpenTab)){var n={$target:e.$target,name:e.name,id:e.id,layout:e.layout,activePanelIndex:e.activePanelIndex,activePanel:e.tabPanel[e.activePanelIndex],tabPanel:e.tabPanel};e.onOpenTab.call(n)}}},u=function(){return'\n<div data-tab-panel-label-holder="{{id}}">\n    <div data-tab-panel-label-border="{{id}}"></div>\n    <div data-tab-panel-label-table="{{id}}">\n        <div data-tab-panel-aside="left"></div>\n    {{#tabPanel}}\n        <div data-tab-panel-label="{{panelIndex}}" data-tab-active="{{active}}">\n            <div data-tab-label="{{panelIndex}}">{{{label}}}</div>\n        </div>\n    {{/tabPanel}}\n        <div data-tab-panel-aside="right"></div>\n    </div>\n</div>\n'},h=function(){var t={"dock-panel":function(t){var o=this.queue[t];o.dockPanel={},o.$target.find(">[data-dock-panel]").each(function(){var l={};!function(t){e.isObject(t)&&!t.error&&(l=jQuery.extend(!0,l,t))}(e.parseJson(this.getAttribute("data-dock-panel"),!0)),"dock"in l&&(l.$target=jQuery(this),l.$target.addClass("dock-panel-"+l.dock),(l.split=l.split&&"true"==l.split.toString())&&(l.$splitter=jQuery('<div data-splitter="" class="dock-panel-'+l.dock+'"></div>'),l.$splitter.bind(n.mousedown,function(e){l.mousePosition=a(e),d.on.call(i,t,l,l.$splitter)}).bind("dragstart",function(t){return e.stopEvent(t),!1}),o.$target.append(l.$splitter)),"top"==l.dock||"bottom"==l.dock?l.__height=s(l.height,o.targetDimension.height):l.__width=s(l.width,o.targetDimension.width),l.resizerType=l.dock,o.dockPanel[l.dock]=l)})},"split-panel":function(t){var o=this.queue[t];o.splitPanel=[],o.$target.find(">[data-split-panel], >[data-splitter]").each(function(l){var r={};!function(t){e.isObject(t)&&!t.error&&(r=jQuery.extend(!0,r,t))}(e.parseJson(this.getAttribute("data-split-panel")||this.getAttribute("data-splitter"),!0)),r.$target=jQuery(this),r.$target.addClass("split-panel-"+o.orientation),r.panelIndex=l,this.getAttribute("data-splitter")?(r.splitter=!0,r.$target.bind(n.mousedown,function(e){r.panelIndex>0&&r.panelIndex<o.splitPanel.length-1&&(r.mousePosition=a(e),d.on.call(i,t,r,r.$target))}).bind("dragstart",function(t){return e.stopEvent(t),!1}),r.resizerType="split"):"horizontal"==o.orientation?r.__height=s(r.height,o.targetDimension.height):(o.orientation="vertical",r.__width=s(r.width,o.targetDimension.width)),o.splitPanel.push(r)})},"tab-panel":function(t){var n=this.queue[t],a=!1;n.tabPanel=[],n.$target.find(">[data-tab-panel]").each(function(t){var i={};!function(t){e.isObject(t)&&!t.error&&(i=jQuery.extend(!0,i,t))}(e.parseJson(this.getAttribute("data-tab-panel"),!0)),a&&(i.active=!1),i.$target=jQuery(this),i.active&&"false"!=i.active&&(a=!0,n.activePanelIndex=t,i.$target.attr("data-tab-active","true")),i.panelIndex=t,n.tabPanel.push(i)}),a||(n.tabPanel[0].active=!0,n.tabPanel[0].$target.attr("data-tab-active","true"),n.activePanelIndex=0),n.$target.append(jQuery(ax5.mustache.render(u.call(this,t),n))),n.$target.on("click","[data-tab-panel-label]",function(e){var a=this.getAttribute("data-tab-panel-label");c.open.call(i,t,n,a)})}};return function(e){var i=this.queue[e];i.targetDimension={height:i.$target.innerHeight(),width:i.$target.innerWidth()},i.$target.parents("[data-ax5layout]").get(0)&&f.call(this,i.$target.parents("[data-ax5layout]").get(0),e),i.layout in t&&t[i.layout].call(this,e),r.call(this,e)}}(),p=function(t){return e.isString(t)||(t=jQuery(t).data("data-ax5layout-id")),e.isString(t)?e.search(this.queue,function(){return this.id==t}):-1},f=function(t,i){var n=e.isNumber(t)?t:p.call(this,t);this.queue[n].childQueIdxs||(this.queue[n].childQueIdxs=[]),this.queue[n].childQueIdxs.push(i),this.queue[i].parentQueIdx=n};this.init=function(){this.onStateChanged=t.onStateChanged,this.onClick=t.onClick,jQuery(window).bind("resize.ax5layout-"+this.instanceId,function(){o.call(this)}.bind(this))},this.bind=function(i){var n,a={};return i=jQuery.extend(!0,a,t,i),i.target?(i.$target=jQuery(i.target),i.id||(i.id=i.$target.data("data-ax5layout-id")),i.id||(i.id="ax5layout-"+ax5.getGuid(),i.$target.data("data-ax5layout-id",i.id)),i.name=i.$target.attr("data-ax5layout"),i.options&&(i.options=JSON.parse(JSON.stringify(i.options))),function(t){e.isObject(t)&&!t.error&&(i=jQuery.extend(!0,i,t))}(e.parseJson(i.$target.attr("data-config"),!0)),n=e.search(this.queue,function(){return this.id==i.id}),n===-1?(this.queue.push(i),h.call(this,this.queue.length-1)):(this.queue[n]=jQuery.extend(!0,{},this.queue[n],i),h.call(this,n)),a=null,n=null,this):(console.log(ax5.info.getError("ax5layout","401","bind")),this)},this.align=function(t,i){var n=e.isNumber(t)?t:p.call(this,t);if(n===-1)for(var a=this.queue.length;a--;)r.call(this,a,null,i);else r.call(this,n,null,i);return this},this.onResize=function(t,i){var n=e.isNumber(t)?t:p.call(this,t);return n===-1?void console.log(ax5.info.getError("ax5layout","402","onResize")):(this.queue[n].onResize=i,this)},this.resize=function(){var t={"dock-panel":function(t,i){["top","bottom","left","right"].forEach(function(n){i[n]&&t.dockPanel[n]&&("top"==n||"bottom"==n?t.dockPanel[n].__height=e.isObject(i[n])?i[n].height:i[n]:"left"!=n&&"right"!=n||(t.dockPanel[n].__width=e.isObject(i[n])?i[n].width:i[n]))})},"split-panel":function(){},"tab-panel":function(){}};return function(i,n,a){var o=e.isNumber(i)?i:p.call(this,i);if(o===-1)for(var l=this.queue.length;l--;)t[this.queue[l].layout].call(this,this.queue[l],n),r.call(this,l,a);else this.queue[o]&&(t[this.queue[o].layout].call(this,this.queue[o],n),r.call(this,o,a));return this}}(),this.reset=function(){var t={"dock-panel":function(t){["top","bottom","left","right"].forEach(function(e){t.dockPanel[e]&&("top"==e||"bottom"==e?t.dockPanel[e].__height=t.dockPanel[e].height:"left"!=e&&"right"!=e||(t.dockPanel[e].__width=t.dockPanel[e].width))})},"split-panel":function(t){t.splitPanel.forEach(function(e){"vertical"==t.orientation?e.__width=s(e.width,t.targetDimension.width):"horizontal"==t.orientation&&(e.__height=s(e.height,t.targetDimension.height))})},"tab-panel":function(){}};return function(i,n){var a=e.isNumber(i)?i:p.call(this,i);return a===-1||(t[this.queue[a].layout].call(this,this.queue[a]),r.call(this,a,n)),this}}(),this.hide=function(){},this.tabOpen=function(){return function(t,i){
var n=e.isNumber(t)?t:p.call(this,t);return n===-1?void console.log(ax5.info.getError("ax5layout","402","tabOpen")):(c.open.call(this,n,this.queue[n],i),this)}}(),this.getActiveTab=function(t){var i=e.isNumber(t)?t:p.call(this,t);return i===-1?void console.log(ax5.info.getError("ax5layout","402","tabOpen")):"undefined"!=typeof this.queue[i].activePanelIndex?this.queue[i].tabPanel[this.queue[i].activePanelIndex]:void 0},this.main=function(){arguments&&e.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return t}())}(),ax5.ui.layout_instance=new ax5.ui.layout,jQuery.fn.ax5layout=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"align":return ax5.ui.layout_instance.align(this,arguments[1]);case"resize":return ax5.ui.layout_instance.resize(this,arguments[1],arguments[2]);case"reset":return ax5.ui.layout_instance.reset(this,arguments[1]);case"hide":return ax5.ui.layout_instance.hide(this,arguments[1]);case"onResize":return ax5.ui.layout_instance.onResize(this,arguments[1]);case"tabOpen":return ax5.ui.layout_instance.tabOpen(this,arguments[1]);case"getActiveTab":return ax5.ui.layout_instance.getActiveTab(this,arguments[1]);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.layout_instance.bind(t)});return this}}(),function(){var t=ax5.ui,e=ax5.util;t.addClass({className:"binder"},function(){return function(){var t;this.instanceId=ax5.getGuid(),this.config={},t=this.config,this.model={},this.tmpl={},this.view_target=null,this.change_trigger={},this.click_trigger={},this.update_trigger={},this.onerror=null;var i=Object.prototype.toString,n=function(t){var e;return null!=t&&t==t.window?e="window":t&&1==t.nodeType?e="element":t&&11==t.nodeType?e="fragment":"undefined"==typeof t?e="undefined":"[object Object]"==i.call(t)?e="object":"[object Array]"==i.call(t)?e="array":"[object String]"==i.call(t)?e="string":"[object Number]"==i.call(t)?e="number":"[object NodeList]"==i.call(t)?e="nodelist":"function"==typeof t&&(e="function"),e},a=function(t,e,i){return t+"["+e+"]"+("."==i?"":"."+i)},o=function(t){var e=[],i=[].concat(t.split(/[\.\[\]]/g));return i.forEach(function(t){""!==t&&e.push('["'+t.replace(/['\"]/g,"")+'"]')}),i=null,e.join("")};this.setModel=function(t,e){return this.model=t,!this.view_target&&e?(this.view_target=e,this._binding()):this._binding("update"),this},this.set=function(t,e){var i,a,l,s=this;if(Function("val","this"+o(t)+" = val;").call(this.model,e),i=n(e),"object"==i)for(var r in e)this.set(t+"."+r,e[r]);else if("array"==i)for(this.view_target.find('[data-ax-path="'+t+'"]').each(function(){l=(this.type||"").toLowerCase(),"checkbox"!=l&&"radio"!=l||s.set_els_value(this,this.tagName.toLowerCase(),l,e,t,"change")}),a=e.length;a--;)this.set(t+"["+a+"]",e[a]);else this.view_target.find('[data-ax-path="'+t+'"]').each(function(){s.set_els_value(this,this.tagName.toLowerCase(),(this.type||"").toLowerCase(),e,t,"change")});return this},this.get=function(t){return"undefined"==typeof t?this.model:Function("","return this"+o(t)+";").call(this.model)},this.onChange=function(t,e){return this.change_trigger[t||"*"]=e,this},this.onClick=function(t,e){return this.click_trigger[t]=e,this},this.add=function(t,e){var i=Function("","return this"+o(t)+";").call(this.model),n=this.tmpl[t];e["@i"]=i.length,e["@r"]=i.length,e.__ADDED__=!0,Function("val","this"+o(t)+".push(val);").call(this.model,e);for(var a in n){var l=$(ax5.mustache.render(n[a].content,e));l.attr("data-ax-repeat-path",t),l.attr("data-ax-repeat-i",e["@i"]),this.bind_event_tmpl(l,t),n[a].container.append(l)}this.change("*");var s=this.update_trigger[t];if(s){var r={repeat_path:t,tmpl:n,list:i};s.call(r,r)}return this},this.remove=function(t,e){var i=Function("","return this"+o(t)+";").call(this.model),n=this.tmpl[t];"undefined"==typeof e&&(e=i.length-1);var a=i[e];a.__ADDED__?i.splice(e,1):i[e].__DELETED__=!0;for(var l in n)n[l].container.empty(),this.print_tmpl(t,n[l]);this.change("*");var s=this.update_trigger[t];if(s){var r={repeat_path:t,tmpl:n,list:i};s.call(r,r)}return this},this.update=function(t,e,i){var n=Function("","return this"+o(t)+";").call(this.model),a=this.tmpl[t];"undefined"!=typeof e&&i&&n.splice(e,1,i);for(var l in a)a[l].container.empty(),this.print_tmpl(t,a[l]);this.change("*");var s=this.update_trigger[t];if(s){var r={repeat_path:t,tmpl:a,list:n};s.call(r,r)}return this},this.childAdd=function(t,e,i,n){var a=Function("","return this"+o(t)+";").call(this.model),l=Function("","return this"+o(t)+"["+e+"]."+i+";").call(this.model);n.__ADDED__=!0,l.push(n),this.update(t,e,a[e])},this.childRemove=function(t,e,i,n){var a=Function("","return this"+o(t)+";").call(this.model),l=Function("","return this"+o(t)+"["+e+"]."+i+";").call(this.model),s=l[n];s.__ADDED__?l.splice(n,1):l[n].__DELETED__=!0,this.update(t,e,a[e])},this.childUpdate=function(t,e,i,n,a){var l=Function("","return this"+o(t)+";").call(this.model),s=Function("","return this"+o(t)+"["+e+"]."+i+";").call(this.model);s[n]=a,this.update(t,e,l[e])},this.childSet=function(t,e,i,n){var a=this;return Function("val","this"+o(t)+"["+e+"]."+i+" = val;").call(this.model,n),this.view_target.find('[data-ax-repeat="'+t+'"]').find('[data-ax-repeat-i="'+e+'"]').find('[data-ax-item-path="'+i+'"]').each(function(){a.set_els_value(this,this.tagName.toLowerCase(),(this.type||"").toLowerCase(),n,t+"["+e+"]."+i)}),this},this.onUpdate=function(t,e){return this.update_trigger[t]=e,this},this._binding=function(t){var e=this;this.view_target.find("[data-ax-path]").each(function(){var t,i=$(this),n=i.attr("data-ax-path"),a=(this.type||"").toLowerCase();try{t=Function("","return this"+o(n)+";").call(e.model)}catch(l){e.onerror&&e.onerror("not found target [model."+o(n)+"]")}e.set_els_value(this,this.tagName.toLowerCase(),a,t||"",n)}),"undefined"==typeof t?this.view_target.find("[data-ax-repeat]").each(function(){var t=$(this),i=t.attr("data-ax-repeat"),n=t.attr("data-ax-repeat-idx");"undefined"==typeof e.tmpl[i]&&(e.tmpl[i]={}),"undefined"!=typeof n?e.tmpl[i][n]={container:t,content:t.find("script").html()}:e.tmpl[i][0]={container:t,content:t.find("script").html()},t.empty()}):this.view_target.find("[data-ax-repeat]").each(function(){var t=$(this);t.empty().show()}),this.view_target.find("[data-ax-path]").off("change.axbinder").on("change.axbinder",function(t){var i,a,l=!1,s=[],r=$(t.target),d=r.attr("data-ax-path"),c=Function("","return this"+o(d)+";").call(e.model),u=(this.type||"").toLowerCase(),h=n(c),p=!0;if("object"!=h&&"array"!=h||(p=!1),"checkbox"==u){if(e.view_target.find('[data-ax-path="'+d+'"]').length>1){for("array"!=n(c)&&(c="undefined"==typeof c||""==c?[]:[].concat(c)),i=c.length,l=!1,a=this.checked;i--;)c[i]==this.value&&(l=!0);if(a)l||c.push(this.value);else{for(i=c.length;i--;)c[i]==this.value||s.push(c[i]);c=s}}else c=this.checked?this.value:"";Function("val","this"+o(d)+" = val;").call(e.model,c),e.change(d,{el:this,jquery:r,tagname:this.tagName.toLowerCase(),value:c})}else p&&(Function("val","this"+o(d)+" = val;").call(e.model,this.value),e.change(d,{el:this,jquery:r,tagname:this.tagName.toLowerCase(),value:this.value}));r.data("changedTime",(new Date).getTime())});var i;for(var a in e.tmpl){for(var l in e.tmpl[a])this.print_tmpl(a,e.tmpl[a][l],"isInit");if(i=this.update_trigger[a]){var s={repeat_path:a,tmpl:e.tmpl[a],list:Function("","return this."+a+";").call(this.model)};i.call(s,s)}}},this.set_els_value=function(t,e,i,n,a,l){n="undefined"==typeof n?[]:[].concat(n);var s,r;if("input"==e)if("checkbox"==i||"radio"==i){r=n.length;var d=!1;try{if(r>0)for(;r--;)"undefined"!=typeof n[r]&&t.value===n[r].toString()&&(d=!0)}catch(c){console.log(c)}t.checked=d}else t.value=n.join("");else if("select"==e){s=t.options,r=s.length;for(var u,h=!1;r--;){for(u=n.length;u--;)if("undefined"!=typeof n[u]&&s[r].value===n[u].toString()){s[r].selected=!0,h=!0;break}if(h)break}h||(s[0]?(s[0].selected=!0,Function("val","this"+o(a)+" = val;").call(this.model,s[0].value)):Function("val","this"+o(a)+" = val;").call(this.model,"")),window.AXSelect&&$("undefined"!=typeof n&&t).bindSelectSetValue(n[n.length-1])}else"textarea"==e?t.value=n.join("")||"":t.innerText?t.innerText=n.join(""):t.innerHTML=n.join("");return l&&this.change(a,{el:t,tagname:e,value:n}),this},this.change=function(t,e){var i=this.change_trigger[t];i&&i.call(e,e),"*"!=t&&this.change_trigger["*"]&&this.change_trigger["*"].call(e,e)},this.click=function(t,e){var i=this.click_trigger[t];i&&i.call(e,e)},this.sync_model=function(){},this.print_tmpl=function(t,e,i){var a=Function("","return this"+o(t)+";").call(this.model);if(a&&"array"==n(a))for(var l=0,s=a.length;l<s;l++){var r=a[l];if(jQuery.isPlainObject(r)?(r["@i"]=l,r["@r"]=l,0===l&&(r["@first"]=!0)):(r={"@i":l,"@value":r},0===l&&(r["@first"]=!0),console.log(r)),!r.__DELETED__){var d=$(ax5.mustache.render(e.content,r));d.attr("data-ax-repeat-path",t),d.attr("data-ax-repeat-i",r["@i"]),this.bind_event_tmpl(d,t),e.container.append(d)}}},this.bind_event_tmpl=function(t,e){var i=this,l=t.attr("data-ax-repeat-i"),s=Function("","return this"+o(e)+";").call(this.model);t.find("[data-ax-repeat-click]").off("click.axbinder").on("click.axbinder",function(t){var n=ax5.util.findParentNode(t.target,function(t){return t.getAttribute("data-ax-repeat-click")});if(n){var a=$(n),o=a.attr("data-ax-repeat-click"),r=(a.attr("data-ax-repeat-path"),{el:n,jquery:a,tagname:n.tagName.toLowerCase(),value:o,repeat_path:e,item:s[l],item_index:l,item_path:e+"["+l+"]"});i.click(e,r)}}),t.find("[data-ax-item-path]").each(function(){var t,n=$(this),o=n.attr("data-ax-item-path"),s=a(e,l,o),r=(this.type||"").toLowerCase();try{t=Function("","return this."+s+";").call(i.model)}catch(d){i.onerror&&i.onerror("not found target [model."+s+"]")}i.set_els_value(this,this.tagName.toLowerCase(),r,t||"",s)}),t.find("[data-ax-item-path]").off("change.axbinder").on("change.axbinder",function(o){var s,r,d=!1,c=[],u=(this.type||"").toLowerCase(),h=$(o.target),p=h.attr("data-ax-item-path"),f=a(e,l,p),g=Function("","return this."+f+";").call(i.model),m=n(g),x=!0;if("object"!=m&&"array"!=m||(x=!1),"checkbox"==u){if(t.find('[data-ax-item-path="'+p+'"]').length>1){for("array"!=n(g)&&(g="undefined"==typeof g||""==g?[]:[].concat(g)),s=g.length,d=!1,r=this.checked;s--;)g[s]==this.value&&(d=!0);if(r)d||g.push(this.value);else{for(s=g.length;s--;)g[s]==this.value||c.push(g[s]);g=c}}else g=this.checked?this.value:"";Function("val","this."+f+" = val;").call(i.model,g),i.change(f,{el:this,jquery:h,tagname:this.tagName.toLowerCase(),value:g})}else x&&(Function("val","this."+f+" = val;").call(i.model,this.value),i.change(f,{el:this,jquery:h,tagname:this.tagName.toLowerCase(),value:this.value}));h.data("changedTime",(new Date).getTime())}),t.find("[data-ax-item-path]").off("blur.axbinder").on("blur.axbinder",function(t){var e=$(t.target);("undefined"==typeof e.data("changedTime")||e.data("changedTime")<(new Date).getTime()-10)&&e.trigger("change")})},this.focus=function(t){return this.view_target.find('[data-ax-path="'+t+'"]').focus(),this},this.validate=function(){var t=this,e=[];return this.view_target.find("[data-ax-path]").each(function(){var i=$(this),n=i.attr("data-ax-path"),a=i.attr("data-ax-validate"),l=i.attr("pattern");if(a){var s,r,d;s=Function("","return this"+o(n)+";").call(t.model),"undefined"!=typeof s&&null!==s||(s=""),r=s.toString(),d=!1,"required"==a&&""==r.trim()?d=!0:"pattern"==a?d=!new RegExp(l).test(r):"email"==a?d=!/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/.test(r):!/\D.?/g.test(a)&&r.trim().length<a.number()&&(d=!0),d&&e.push({type:a,dataPath:n,el:this,jquery:i,value:s})}}),this.view_target.find("[data-ax-repeat-path]").each(function(){var i=$(this),n=i.attr("data-ax-repeat-path"),a=i.attr("data-ax-repeat-i");i.find("[data-ax-validate]").each(function(){var i=$(this),l=i.attr("data-ax-validate"),s=i.attr("data-ax-item-path"),r=Function("","return this"+o(n)+"["+a+"]."+s+";").call(t.model);"undefined"==typeof r&&(r="");var d=r.toString();if(l){var c=!1;"required"==l&&""==d.trim()?c=!0:"pattern"==l?c=!new RegExp(pattern).test(d):"email"==l?c=!/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/.test(d):!/\D.?/g.test(l)&&d.trim().length<l.number()&&(c=!0),c&&e.push({type:l,dataPath:n,el:this,jquery:i,value:r})}})}),e.length>0?{error:e}:{}},this.main=function(){arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}())}(),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"autocomplete"},function(){return function(){var t,n=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,removeIcon:"X",lang:{noSelected:"",noOptions:"no options",loading:"Now Processing"},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activeautocompleteOptionGroup=null,this.activeautocompleteQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,t=this.config;var a=jQuery(window),o={18:"KEY_ALT",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},l=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),"changeValue"==e.state&&(t&&t.onChange?t.onChange.call(e,e):this.onChange&&this.onChange.call(e,e)),t=null,e=null,!0},s=function(){for(var t,i=this.queue.length;i--;){var n=this.queue[i];if(n.$display&&(t=Math.max(n.$select.outerWidth(),e.number(n.minWidth)),n.$display.css({"min-width":t}),n.reset&&n.$display.find(".addon-icon-reset").css({"line-height":this.queue[i].$display.height()+"px"}),n.multiple)){var a=function(){return e.number(n.$display.css("border-top-width"))+e.number(n.$display.css("border-bottom-width"))}.call(this);n.$target.height(""),n.$display.height("");var o=n.$displayTable.outerHeight();Math.abs(o-n.$target.height())>=a&&(n.$target.css({height:o+a+4}),n.$display.css({height:o+a+4}))}}return i=null,t=null,this},r=function(t){if(t&&!this.activeautocompleteOptionGroup)return this;var e,i=this.queue[this.activeautocompleteQueueIndex],n={},o=0,l={},s={};return i?(t&&jQuery(document.body).append(this.activeautocompleteOptionGroup),n=i.$target.offset(),l={width:i.$target.outerWidth(),height:i.$target.outerHeight()},s={winWidth:Math.max(a.width(),jQuery(document.body).width()),winHeight:Math.max(a.height(),jQuery(document.body).height()),width:this.activeautocompleteOptionGroup.outerWidth(),height:this.activeautocompleteOptionGroup.outerHeight()},i.direction&&""!==i.direction&&"auto"!==i.direction?e=i.direction:(e="top",n.top-s.height-o<0?e="top":n.top+l.height+s.height+o>s.winHeight&&(e="bottom")),t&&this.activeautocompleteOptionGroup.addClass("direction-"+e),void this.activeautocompleteOptionGroup.css(function(){if("top"==e){if(n.top+l.height+s.height+o>s.winHeight){var t=n.top+s.height;return t+s.height+o>s.winHeight&&(t=0),t<0&&(t=0),{left:n.left,top:t,width:l.width}}return{left:n.left,top:n.top+l.height+1,width:l.width}}if("bottom"==e)return{left:n.left,top:n.top-s.height-1,width:l.width}}.call(this))):this},d=function(t,i){if(!this.activeautocompleteOptionGroup)return this;var n=this.queue[this.activeautocompleteQueueIndex],a="display";return(i=e.findParentNode(t.target,function(t){return t.getAttribute("data-option-value")?(a="optionItem",!0):n.$target.get(0)==t?(a="display",!0):void 0}))?("optionItem"===a&&(I.call(this,n.id,{optionIndex:{index:i.getAttribute("data-option-index")}},void 0,"optionItemClick"),s.call(this),r.call(this),n.multiple||this.close()),this):(this.close(),this)},c=function(t){var e=this.queue[t],n={};return n.id=e.id,n.theme=e.theme,n.size="ax5autocomplete-option-group-"+e.size,n.multiple=e.multiple,n.lang=e.lang,n.options=e.options,n.selected=e.selected,n.hasSelected=n.selected&&n.selected.length>0,n.removeIcon=e.removeIcon,i.tmpl.get.call(this,"label",n,e.columnKeys)},u=function(t){var e=this.queue[t];!e.multiple&&e.selected&&e.selected.length>0&&(e.selected=[].concat(e.selected[e.selected.length-1])),e.selected.forEach(function(t,e){t["@index"]=e}),e.$select.html(i.tmpl.get.call(this,"formSelectOptions",{selected:e.selected},e.columnKeys))},h=function(t){var e=this.queue[t];e.$displayLabel.find("[data-ax5autocomplete-selected-label]").remove(),e.$displayLabelInput.before(c.call(this,t))},p=function(t){return this.queue[t].disabled?this:(this.queue[t].$displayLabel.trigger("focus"),void this.queue[t].$displayLabelInput.focus())},f=function(t){this.queue[t].$displayLabelInput.val("")},g=function(t){this.queue[t].$displayLabel.trigger("blur")},m=function(t,n){if(this.activeautocompleteQueueIndex==-1)return this;var a=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;n=n.replace(a,""),this.queue[t].waitOptions=!0,this.queue[t].onSearch.call({self:this,item:this.queue[t],searchWord:n},function(t){var a={},o=this.queue[this.activeautocompleteQueueIndex];return!!o&&(function(t,i){var n={};i.options.forEach(function(e,i){e["@index"]=i,e["@findex"]=i,n[e[t.columnKeys.optionValue]]=e}),e.isArray(t.selected)&&t.selected.forEach(function(e){n[e[t.columnKeys.optionValue]]&&(i.options[n[e[t.columnKeys.optionValue]]["@index"]][t.columnKeys.optionSelected]=!0)})}(o,t),o.options=t.options,s.call(this),a.id=o.id,a.theme=o.theme,a.size="ax5autocomplete-option-group-"+o.size,a.multiple=o.multiple,a.lang=o.lang,a.options=o.options,this.activeautocompleteOptionGroup.find('[data-els="content"]').html(i.tmpl.get.call(this,"options",a,o.columnKeys)),x.call(this,this.activeautocompleteQueueIndex,n),r.call(this),void setTimeout(function(){r.call(this)}.bind(this)))}.bind(this))},x=function(t,e){if(this.activeautocompleteQueueIndex==-1)return this;var i,n=[],a=-1,o=this.queue[t].options.length-1;if(""!=e){for(;o-a++;){if(i=this.queue[t].options[a],(""+i.text).toLowerCase()==e.toLowerCase()){n=[{"@findex":i["@findex"],optionsSort:0}];break}var l=(""+i.text).toLowerCase().search(e.toLowerCase());if(l>-1&&(n.push({"@findex":i["@findex"],optionsSort:l}),n.length>2))break;l=null}n.sort(function(t,e){return t.optionsSort-e.optionsSort})}n&&n.length>0?b.call(this,t,void 0,n[0]["@findex"]):v.call(this,t)},v=function(t){this.activeautocompleteOptionGroup&&this.activeautocompleteOptionGroup.find("[data-option-focus-index]").removeClass("hover").removeAttr("data-option-selected"),this.queue[t].optionFocusIndex=-1},b=function(t,e,i){var n,a,o,l,s=this.queue[t];if(this.activeautocompleteOptionGroup&&s.options&&s.options.length>0){if("undefined"!=typeof i?n=i:(a=s.optionFocusIndex==-1?s.optionSelectedIndex||-1:s.optionFocusIndex,a==-1?n=0:(n=a+e,n<0?n=0:n>s.optionItemLength-1&&(n=s.optionItemLength-1))),s.optionFocusIndex=n,s.options[n]&&s.options[n].hide){if("undefined"==typeof e)return this;for(;s.options[n].hide;){if(n+=e,n<0){n=0;break}if(n>s.optionItemLength-1){n=s.optionItemLength-1;break}}}if("undefined"!=typeof n&&(this.activeautocompleteOptionGroup.find("[data-option-focus-index]").removeClass("hover"),o=this.activeautocompleteOptionGroup.find('[data-option-focus-index="'+n+'"]').addClass("hover"),l=this.activeautocompleteOptionGroup.find('[data-els="content"]'),o.get(0))){var r=o.outerHeight(),d=l.innerHeight(),c=l.scrollTop(),u=o.position().top+l.scrollTop();d+c<u+r?l.scrollTop(u+r-d):c>u&&l.scrollTop(u),"undefined"!=typeof e&&s.$displayLabelInput.val(s.options[n].text)}}},y=function(t){return t instanceof jQuery?t=t.data("data-ax5autocomplete-id"):e.isString(t)||(t=jQuery(t).data("data-ax5autocomplete-id")),e.isString(t)?e.search(this.queue,function(){return this.id==t}):void console.log(ax5.info.getError("ax5autocomplete","402","getQueIdx"))},w=function(t,e,i){return"undefined"==typeof i?!t.multiple||!e:i},_=function(t){this.queue[t].options.forEach(function(t){t.optgroup?t.options.forEach(function(t){t.selected=!1}):t.selected=!1}),this.queue[t].selected=[],this.queue[t].$select.html(i.tmpl.get.call(this,"formSelectOptions",{selected:this.queue[t].selected},this.queue[t].columnKeys))},I=function(){var i={selectedIndex:function(t,e,i,n){},removeSelectedIndex:function(t,e,i,n){for(var a=this.queue[t],o={},l=[],s=0,r=0;r<a.selected.length;r++)a.selected[r]["@index"]!=e.removeSelectedIndex.index&&(o={"@index":s,"@findex":s},o[a.columnKeys.optionValue]=a.selected[r][a.columnKeys.optionValue],o[a.columnKeys.optionText]=a.selected[r][a.columnKeys.optionText],l.push(o),s++);a.selected=l},optionIndex:function a(t,e,i,n){var o=this.queue[t],l={},a=o.selected.length,s=!0;l={"@index":a,"@findex":a},l[o.columnKeys.optionValue]=o.options[e.optionIndex.index][o.columnKeys.optionValue],l[o.columnKeys.optionText]=o.options[e.optionIndex.index][o.columnKeys.optionText];for(var r=0;r<o.selected.length;r++)o.selected[r][o.columnKeys.optionValue]==l[o.columnKeys.optionValue]&&(s=!1);s&&o.selected.push(l)},arr:function(t,a,o,l){a.forEach(function(a){if(e.isString(a)||e.isNumber(a))i.text.call(n,t,a,o,"justSetValue");else for(var l in i)if(a[l]){i[l].call(n,t,a,o,"justSetValue");break}})},value:function(i,n,a,o){var l,s=this.queue[i],r=e.search(s.options,function(){return this[s.columnKeys.optionValue]==n.value[s.columnKeys.optionValue]});if(r>-1)if(s.options[r][s.columnKeys.optionSelected]=w(s,s.options[r][s.columnKeys.optionSelected],a),s.options[r][s.columnKeys.optionSelected]){for(var d=!0,c=0;c<s.selected.length;c++)if(s.selected[c][t.columnKeys.optionValue]==s.options[r][t.columnKeys.optionValue]){d=!1;break}d&&(l={},l[s.columnKeys.optionValue]=s.options[r][s.columnKeys.optionValue],l[s.columnKeys.optionText]=s.options[r][s.columnKeys.optionText],s.selected.push(l))}else{for(var u=[],c=0;c<s.selected.length;c++)s.selected[c][t.columnKeys.optionValue]==s.options[r][t.columnKeys.optionValue]||(l={},l[s.columnKeys.optionValue]=s.selected[c][s.columnKeys.optionValue],l[s.columnKeys.optionText]=s.selected[c][s.columnKeys.optionText],u.push(l));s.selected=u}else{for(var d=!0,c=0;c<s.selected.length;c++)if(s.selected[c][t.columnKeys.optionValue]==n.value[t.columnKeys.optionValue]){d=!1;break}d&&(l={},l[s.columnKeys.optionValue]=n.value[t.columnKeys.optionValue],l[s.columnKeys.optionText]=n.value[t.columnKeys.optionText],s.selected.push(l))}},text:function(i,n,a,o){var l,s=this.queue[i],r=e.search(s.options,function(){return this[s.columnKeys.optionText]==n});if(r>-1)if(s.options[r][s.columnKeys.optionSelected]=w(s,s.options[r][s.columnKeys.optionSelected],a),s.options[r][s.columnKeys.optionSelected]){for(var d=!0,c=0;c<s.selected.length;c++)if(s.selected[c][t.columnKeys.optionText]==s.options[r][t.columnKeys.optionText]){d=!1;break}d&&(l={},l[s.columnKeys.optionValue]=s.options[r][s.columnKeys.optionValue],l[s.columnKeys.optionText]=s.options[r][s.columnKeys.optionText],s.selected.push(l))}else{for(var u=[],c=0;c<s.selected.length;c++)s.selected[c][t.columnKeys.optionText]==s.options[r][t.columnKeys.optionText]||(l={},l[s.columnKeys.optionValue]=s.selected[c][s.columnKeys.optionValue],l[s.columnKeys.optionText]=s.selected[c][s.columnKeys.optionText],u.push(l));s.selected=u}else{for(var d=!0,c=0;c<s.selected.length;c++)if(s.selected[c][t.columnKeys.optionText]==n){d=!1;break}d&&(l={},l[s.columnKeys.optionValue]=n,l[s.columnKeys.optionText]=n,s.selected.push(l))}},clear:function(t){_.call(this,t),v.call(this,t),this.activeautocompleteOptionGroup&&this.activeautocompleteOptionGroup.find("[data-option-index]").attr("data-option-Selected","false"),this.queue[t].optionSelectedIndex=-1}};return function(t,n,a,o){var s=e.isNumber(t)?t:y.call(this,t);if(s===-1)return void console.log(ax5.info.getError("ax5autocomplete","402","val"));if("undefined"==typeof n)throw"error not found value";if(e.isArray(n))i.clear.call(this,s),i.arr.call(this,s,this.queue[s].multiple||0==n.length?n:[n[n.length-1]],a);else if(e.isString(n)||e.isNumber(n))"undefined"==typeof n||null===n||this.queue[s].multiple||_.call(this,s),i.text.call(this,s,n,a);else if(null===n)i.clear.call(this,s);else{this.queue[s].multiple||_.call(this,s);for(var d in i)if(n[d]){i[d].call(this,s,n,a);break}}return u.call(this,s),h.call(this,s),p.call(this,s),r.call(this),"undefined"!=typeof n&&o&&!o.noStateChange&&l.call(this,this.queue[s],{self:this,item:this.queue[s],state:"changeValue",value:this.queue[s].selected}),t=null,this}}();this.init=function(){this.onStateChanged=t.onStateChanged,this.onChange=t.onChange,jQuery(window).on("resize.ax5autocomplete-display-"+this.instanceId,function(){s.call(this)}.bind(this))},this.bind=function(a){var l,d=function(){var t=e.debounce(function(t){return this.activeautocompleteQueueIndex==-1?this:void m.call(n,t,this.queue[t].$displayLabelInput.val())},150),l=function(t){f.call(this,t)},d={click:function(t,i){var a,o=e.findParentNode(i.target,function(t){return t.getAttribute("data-ax5autocomplete-remove")?(a="optionItemRemove",!0):t.getAttribute("data-selected-clear")?(a="clear",!0):void 0});if(o){if("optionItemRemove"===a){var l=o.getAttribute("data-ax5autocomplete-remove-index");return this.queue[t].selected.splice(l,1),u.call(this,t),h.call(this,t),p.call(this,t),s.call(this),r.call(this),e.stopEvent(i),this}"clear"===a&&(I.call(this,t,{clear:!0}),s.call(this),r.call(this))}else n.activeautocompleteQueueIndex==t?this.queue[t].optionFocusIndex==-1&&n.close():p.call(this,t)},keyUp:function(i,n){return n.which==ax5.info.eventKeys.ESC&&this.activeautocompleteQueueIndex===-1?(e.stopEvent(n),this):n.which==ax5.info.eventKeys.TAB?(this.close(),this):(this.activeautocompleteQueueIndex!=i&&this.open(i),void(o[n.which]?e.stopEvent(n):n.which==ax5.info.eventKeys.BACKSPACE&&""==this.queue[i].$displayLabelInput.val()?(this.queue[i].selected.pop(),u.call(this,i),h.call(this,i),p.call(this,i),s.call(this),r.call(this),e.stopEvent(n)):t.call(this,i)))},keyDown:function(t,i){if(i.which==ax5.info.eventKeys.ESC)f.call(this,t),this.close(),e.stopEvent(i);else if(i.which==ax5.info.eventKeys.RETURN){var n=this.queue[t].$displayLabelInput.val();a.optionFocusIndex>-1?I.call(this,a.id,{optionIndex:{index:a.optionFocusIndex}},void 0,"optionItemClick"):""!=n&&I.call(this,t,n,!0),f.call(this,t),s.call(this),this.close(),e.stopEvent(i)}else i.which==ax5.info.eventKeys.DOWN?(b.call(this,t,1),e.stopEvent(i)):i.which==ax5.info.eventKeys.UP&&(b.call(this,t,-1),e.stopEvent(i))},focus:function(t,e){},blur:function(t,i){l.call(this,t),e.stopEvent(i)},selectChange:function(t,e){I.call(this,t,{value:this.queue[t].$select.val()},!0)}};return function(t){var e=this.queue[t],n={};return e.$display?h.call(this,t):(n.instanceId=this.instanceId,n.id=e.id,n.name=e.name,n.theme=e.theme,n.tabIndex=e.tabIndex,n.multiple=e.multiple,n.reset=e.reset,n.label=c.call(this,t),n.formSize=function(){return e.size?"input-"+e.size:""}(),e.$display=jQuery(i.tmpl.get.call(this,"autocompleteDisplay",n,e.columnKeys)),e.$displayTable=e.$display.find('[data-els="display-table"]'),e.$displayLabel=e.$display.find('[data-ax5autocomplete-display="label"]'),e.$displayLabelInput=e.$display.find('[data-ax5autocomplete-display="input"]'),e.$target.find("select").get(0)?(e.$select=e.$target.find("select"),e.$select.attr("tabindex","-1").attr("class","form-control "+n.formSize),n.name&&e.$select.attr("name","name"),e.$select.attr("multiple","multiple")):(e.$select=jQuery(i.tmpl.get.call(this,"formSelect",n,e.columnKeys)),e.$target.append(e.$select)),e.$target.append(e.$display)),s.call(this),e.$display.off("click.ax5autocomplete").on("click.ax5autocomplete",d.click.bind(this,t)),e.$displayLabelInput.off("focus.ax5autocomplete").on("focus.ax5autocomplete",d.focus.bind(this,t)).off("blur.ax5autocomplete").on("blur.ax5autocomplete",d.blur.bind(this,t)).off("keydown.ax5autocomplete").on("keydown.ax5autocomplete",d.keyDown.bind(this,t)).off("keyup.ax5autocomplete").on("keyup.ax5autocomplete",d.keyUp.bind(this,t)),e.$select.off("change.ax5autocomplete").on("change.ax5autocomplete",d.selectChange.bind(this,t)),n=null,e=null,t=null,this}}(),g={};return a=jQuery.extend(!0,g,t,a),a.target?(a.$target=jQuery(a.target),a.id||(a.id=a.$target.data("data-ax5autocomplete-id")),a.id||(a.id="ax5autocomplete-"+ax5.getGuid(),a.$target.data("data-ax5autocomplete-id",a.id)),a.name=a.$target.attr("data-ax5autocomplete"),a.options=[],a.selected=[],function(t){e.isObject(t)&&!t.error&&(a=jQuery.extend(!0,a,t))}(e.parseJson(a.$target.attr("data-ax5autocomplete-config"),!0)),l=e.search(this.queue,function(){return this.id==a.id}),l===-1?(this.queue.push(a),d.call(this,this.queue.length-1)):(this.queue[l]=jQuery.extend(!0,{},this.queue[l],a),d.call(this,l)),g=null,l=null,this):(console.log(ax5.info.getError("ax5autocomplete","401","bind")),this)},this.open=function(){return function(n,a){this.waitOptionsCallback=null;var o,s,c=e.isNumber(n)?n:y.call(this,n),u=this.queue[c],h={};return u.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activeautocompleteOptionGroup?this.activeautocompleteQueueIndex==c?this:a>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(c,(a||0)+1)}.bind(this),t.animateTime),this):(u.optionFocusIndex=-1,u.selected&&u.selected.length>0&&(u.optionSelectedIndex=u.selected[0]["@findex"]),h.id=u.id,h.theme=u.theme,h.size="ax5autocomplete-option-group-"+u.size,h.multiple=u.multiple,h.lang=u.lang,u.$display.attr("data-autocomplete-option-group-opened","true"),h.waitOptions=!0,h.options=[],this.activeautocompleteOptionGroup=jQuery(i.tmpl.get.call(this,"optionGroup",h,u.columnKeys)),this.activeautocompleteOptionGroup.find('[data-els="content"]').html(i.tmpl.get.call(this,"options",h,u.columnKeys)),this.activeautocompleteQueueIndex=c,r.call(this,"append"),jQuery(window).on("resize.ax5autocomplete-"+this.instanceId,function(){r.call(this)}.bind(this)),u.selected&&u.selected.length>0&&(s=this.activeautocompleteOptionGroup.find('[data-option-index="'+u.selected[0]["@index"]+'"]'),s.get(0)&&(o=s.position().top-this.activeautocompleteOptionGroup.height()/3,this.activeautocompleteOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:o},u.animateTime,"swing",function(){}))),jQuery(window).on("click.ax5autocomplete-"+this.instanceId,function(t){t=t||window.event,d.call(this,t),e.stopEvent(t)}.bind(this)),l.call(this,u,{self:this,state:"open",item:u}),h=null,o=null,s=null,this))}}(),this.setValue=function(t,i){var n=e.isNumber(t)?t:y.call(this,t);if(n===-1)return void console.log(ax5.info.getError("ax5autocomplete","402","val"));if(_.call(this,n),e.isArray(i)){var a=e.map(i,function(){return{value:this}});I.call(this,n,a,!0,{noStateChange:!0})}else e.isObject(i)?I.call(this,n,{value:i},!0,{noStateChange:!0}):h.call(this,n);return g.call(this,n),s.call(this),this},this.setText=function(t,i){var n=e.isNumber(t)?t:y.call(this,t);return n===-1?void console.log(ax5.info.getError("ax5autocomplete","402","val")):(this.queue[n].selected=[],_.call(this,n),I.call(this,n,i,!0,{noStateChange:!0}),g.call(this,n),s.call(this),this)},this.getSelectedOption=function(t){var i=e.isNumber(t)?t:y.call(this,t);return i===-1?void console.log(ax5.info.getError("ax5autocomplete","402","val")):e.deepCopy(this.queue[i].selected)},this.close=function(e){return this.closeTimer&&clearTimeout(this.closeTimer),this.activeautocompleteOptionGroup?(e=this.queue[this.activeautocompleteQueueIndex],e.optionFocusIndex=-1,e.$display.removeAttr("data-autocomplete-option-group-opened").trigger("focus"),this.activeautocompleteOptionGroup.addClass("destroy"),jQuery(window).off("resize.ax5autocomplete-"+this.instanceId).off("click.ax5autocomplete-"+this.instanceId).off("keyup.ax5autocomplete-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activeautocompleteOptionGroup&&this.activeautocompleteOptionGroup.remove(),this.activeautocompleteOptionGroup=null,this.activeautocompleteQueueIndex=-1,l.call(this,e,{self:this,state:"close"})}.bind(this),t.animateTime),
this.waitOptionsCallback=null,this):this},this.blur=function(t){var i=e.isNumber(t)?t:y.call(this,t);return i===-1?void console.log(ax5.info.getError("ax5autocomplete","402","val")):(g.call(this,i),this)},this.enable=function(t){var e=y.call(this,t);return"undefined"!=typeof e&&(this.queue[e].disable=!1,this.queue[e].$display[0]&&(this.queue[e].$display.removeAttr("disabled"),this.queue[e].$displayLabelInput.removeAttr("disabled")),this.queue[e].$select[0]&&this.queue[e].$select.removeAttr("disabled"),l.call(this,this.queue[e],{self:this,state:"enable"})),this},this.disable=function(t){var e=y.call(this,t);return"undefined"!=typeof e&&(this.queue[e].disable=!0,this.queue[e].$display[0]&&(this.queue[e].$display.attr("disabled","disabled"),this.queue[e].$displayLabelInput.attr("disabled","disabled")),this.queue[e].$select[0]&&this.queue[e].$select.attr("disabled","disabled"),l.call(this,this.queue[e],{self:this,state:"disable"})),this},this.align=function(){return s.call(this),this},this.main=function(){arguments&&e.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)}}()),i=ax5.ui.autocomplete}(),function(){var t=ax5.ui.autocomplete,e=(ax5.util,function(t){return'\n<div class="ax5autocomplete-option-group {{theme}} {{size}}" data-ax5autocomplete-option-group="{{id}}">\n    <div class="ax-autocomplete-body">\n        <div class="ax-autocomplete-option-group-content" data-els="content"></div>\n    </div>\n    <div class="ax-autocomplete-arrow"></div> \n</div>\n'}),i=function(t){return' \n<input tabindex="-1" type="text" data-input-dummy="" style="display: none;" />\n<div class="form-control {{formSize}} ax5autocomplete-display {{theme}}" \ndata-ax5autocomplete-display="{{id}}" data-ax5autocomplete-instance="{{instanceId}}">\n    <div class="ax5autocomplete-display-table" data-els="display-table">\n        <div data-ax5autocomplete-display="label-holder"> \n        <a {{^tabIndex}}{{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}\n        data-ax5autocomplete-display="label"\n        spellcheck="false"><input type="text"data-ax5autocomplete-display="input" style="border:0px none;" /></a>\n        </div>\n        <div data-ax5autocomplete-display="addon"> \n            {{#multiple}}{{#reset}}\n            <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n            {{/reset}}{{/multiple}}\n        </div>\n    </div>\n</a>\n'},n=function(t){return'\n<select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" multiple="multiple"></select>\n'},a=function(t){return'\n{{#selected}}\n<option value="{{'+t.optionValue+'}}" selected="true">{{'+t.optionText+"}}</option>\n{{/selected}}\n"},o=function(t){return'\n{{#waitOptions}}\n    <div class="ax-autocomplete-option-item">\n            <div class="ax-autocomplete-option-item-holder">\n                <span class="ax-autocomplete-option-item-cell ax-autocomplete-option-item-label">\n                    {{{lang.loading}}}\n                </span>\n            </div>\n        </div>\n{{/waitOptions}}\n{{^waitOptions}}\n    {{#options}}\n        {{^hide}}\n        <div class="ax-autocomplete-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+t.optionValue+'}}" {{#'+t.optionSelected+'}}data-option-selected="true"{{/'+t.optionSelected+'}}>\n            <div class="ax-autocomplete-option-item-holder">\n                <span class="ax-autocomplete-option-item-cell ax-autocomplete-option-item-label">{{'+t.optionText+'}}</span>\n            </div>\n        </div>\n        {{/hide}}\n    {{/options}}\n    {{^options}}\n        <div class="ax-autocomplete-option-item">\n            <div class="ax-autocomplete-option-item-holder">\n                <span class="ax-autocomplete-option-item-cell ax-autocomplete-option-item-label">\n                    {{{lang.noOptions}}}\n                </span>\n            </div>\n        </div>\n    {{/options}}\n{{/waitOptions}}\n'},l=function(t){return'{{#selected}}\n<div tabindex="-1" data-ax5autocomplete-selected-label="{{@i}}" data-ax5autocomplete-selected-text="{{text}}">\n<div data-ax5autocomplete-remove="true" data-ax5autocomplete-remove-index="{{@i}}">{{{removeIcon}}}</div>\n<span>{{'+t.optionText+"}}</span>\n</div>{{/selected}}"};t.tmpl={autocompleteDisplay:i,formSelect:n,formSelectOptions:a,optionGroup:e,options:o,label:l,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),ax5.ui.autocomplete_instance=new ax5.ui.autocomplete,jQuery.fn.ax5autocomplete=function(){return function(t){if(ax5.util.isString(arguments[0])){var e=arguments[0];switch(e){case"open":return ax5.ui.autocomplete_instance.open(this);case"close":return ax5.ui.autocomplete_instance.close(this);case"setValue":return ax5.ui.autocomplete_instance.setValue(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"setText":return ax5.ui.autocomplete_instance.setText(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"getSelectedOption":return ax5.ui.autocomplete_instance.getSelectedOption(this);case"enable":return ax5.ui.autocomplete_instance.enable(this);case"disable":return ax5.ui.autocomplete_instance.disable(this);case"blur":return ax5.ui.autocomplete_instance.blur(this);case"align":return ax5.ui.autocomplete_instance.align(this);default:return this}}else"undefined"==typeof t&&(t={}),jQuery.each(this,function(){var e={target:this};t=jQuery.extend({},t,e),ax5.ui.autocomplete_instance.bind(t)});return this}}(),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"docker"},function(){return function(){var n=this,a=this,o=void 0;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,columnKeys:{},control:{},icons:{close:"X",more:"..."},labelDirection:"top",disableClosePanel:!1,disableDragPanel:!1,resizeDebounceTime:100,panelDebounceTime:300},this.xvar={},this.menu=null,this.onResize=null,this.panels=[],this.panelId=0,this.modules={},o=this.config;var l={resizeDebounceFn:ax5.util.debounce(function(t){t()},o.resizeDebounceTime),panelDebounceFn:ax5.util.debounce(function(t){t()},o.panelDebounceTime)},s=function(t){var e={resize:function(t){this.onResize&&l.resizeDebounceFn(function(){var e={self:this,resizer:t.target,resizedDom:[t.target.prev(),t.target.next()]};this.onResize.call(e,e)}.bind(this))}};return t.eventName in e&&e[t.eventName].call(n,t),n},r=function(){return n.panelId++},d={init:function(t,e){t.$element.html(e.name)},active:function(t,e){},deactive:function(t,e){},destroy:function(t,e){}},c=function(t,e){var i=[];return t&&"undefined"!=typeof t.panelPath&&i.push(t.panelPath),i.push("panels["+(e||0)+"]"),i.join(".")},u=function(t){var i=[],a=e.isArray(t)?[].concat(t):[].concat(t.split(/[\.\[\]]/g));a.forEach(function(t){""!==t&&i.push('["'+t.replace(/['\"]/g,"")+'"]')});try{return Function("","return this"+i.join("")+";").call(n)}catch(o){return}},h=function(t){try{var e=t.panelPath.substr(0,t.panelPath.lastIndexOf("."));return Function("","return this."+e+";").call(n)}catch(i){return}},p=function(t,i){var a=[],o=e.isArray(t)?[].concat(t):[].concat(t.split(/[\.\[\]]/g));return o.forEach(function(t){""!==t&&a.push('["'+t.replace(/['\"]/g,"")+'"]')}),Function("val","return this"+a.join("")+" = val;").call(n,i)},f=function(t){var e=void 0,i=t.originalEvent?t.originalEvent:t;return e="changedTouches"in i&&i.changedTouches?i.changedTouches[0]:i,{clientX:e.pageX,clientY:e.pageY}},g=function(t,i,a){var l=jQuery.extend(t.moduleState,{name:t.name}),s={$element:t.$item},r=void 0,c={init:function(){t.builded=!0,r=t.moduleName in n.modules&&"init"in n.modules[t.moduleName]?n.modules[t.moduleName]:d,r.init(s,l)},active:function(){t.active=!0,t.$label.addClass("active"),t.$item.addClass("active");var e=t.$label.parent();e.get(0)&&e.get(0).clientWidth!==e.get(0).scrollWidth&&e.animate({scrollLeft:t.$label.position().left},300),r=t.moduleName in n.modules&&"active"in n.modules[t.moduleName]?n.modules[t.moduleName]:d,r.active(s,l),e=null},deactive:function(){t.active=!1,t.$label.removeClass("active"),t.$item.removeClass("active"),r=t.moduleName in n.modules&&"deactive"in n.modules[t.moduleName]?n.modules[t.moduleName]:d,r.deactive(s,l)},destroy:function(){r=t.moduleName in n.modules&&"destroy"in n.modules[t.moduleName]?n.modules[t.moduleName]:d,r.destroy(s,l),p(t.panelPath,null),I()},remove:function(){r=t.moduleName in n.modules&&"destroy"in n.modules[t.moduleName]?n.modules[t.moduleName]:d,r.destroy(s,l),p(t.panelPath,null),I()}},u={panel:t,controlType:i},h=function(){c[i](),r=null,e.isFunction(o.control.after)&&o.control.after.call(u,u)};c[i]&&(e.isFunction(o.control.before)?o.control.before.call(u,u,function(t){"undefined"==typeof t&&(t=!0),t&&h(),e.isFunction(a)&&a(t)}):h())},m=function(){var t={stack:function(n,l,s,r){var d=void 0,u=-1;s.panelPath=c(l,r),d=jQuery(i.tmpl.get.call(this,"stack-panel",{id:a.instanceId,name:s.name,hasLabelColor:!e.isNothing(s.color),color:s.color,borderColor:s.borderColor,panelPath:s.panelPath,icons:o.icons,labelDirection:s.labelDirection||o.labelDirection,disableClosePanel:o.disableClosePanel,disableDragPanel:o.disableDragPanel},{})),n.append(d),e.isArray(s.panels)&&(s.panels.forEach(function(t,e){t.active&&(u=e)}),u===-1&&(u=0),s.panels[u].active=!0,s.panels.forEach(function(e,i){e.panelIndex=i,t[e.type](d,s,e,i)})),d=null,u=null},panel:function(t,n,l,s){var d=void 0;l.panelPath=c(n,s),l.$label=jQuery(i.tmpl.get.call(this,"panel-label",{id:a.instanceId,pIndex:s,name:l.name,hasLabelColor:!e.isNothing(l.color),color:l.color,borderColor:l.borderColor,panelPath:l.panelPath,icons:o.icons,disableClosePanel:o.disableClosePanel,disableDragPanel:o.disableDragPanel},{})),l.$item?(l.$item.attr("data-ax5docker-path",l.panelPath),l.$item.attr("data-ax5docker-pane-item",s)):l.$item=jQuery('<div data-ax5docker-pane-item="'+s+'" data-ax5docker-id="'+a.instanceId+'" data-ax5docker-pane-id="'+r()+'" data-ax5docker-path="'+l.panelPath+'"></div>'),n&&"stack"==n.type?(l.active&&(l.builded||g(l,"init"),g(l,"active")),t.find('[data-ax5docker-pane-tabs="'+a.instanceId+'"]').append(l.$label),t.find('[data-ax5docker-pane-item-views="'+a.instanceId+'"]').append(l.$item)):(d=jQuery(i.tmpl.get.call(this,"stack-panel",{id:a.instanceId,name:l.name,hasLabelColor:!e.isNothing(l.color),color:l.color,borderColor:l.borderColor,panelPath:l.panelPath,flexGrow:l.flexGrow,icons:o.icons,labelDirection:l.labelDirection||o.labelDirection,disableClosePanel:o.disableClosePanel,disableDragPanel:o.disableDragPanel},{})),l.builded||g(l,"init"),g(l,"active"),d.find('[data-ax5docker-pane-tabs="'+a.instanceId+'"]').append(l.$label),d.find('[data-ax5docker-pane-item-views="'+a.instanceId+'"]').append(l.$item),t.append(d)),d=null},resizeHandle:function(t,e,i,n){var o=jQuery('<div data-ax5docker-id="'+a.instanceId+'" data-ax5docker-resize-handle="'+e.type+"/"+e.panelPath+"/"+n+'"></div>');t.append(o),o=null},row:function(i,n,o,l){var s=void 0;if(o.panelPath=c(n,l),n&&"stack"==n.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";s=jQuery('<div data-ax5docker-pane-axis="row" data-ax5docker-id="'+a.instanceId+'" data-ax5docker-path="'+o.panelPath+'" style="flex-grow: '+(o.flexGrow||1)+';"></div>'),i.append(s),e.isArray(o.panels)&&o.panels.forEach(function(e,i){i>0&&t.resizeHandle(s,o,e,i),e.panelIndex=i,t[e.type](s,o,e,i)}),s=null},column:function(i,n,o,l){var s=void 0;if(o.panelPath=c(n,l),n&&"stack"==n.type)throw"The 'stack' type child nodes are allowed only for the 'panel' type.";s=jQuery('<div data-ax5docker-pane-axis="column" data-ax5docker-id="'+a.instanceId+'" data-ax5docker-path="'+o.panelPath+'" style="flex-grow: '+(o.flexGrow||1)+';"></div>'),i.append(s),e.isArray(o.panels)&&o.panels.forEach(function(e,i){i>0&&t.resizeHandle(s,o,e,i),e.panelIndex=i,t[e.type](s,o,e,i)}),s=null}},l=jQuery('<div data-ax5docker-panes="'+n.instanceId+'"></div>');n.panels[0]&&t[n.panels[0].type](l,null,n.panels[0],0),n.$target.html(l),n.$target.off("click.ax5docker-pane").on("click.ax5docker-pane",'[data-ax5docker-id="'+a.instanceId+'"][data-ax5docker-pane-tab] .close-icon',function(t){a.removePanel($(this).parents("[data-ax5docker-pane-tab]").attr("data-ax5docker-path")),e.stopEvent(t)}).on("click.ax5docker-pane",'[data-ax5docker-id="'+a.instanceId+'"][data-ax5docker-pane-tab]',function(t){var i=jQuery(this),n=u(i.parents("[data-ax5docker-pane]").attr("data-ax5docker-path")),a=i.attr("data-ax5docker-pane-tab");i.hasClass("active")||b(n,a),i=null,n=null,a=null,e.stopEvent(t)}).on("click.ax5docker-pane",'[data-ax5docker-pane-tabs-more="'+n.instanceId+'"]',function(t){y($(this).parents("[data-ax5docker-pane]"),t),e.stopEvent(t)}),n.$target.off("mousedown.ax5docker-pane-resize").off("dragstart.ax5docker-pane-resize").on("dragstart.ax5docker-pane-resize",'[data-ax5docker-id="'+a.instanceId+'"][data-ax5docker-pane-tab]',function(t){o.disableDragPanel||x.on(this)}).on("mousedown.ax5docker-pane-resize",'[data-ax5docker-id="'+a.instanceId+'"][data-ax5docker-resize-handle]',function(t){var i=this.getAttribute("data-ax5docker-resize-handle").split(/\//g);a.xvar.mousePosition=f(t),a.xvar.resizerType=i[0],a.xvar.resizerPath=i[1],a.xvar.resizerIndex=i[2],a.xvar.resizer$dom=$(this),a.xvar.resizerParent$dom=a.xvar.resizer$dom.parent(),a.xvar.resizerPrevGrow=e.number(a.xvar.resizer$dom.prev().css("flex-grow")),a.xvar.resizerNextGrow=e.number(a.xvar.resizer$dom.next().css("flex-grow")),"row"==a.xvar.resizerType?a.xvar.resizerCanvasWidth=a.xvar.resizer$dom.prev().innerWidth()+a.xvar.resizer$dom.next().innerWidth()+a.xvar.resizer$dom.width():a.xvar.resizerCanvasHeight=a.xvar.resizer$dom.prev().innerHeight()+a.xvar.resizer$dom.next().innerHeight()+a.xvar.resizer$dom.height(),v.on(this),e.stopEvent(t)}).on("dragstart.ax5docker-pane-resize",'[data-ax5docker-id="'+a.instanceId+'"][data-ax5docker-resize-handle]',function(t){return e.stopEvent(t),!1}),w(),l=null},x={on:function(t){n.panels[0]&&n.panels[0].panels&&n.panels[0].panels.length&&(n.xvar.dragger={dragPanel:t,target:null,dragOverVertical:null,dragOverHorizontal:null},n.$target.on("dragover.ax5docker-"+n.instanceId,'[data-ax5docker-id="'+n.instanceId+'"][data-ax5docker-path]',function(t){x.dragover(this,t),e.stopEvent(t)}).on("drop.ax5docker-"+n.instanceId,function(t){x.off("drop"),e.stopEvent(t)}).on("dragend.ax5docker-"+n.instanceId,function(t){x.off(),e.stopEvent(t)}))},dragover:function(t,e){var i=jQuery(t),a={},o=f(e),l=void 0,s=void 0;if(null!=n.xvar.dragger.target&&n.xvar.dragger.target.get(0)==i.get(0)||(n.xvar.dragger.target&&n.xvar.dragger.target.removeAttr("data-dropper"),n.xvar.dragger.target=i,n.xvar.dragger.dragOverVertical=null,n.xvar.dragger.dragOverHorizontal=null),a=i.offset(),a.width=i.width(),a.height=i.height(),i.attr("data-ax5docker-pane-tab")){var r=a.width/2;if(a.left<=o.clientX&&a.left+r>=o.clientX?s="left":a.left+r<=o.clientX&&a.left+2*r>=o.clientX&&(s="right"),n.xvar.dragger.dragOverHorizontal!=s&&"undefined"!=typeof s){n.xvar.dragger.dragOverHorizontal=s;var d={left:function(t){t.attr("data-dropper","left")},right:function(t){t.attr("data-dropper","right")}};n.xvar.dragger.dragOverHorizontal in d&&d[n.xvar.dragger.dragOverHorizontal](n.xvar.dragger.target)}r=null}else if(i.attr("data-ax5docker-pane-tabs"))n.xvar.dragger.dragOverHorizontal="last-child",n.xvar.dragger.target.attr("data-dropper","true");else if(i.attr("data-ax5docker-pane-item")){var c=a.height/3,u=a.width/3;if(a.top<=o.clientY&&a.top+c>=o.clientY?l="top":a.top+c<=o.clientY&&a.top+2*c>=o.clientY?l="middle":a.top+2*c<=o.clientY&&a.top+3*c>=o.clientY&&(l="bottom"),a.left<=o.clientX&&a.left+u>=o.clientX?s="left":a.left+u<=o.clientX&&a.left+2*u>=o.clientX?s="center":a.left+2*u<=o.clientX&&a.left+3*u>=o.clientX&&(s="right"),n.xvar.dragger.dragOverVertical!=l||n.xvar.dragger.dragOverHorizontal!=s){n.xvar.dragger.dragOverVertical=l,n.xvar.dragger.dragOverHorizontal=s;var h={"left-top":function(t){t.attr("data-dropper","left")},"right-top":function(t){t.attr("data-dropper","right")},"center-top":function(t){t.attr("data-dropper","top")},"left-middle":function(t){t.attr("data-dropper","left")},"right-middle":function(t){t.attr("data-dropper","right")},"center-middle":function(t){t.attr("data-dropper","center")},"left-bottom":function(t){t.attr("data-dropper","left")},"right-bottom":function(t){t.attr("data-dropper","right")},"center-bottom":function(t){t.attr("data-dropper","bottom")}};n.xvar.dragger.dragOverHorizontal+"-"+n.xvar.dragger.dragOverVertical in h&&h[n.xvar.dragger.dragOverHorizontal+"-"+n.xvar.dragger.dragOverVertical](n.xvar.dragger.target)}c=null,u=null}},off:function(t){if(t){var e=u(n.xvar.dragger.dragPanel.getAttribute("data-ax5docker-path")),i=[];n.xvar.dragger.dragOverHorizontal&&i.push(n.xvar.dragger.dragOverHorizontal),n.xvar.dragger.dragOverVertical&&i.push(n.xvar.dragger.dragOverVertical),n.appendPanel(e,n.xvar.dragger.target.attr("data-ax5docker-path"),i),e=null,i=null}w(),n.$target.off("dragover.ax5docker-"+n.instanceId).off("drop.ax5docker-"+n.instanceId).off("dragend.ax5docker-"+n.instanceId),n.xvar.dragger.target.removeAttr("data-dropper")}},v={on:function(t){jQuery(document.body).on("mousemove.ax5docker-"+n.instanceId,function(t){var i=f(t),n=void 0;a.xvar.resizerLived?("row"==a.xvar.resizerType?(a.xvar.__da=i.clientX-a.xvar.mousePosition.clientX,n=e.number(2*a.xvar.__da/a.xvar.resizerCanvasWidth,{round:6}),a.xvar.resizer$dom.prev().css({"flex-grow":a.xvar.resizerPrevGrow+n}),a.xvar.resizer$dom.next().css({"flex-grow":a.xvar.resizerNextGrow-n})):(a.xvar.__da=i.clientY-a.xvar.mousePosition.clientY,n=e.number(2*a.xvar.__da/a.xvar.resizerCanvasHeight,{round:6}),a.xvar.resizer$dom.prev().css({"flex-grow":a.xvar.resizerPrevGrow+n}),a.xvar.resizer$dom.next().css({"flex-grow":a.xvar.resizerNextGrow-n})),s({eventName:"resize",target:a.xvar.resizer$dom})):a.xvar.resizerLived=!0,i=null,n=null}).on("mouseup.ax5docker-"+n.instanceId,function(t){v.off(),e.stopEvent(t)}).on("mouseleave.ax5docker-"+n.instanceId,function(t){v.off(),e.stopEvent(t)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){if(a.xvar.resizerLived=!1,"undefined"==typeof n.xvar.__da);else{var t=a.xvar.resizer$dom.prev(),i=a.xvar.resizer$dom.next(),o=u(t.attr("data-ax5docker-path")),l=u(i.attr("data-ax5docker-path"));o.flexGrow=e.number(t.css("flex-grow")),l.flexGrow=e.number(i.css("flex-grow")),t=null,i=null,o=null,l=null}w(),jQuery(document.body).off("mousemove.ax5docker-"+n.instanceId).off("mouseup.ax5docker-"+n.instanceId).off("mouseleave.ax5docker-"+n.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},b=function(t,e){for(var i=t.panels[e],a=0,o=t.panels.length;a<o;a++)t.panels[a].active&&g(t.panels[a],"deactive");return i.builded||g(i,"init"),g(i,"active"),t=null,e=null,i=null,n},y=function(t,i){var a=jQuery(t),o=a.attr("data-ax5docker-path"),l=u(o);if(!n.menu)throw console.log(l.panels),"'ax5ui-menu' is required to implement the function.";var s=e.map(l.panels,function(t){return{label:this.name,index:t,panePath:o}});return n.menu.setConfig({items:s,onClick:function(){b(u(this.panePath),this.index)}}),n.menu.popup(i),a=null,o=null,l=null,n},w=function(){l.panelDebounceFn(function(){this.$target.find('[data-ax5docker-pane-tabs="'+this.instanceId+'"]').each(function(){var t=jQuery(this).parent();this.scrollWidth>this.clientWidth?t.addClass("tabs-scrolled"):t.removeClass("tabs-scrolled"),t=null})}.bind(n))},_=function(t){e.isArray(t)?t.forEach(function(t){g(t,"deactive")}):g(t,"deactive")},I=function(){var t={stack:function(i){if(!e.isArray(i.panels))return!1;var n={type:"stack",panels:[]};return i.panels.forEach(function(e,i){if(e){var a=t[e.type](e);a&&n.panels.push(a),a=null}}),0==n.panels.length?null:(n.panels.length<2&&(n=n.panels[0]),n)},panel:function(t){return t},row:function(i){if(!e.isArray(i.panels))return!1;var n={type:"row",panels:[]};return i.panels.forEach(function(e,i){if(e){var a=t[e.type](e);a&&n.panels.push(a),a=null}}),0==n.panels.length?null:(n.panels.length<2&&(n=n.panels[0]),n)},column:function(i){if(!e.isArray(i.panels))return!1;var n={type:"column",panels:[]};return i.panels.forEach(function(e,i){if(e){var a=t[e.type](e);a&&n.panels.push(a),a=null}}),0==n.panels.length?null:(n.panels.length<2&&(n=n.panels[0]),n)}};n.panels[0]?(n.panels[0]=t[n.panels[0].type](n.panels[0]),n.panels[0]&&"panel"===n.panels[0].type&&(n.panels[0]={type:"stack",panels:[n.panels[0]]})):n.panels=[],m()};this.init=function(t){return o=jQuery.extend(!0,{},o,t),o.target?(this.onResize=o.onResize,this.$target=jQuery(o.target),this.panels=o.panels||[],this.onStateChanged=o.onStateChanged,this.onClick=o.onClick,this.onLoad=o.onLoad,this.onDataChanged=o.onDataChanged,ax5.ui.menu&&(this.menu=new ax5.ui.menu({theme:"default",position:"absolute",icons:{arrow:"▸"}})),void jQuery(window).bind("resize.ax5docker-"+this.id,function(){w()})):(console.log(ax5.info.getError("ax5docker","401","init")),this)},this.setPanels=function(t){return this.panels=t||[],m(),this},this.addModule=function(t){return e.isObject(t)&&jQuery.extend(!0,this.modules,t),this},this.repaint=function(){return m(),this},this.addPanel=function(t,e,i,n){console.log(t,e);var a="",o=void 0,l=void 0;if(0===this.panels.length||!this.panels[0])return this.setPanels([{type:"stack",panels:[i]}]);a="undefined"==t?"0":t.replace(/[a-zA-Z\[\]]+/g,"").replace(/(\d+)/g,function(t,e){return"panels["+t+"]"}),o=u(a),l=h(o),l&&"stack"==l.type&&(o=l,a=o.panelPath),console.log(o),console.log(l),console.log(a);var s={stack:function(t,e,i,n){var o=jQuery.extend({},t),l={stack:function(t,e){e.active&&_(t.panels),t.panels.push(e),I()},"stack-left":function(t,e){e.active&&_(t.panels),t.panels.splice(n,0,e),I()},"stack-right":function(t,e){e.active&&_(t.panels),t.panels.splice(Number(n)+1,0,e),I()},"row-left":function(t,i){var n=a.substr(0,a.lastIndexOf(".")),l=u(n);l&&"row"==l.type?this.addPanel(l.panelPath,e,i,t.panelIndex):(t=p(a,{type:"row",panels:[]}),t.panels.push(i),t.panels.push(o),I())},"row-right":function(t,i){var n=a.substr(0,a.lastIndexOf(".")),l=u(n);l&&"row"==l.type?this.addPanel(l.panelPath,e,i,t.panelIndex):(t=p(a,{type:"row",panels:[]}),t.panels.push(o),t.panels.push(i),I())},"column-top":function(t,i){var n=a.substr(0,a.lastIndexOf(".")),l=u(n);l&&"column"==l.type?this.addPanel(l.panelPath,e,i,t.panelIndex):(t=p(a,{type:"column",panels:[]}),t.panels.push(i),t.panels.push(o),I())},"column-bottom":function(t,i){var n=a.substr(0,a.lastIndexOf(".")),l=u(n);l&&"column"==l.type?this.addPanel(l.panelPath,e,i,t.panelIndex):(t=p(a,{type:"column",panels:[]}),t.panels.push(o),t.panels.push(i),I())}};e in l&&l[e].call(this,t,i),o=null,l=null},row:function(t,e,i,n){var o=jQuery.extend({},t),l={stack:function(t,i){t.panels[0]&&t.panels[0].panelPath&&this.addPanel(t.panels[0].panelPath,e,i)},"row-left":function(t,e,i){t.panels.splice(i,0,e),I()},"row-right":function(t,e,i){t.panels.splice(i+1,0,e),I()},"column-top":function(t,i,n){var l=a.substr(0,a.lastIndexOf(".")),s=u(l);s&&"column"==s.type?this.addPanel(s.panelPath,e,i,t.panelIndex):(t=p(a,{type:"column",panels:[]}),t.panels.push(i),t.panels.push(o),I())},"column-bottom":function(t,i,n){var l=a.substr(0,a.lastIndexOf(".")),s=u(l);s&&"column"==s.type?this.addPanel(s.panelPath,e,i,t.panelIndex):(t=p(a,{type:"column",panels:[]}),t.panels.push(o),t.panels.push(i),I())}};e in l&&l[e].call(this,t,i,n),l=null,o=null},column:function(t,e,i,n){var o=jQuery.extend({},t),l={stack:function(t,i){t.panels[0]&&t.panels[0].panelPath&&this.addPanel(t.panels[0].panelPath,e,i)},"row-left":function(t,i){var n=a.substr(0,a.lastIndexOf(".")),l=u(n);l&&"row"==l.type?this.addPanel(l.panelPath,e,i,t.panelIndex):(t=p(a,{type:"row",panels:[]}),t.panels.push(i),t.panels.push(o),I())},"row-right":function(t,i){var n=a.substr(0,a.lastIndexOf(".")),l=u(n);l&&"row"==l.type?this.addPanel(l.panelPath,e,i,t.panelIndex):(t=p(a,{type:"row",panels:[]}),t.panels.push(o),t.panels.push(i),I())},"column-top":function(t,e){t.panels.splice(n,0,e),I()},"column-bottom":function(t,e){t.panels.splice(n+1,0,e),I()}};e in l&&l[e].call(this,t,i),l=null,o=null},panel:function(t,e,i){var n=jQuery.extend({},t),o={stack:function(t,e){t=p(a,{type:"stack",panels:[]}),e.active&&_(n),t.panels.push(n),t.panels.push(e),I()},"stack-left":function(t,e){t=p(a,{type:"stack",panels:[]}),e.active&&_(n),t.panels.push(e),t.panels.push(n),I()},"stack-right":function(t,e){t=p(a,{type:"stack",panels:[]}),e.active&&_(n),t.panels.push(n),t.panels.push(e),I()},"row-left":function(t,i){var o=a.substr(0,a.lastIndexOf(".")),l=u(o);l&&"row"==l.type||"column"==l.type?this.addPanel(l.panelPath,e,i,t.panelIndex):(t=p(a,{type:"row",panels:[]}),t.panels.push(i),t.panels.push(n),I())},"row-right":function(t,i){var o=a.substr(0,a.lastIndexOf(".")),l=u(o);l&&"row"==l.type||"column"==l.type?this.addPanel(l.panelPath,e,i,t.panelIndex):(t=p(a,{type:"row",panels:[]}),t.panels.push(n),t.panels.push(i),I())},"column-top":function(t,i){var o=a.substr(0,a.lastIndexOf(".")),l=u(o);l&&"column"==l.type||"row"==l.type?this.addPanel(l.panelPath,e,i,t.panelIndex):(t=p(a,{type:"column",panels:[]}),t.panels.push(i),t.panels.push(n),I())},"column-bottom":function(t,i){var o=a.substr(0,a.lastIndexOf(".")),l=u(o);l&&"column"==l.type||"row"==l.type?this.addPanel(l.panelPath,e,i,t.panelIndex):(t=p(a,{type:"column",panels:[]}),t.panels.push(n),t.panels.push(i),I())}};e in o&&o[e].call(this,t,i),n=null,o=null}};return(o?o.type:"stack"in s)&&s[o?o.type:"stack"].call(this,o,e,i,n),this},this.removePanel=function(t,e){var i=u(t);return g(i,"destroy",e),i=null,this},this.appendPanel=function(t,i,n){console.log(t);var a=$.extend({},t,{panelPath:""}),o=void 0,l=t.panelPath,s=e.right(i,".").replace(/\D/g,"");if(0==n.length)return this;if(t.panelPath===i){var r=i.substr(0,i.lastIndexOf(".")),d=u(r);if("stack"!=d.type)return this}if(1==n.length)o="last-child"==n[0]?"stack":"stack-"+n[0],a.active=!1,a.$item.removeClass("active"),g(a,"deactive");else switch(n[0]+"-"+n[1]){case"left-top":o="row-left";break;case"left-middle":o="row-left";break;case"left-bottom":o="row-left";break;case"center-top":o="column-top";break;case"center-middle":o="stack",a.active=!1,a.$item.removeClass("active"),s=void 0,g(a,"deactive");break;case"center-bottom":o="column-bottom";break;case"right-top":o="row-right";break;case"right-middle":o="row-right";break;case"right-bottom":o="row-right"}return t.panelPath===i&&(i=e.left(i,".")),p(l,null),console.log(i,o,a,s),this.addPanel(i,o,a,s),a=null,this},this.align=function(){return w(),this},this.searchPanel=function(t){if(e.isFunction(t)){var i=function n(e){for(var i=0,o=e.length,l=void 0;i<o;i++)if(e[i])if("panel"===e[i].type){if(t.call({config:a.config,panel:e[i]},e[i]))return e[i]}else if(l=n(e[i].panels))return l};return i(this.panels)}if(e.isString(t))return u(t)},this.activePanel=function(t,e){var i="",n=void 0,a=void 0;return 0!==this.panels.length&&this.panels[0]?(i="undefined"==typeof t?"0":t.replace(/[a-zA-Z\[\]]+/g,"").replace(/(\d+)/g,function(t,e){return"panels["+t+"]"}),n=u(i),a=h(n),b(a,n.panelIndex),this):this},this.main=function(){t.docker_instance=t.docker_instance||[],t.docker_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),i=ax5.ui.docker}(),function(){var t=ax5.ui.docker,e=function(t,e){return"bottom"===e.labelDirection?'<div data-ax5docker-pane="{{id}}" data-ax5docker-label-direction="{{labelDirection}}" data-ax5docker-path="{{panelPath}}" style="flex-grow: {{#flexGrow}}{{.}}{{/flexGrow}}{{^flexGrow}}1{{/flexGrow}};">\n    <div data-ax5docker-pane-item-views="{{id}}"></div>\n    <ul data-ax5docker-pane-tabs="{{id}}" data-ax5docker-id="{{id}}" data-ax5docker-path="{{panelPath}}"></ul>\n    <div data-ax5docker-pane-tabs-more="{{id}}">{{{icons.more}}}</div>\n</div>':'<div data-ax5docker-pane="{{id}}" data-ax5docker-label-direction="{{labelDirection}}" data-ax5docker-path="{{panelPath}}" style="flex-grow: {{#flexGrow}}{{.}}{{/flexGrow}}{{^flexGrow}}1{{/flexGrow}};">\n    <ul data-ax5docker-pane-tabs="{{id}}" data-ax5docker-id="{{id}}" data-ax5docker-path="{{panelPath}}"></ul>\n    <div data-ax5docker-pane-tabs-more="{{id}}">{{{icons.more}}}</div>\n    <div data-ax5docker-pane-item-views="{{id}}"></div>\n</div>'},i=function(){return'<li data-ax5docker-pane-tab="{{pIndex}}" data-ax5docker-id="{{id}}" data-ax5docker-path="{{panelPath}}" class="{{#hasLabelColor}}hasLabelColor{{/hasLabelColor}}">\n    <div class="label-icon" style="{{#color}}background: {{color}};{{/color}}{{#borderColor}}border-color: {{borderColor}};{{/borderColor}}"></div>\n    <div class="title">{{{name}}}</div>\n    {{^disableClosePanel}}<div class="close-icon">{{{icons.close}}}</div>{{/disableClosePanel}}\n</li><li class="pane-tab-margin"></li>'};t.tmpl={"stack-panel":e,"panel-label":i,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n,i),i)}}}(),function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"palette"},function(){return function(){var n=this,a=this,o=void 0;this.instanceId=ax5.getGuid(),this.target=null,this.config={clickEventName:"click",theme:"default",animateTime:100,colors:{preview:{width:24,height:24,cellWidth:30},label:{width:80},slider:{trackHeight:8,amount:32,handleWidth:18,handleHeight:18},list:[{label:"red",value:"#ff0000"},{label:"orange",value:"#ff9802"},{label:"yellow",value:"#ffff00"},{label:"green",value:"#00ff36"},{label:"blue",value:"#0000ff"},{label:"purple",value:"#ba00ff"},{label:"black",value:"#000000"},{label:"white",value:"#ffffff"}]},controls:{height:0},columnKeys:{}},this.xvar={},this.colors=[],o=this.config;var l={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},s=function(t){var e=void 0,i=t.originalEvent?t.originalEvent:t;return e="changedTouches"in i&&i.changedTouches?i.changedTouches[0]:i,{clientX:e.pageX,clientY:e.pageY}},r=function(t){t.originalTrackWidth=t.$track.width(),t.trackWidth=t.originalTrackWidth-o.colors.slider.handleWidth/5;var i=p(t,t._amount);if(i<0||i>t.trackWidth){var n=void 0;i=i<0?0:i>t.trackWidth?t.trackWidth:i,n=h(t,i),d(t,c(t,n))}t.$handle.css({left:i}),t.$item.off(l.mousedown).on(l.mousedown,'[data-panel="color-handle"]',function(i){var n=s(i);t._originalHandleClientX=n.clientX,t._originalHandleLeft=t.$handle.position().left,f.on(t),e.stopEvent(i.originalEvent)}).off("click").on("click",'[data-panel="color-label"], [data-panel="color-preview"]',function(e){a.onClick&&a.onClick.call(t,"#"+t._selectedColor.toUpperCase(),e)}).on("click",'[data-panel="color-track"]',function(e){if("color-track"==e.target.getAttribute("data-panel")){var i=s(e),n=i.clientX-t.$track.offset().left,a=h(t,n);t.$handle.css({left:n}),d(t,c(t,a),e),i=null,n=null,a=null}})},d=function(t,e,i){t.$preview.css({"background-color":"#"+e}),t.$label.html("#"+e.toUpperCase()),t._selectedColor=e,i&&a.onUpdateColor&&a.onUpdateColor.call(t,"#"+t._selectedColor.toUpperCase())},c=function(t,e){var i={black:function(t,e){return t.lighten(o.colors.slider.amount/2).darken(e).getHexValue()},white:function(t,e){return t.darken(o.colors.slider.amount/2).darken(e).getHexValue()},normal:function(t,e){return t.darken(e).getHexValue()}};return t._uniqColor in i?i[t._uniqColor](t._color,e):i.normal(t._color,e)},u=function(t,e){var i={black:function(t,e){var i=t.lighten(o.colors.slider.amount/2);return 100*(i.getHsl().l-e.getHsl().l)},white:function(t,e){var i=t.darken(o.colors.slider.amount/2);return 100*(i.getHsl().l-e.getHsl().l)},normal:function(t,e){return 100*(t.getHsl().l-e.getHsl().l)}};return t._uniqColor in i?i[t._uniqColor](t._color,e):i.normal(t._color,e)},h=function(t,e){return o.colors.slider.amount*(e-t.trackWidth/2)/(t.originalTrackWidth/2)},p=function(t,e){return e*(t.originalTrackWidth/2)/o.colors.slider.amount+t.trackWidth/2;
},f={on:function(t){jQuery(document.body).on(l.mousemove+".ax5palette-"+n.instanceId,function(e){var i=s(e),n=i.clientX-t._originalHandleClientX,a=t._originalHandleLeft+n,o=void 0;a=a<0?0:a>t.trackWidth?t.trackWidth:a,t.$handle.css({left:a}),o=h(t,a),d(t,c(t,o),e),i=null,n=null}).on(l.mouseup+".ax5palette-"+n.instanceId,function(t){f.off(),e.stopEvent(t)}).on("mouseleave.ax5palette-"+n.instanceId,function(t){f.off(),e.stopEvent(t)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){a.xvar.resizerLived=!1,jQuery(document.body).off(l.mousemove+".ax5palette-"+n.instanceId).off(l.mouseup+".ax5palette-"+n.instanceId).off("mouseleave.ax5palette-"+n.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},g=function(t){({width:n.$target.innerWidth(),height:n.$target.innerHeight()});n.$target.html(i.tmpl.get("frame",{},o.columnKeys)),n.$={root:n.$target.find('[data-ax5palette-container="root"]'),colors:n.$target.find('[data-ax5palette-container="colors"]'),controls:n.$target.find('[data-ax5palette-container="controls"]')},o.colors.list.forEach(function(t){t._color=e.color(t.value),t._selectedColor=t._color.getHexValue(),0==t._color.r&&0==t._color.g&&0==t._color.b?(t._amount=o.colors.slider.amount,t._uniqColor="black",t._color0value="#"+t._color.lighten(o.colors.slider.amount).getHexValue(),t._color1value="#"+t._color.lighten(o.colors.slider.amount/2).getHexValue(),t._color2value="#"+t._color.getHexValue()):255==t._color.r&&255==t._color.g&&255==t._color.b?(t._amount=-o.colors.slider.amount,t._uniqColor="white",t._color0value="#"+t._color.getHexValue(),t._color1value="#"+t._color.darken(o.colors.slider.amount/2).getHexValue(),t._color2value="#"+t._color.darken(o.colors.slider.amount).getHexValue()):(t._amount=0,t._color0value="#"+t._color.lighten(o.colors.slider.amount).getHexValue(),t._color1value="#"+t._color.getHexValue(),t._color2value="#"+t._color.darken(o.colors.slider.amount).getHexValue())}),o.colors.slider.handleLeft=-o.colors.slider.handleWidth/2,o.colors.slider.handleTop=-o.colors.slider.handleHeight/2,n.$.colors.html(i.tmpl.get("colors",o,o.columnKeys)),n.$.colors.find("[data-ax5palette-color-index]").each(function(){var t=this.getAttribute("data-ax5palette-color-index"),e=o.colors.list[t],i=jQuery.extend({},e);i._index=t,i.$item=jQuery(this),i.$preview=i.$item.find('[data-panel="color"]'),i.$label=i.$item.find('[data-panel="color-label"]'),i.$track=i.$item.find('[data-panel="color-track"]'),i.$handle=i.$item.find('[data-panel="color-handle"]'),r(i),a.colors.push(i)}),t&&n.setSelectedColor(t)};this.init=function(){this.onStateChanged=o.onStateChanged,this.onClick=o.onClick,this.onUpdateColor=o.onUpdateColor,o.target||console.log(ax5.info.getError("ax5palette","401","setConfig")),this.$target=jQuery(o.target),setTimeout(function(){g((o.selectedColor||"").trim())})},this.repaint=function(){return g(),this},this.setSelectedColor=function(t){var i=e.color(t.trim()),n=765,o=-1;if(a.colors.forEach(function(t,e){var a=t._color.getHsl(),l=i.getHsl(),s=Math.abs(a.h-l.h)+Math.abs(a.s-l.s)+Math.abs(a.l-l.l);s<n&&(n=s,o=e)}),o>-1){var l=void 0,s=void 0,r=a.colors[o];r._amount=u(r,i),s=p(r,r._amount),r.$handle.css({left:s}),l=h(r,s),d(r,c(r,l))}return this},this.main=function(){t.palette_instance=t.palette_instance||[],t.palette_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),i=ax5.ui.palette}(),function(){var t=ax5.ui.palette,e=function(t){return'\n<div data-ax5palette-container="root">\n    <div data-ax5palette-container="colors"></div>\n    <div data-ax5palette-container="controls"></div>\n</div>\n'},i=function(t){return'\n{{#colors}}\n{{#list}}\n<div data-ax5palette-color="{{label}}" data-ax5palette-color-index="{{@i}}">\n    <div data-panel="color-preview" style="padding:{{preview.cellPadding}}px;width:{{preview.cellWidth}}px;">\n        <div data-panel="color-box" style="width:{{preview.width}}px;height:{{preview.height}}px;"><div data-panel="color" style="background-color:{{value}};"></div></div>\n    </div>\n    <div data-panel="color-label" style="width:{{label.width}}px;">{{label}}</div>\n    <div data-panel="color-slider">\n        <div data-panel="color-track" style="height:{{slider.trackHeight}}px;background: linear-gradient(90deg, {{_color0value}}, {{_color1value}}, {{_color2value}}); ">\n            <div data-panel="color-handle">\n                <div data-panel="color-handle-after" style="width:{{slider.handleWidth}}px;height:{{slider.handleWidth}}px;left:{{slider.handleLeft}}px;top:{{slider.handleLeft}}px;"></div>\n            </div>\n        </div>\n    </div>\n</div>\n{{/list}}\n{{/colors}}\n'};t.tmpl={frame:e,colors:i,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}();
//# sourceMappingURL=ax5ui.all.min.js.map
